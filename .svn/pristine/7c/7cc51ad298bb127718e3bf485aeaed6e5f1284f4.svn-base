{"remainingRequest":"E:\\visual_code_work_space\\ruoyi-ui\\node_modules\\babel-loader\\lib\\index.js!E:\\visual_code_work_space\\ruoyi-ui\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\visual_code_work_space\\ruoyi-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\visual_code_work_space\\ruoyi-ui\\src\\views\\flowable\\task\\myProcess\\send\\flowview.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\visual_code_work_space\\ruoyi-ui\\src\\views\\flowable\\task\\myProcess\\send\\flowview.vue","mtime":1693557459675},{"path":"E:\\visual_code_work_space\\ruoyi-ui\\babel.config.js","mtime":1693557459543},{"path":"E:\\visual_code_work_space\\ruoyi-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\visual_code_work_space\\ruoyi-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"E:\\visual_code_work_space\\ruoyi-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\visual_code_work_space\\ruoyi-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKdmFyIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQgPSByZXF1aXJlKCJFOi92aXN1YWxfY29kZV93b3JrX3NwYWNlL3J1b3lpLXVpL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2ludGVyb3BSZXF1aXJlRGVmYXVsdC5qcyIpLmRlZmF1bHQ7Ck9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICB2YWx1ZTogdHJ1ZQp9KTsKZXhwb3J0cy5kZWZhdWx0ID0gdm9pZCAwOwp2YXIgX3JlZ2VuZXJhdG9yUnVudGltZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoIkU6L3Zpc3VhbF9jb2RlX3dvcmtfc3BhY2UvcnVveWktdWkvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvcmVnZW5lcmF0b3JSdW50aW1lLmpzIikpOwp2YXIgX2FzeW5jVG9HZW5lcmF0b3IyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJFOi92aXN1YWxfY29kZV93b3JrX3NwYWNlL3J1b3lpLXVpL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2FzeW5jVG9HZW5lcmF0b3IuanMiKSk7CnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3Qua2V5cy5qcyIpOwp2YXIgX2N1c3RvbUJwbW4gPSByZXF1aXJlKCJAL2NvbXBvbmVudHMvY3VzdG9tQnBtbiIpOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwp2YXIgX2RlZmF1bHQyID0gewogIG5hbWU6ICJGbG93VmlldyIsCiAgcHJvcHM6IHsKICAgIGZsb3dEYXRhOiB7CiAgICAgIHR5cGU6IE9iamVjdCwKICAgICAgZGVmYXVsdDogZnVuY3Rpb24gX2RlZmF1bHQoKSB7fQogICAgfQogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGJwbW5WaWV3ZXI6IG51bGwKICAgIH07CiAgfSwKICB3YXRjaDogewogICAgZmxvd0RhdGE6IHsKICAgICAgaGFuZGxlcjogZnVuY3Rpb24gaGFuZGxlcihuZXdWYWwpIHsKICAgICAgICBpZiAoT2JqZWN0LmtleXMobmV3VmFsKS5sZW5ndGggPiAwKSB7CiAgICAgICAgICAvLyDnlJ/miJDlrp7kvosKICAgICAgICAgIHRoaXMuYnBtblZpZXdlciAmJiB0aGlzLmJwbW5WaWV3ZXIuZGVzdHJveSgpOwogICAgICAgICAgdGhpcy5icG1uVmlld2VyID0gbmV3IF9jdXN0b21CcG1uLkN1c3RvbVZpZXdlcih7CiAgICAgICAgICAgIGNvbnRhaW5lcjogdGhpcy4kcmVmcy5mbG93Q2FudmFzLAogICAgICAgICAgICBoZWlnaHQ6ICdjYWxjKDEwMHZoIC0gMjAwcHgpJwogICAgICAgICAgfSk7CiAgICAgICAgICB0aGlzLmxvYWRGbG93Q2FudmFzKG5ld1ZhbCk7CiAgICAgICAgfQogICAgICB9LAogICAgICBpbW1lZGlhdGU6IHRydWUsCiAgICAgIC8vIOeri+WNs+eUn+aViAogICAgICBkZWVwOiB0cnVlIC8v55uR5ZCs5a+56LGh5oiW5pWw57uE55qE5pe25YCZ77yM6KaB55So5Yiw5rex5bqm55uR5ZCsCiAgICB9CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkge30sCiAgbWV0aG9kczogewogICAgLy8g5Yqg6L295rWB56iL5Zu+54mHCiAgICBsb2FkRmxvd0NhbnZhczogZnVuY3Rpb24gbG9hZEZsb3dDYW52YXMoZmxvd0RhdGEpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgcmV0dXJuICgwLCBfYXN5bmNUb0dlbmVyYXRvcjIuZGVmYXVsdCkoIC8qI19fUFVSRV9fKi8oMCwgX3JlZ2VuZXJhdG9yUnVudGltZTIuZGVmYXVsdCkoKS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgdmFyIHNlbGY7CiAgICAgICAgcmV0dXJuICgwLCBfcmVnZW5lcmF0b3JSdW50aW1lMi5kZWZhdWx0KSgpLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBzZWxmID0gX3RoaXM7CiAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDE7CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDQ7CiAgICAgICAgICAgICAgcmV0dXJuIHNlbGYuYnBtblZpZXdlci5pbXBvcnRYTUwoZmxvd0RhdGEueG1sRGF0YSk7CiAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICBzZWxmLmZpdFZpZXdwb3J0KCk7CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDEwOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDc7CiAgICAgICAgICAgICAgX2NvbnRleHQudDAgPSBfY29udGV4dFsiY2F0Y2giXSgxKTsKICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKF9jb250ZXh0LnQwLm1lc3NhZ2UsIF9jb250ZXh0LnQwLndhcm5pbmdzKTsKICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUsIG51bGwsIFtbMSwgN11dKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgLy8g6K6p5Zu+6IO96Ieq6YCC5bqU5bGP5bmVCiAgICBmaXRWaWV3cG9ydDogZnVuY3Rpb24gZml0Vmlld3BvcnQoKSB7CiAgICAgIHRoaXMuem9vbSA9IHRoaXMuYnBtblZpZXdlci5nZXQoJ2NhbnZhcycpLnpvb20oImZpdC12aWV3cG9ydCIsICJhdXRvIik7CiAgICB9LAogICAgLy8g5pS+5aSn57yp5bCPCiAgICB6b29tVmlld3BvcnQ6IGZ1bmN0aW9uIHpvb21WaWV3cG9ydCgpIHsKICAgICAgdmFyIHpvb21JbiA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogdHJ1ZTsKICAgICAgdGhpcy56b29tID0gdGhpcy5icG1uVmlld2VyLmdldCgnY2FudmFzJykuem9vbSgpOwogICAgICB0aGlzLnpvb20gKz0gem9vbUluID8gMC4xIDogLTAuMTsKICAgICAgaWYgKHRoaXMuem9vbSA+PSAwLjIpIHRoaXMuYnBtblZpZXdlci5nZXQoJ2NhbnZhcycpLnpvb20odGhpcy56b29tKTsKICAgIH0KICB9Cn07CmV4cG9ydHMuZGVmYXVsdCA9IF9kZWZhdWx0Mjs="},{"version":3,"names":["_customBpmn","require","name","props","flowData","type","Object","default","_default","data","bpmnViewer","watch","handler","newVal","keys","length","destroy","BpmnViewer","container","$refs","flowCanvas","height","loadFlowCanvas","immediate","deep","mounted","methods","_this","_asyncToGenerator2","_regeneratorRuntime2","mark","_callee","self","wrap","_callee$","_context","prev","next","importXML","xmlData","fitViewport","t0","console","error","message","warnings","stop","zoom","get","zoomViewport","zoomIn","arguments","undefined","exports","_default2"],"sources":["src/views/flowable/task/myProcess/send/flowview.vue"],"sourcesContent":["<template>\r\n  <div class=\"containers main-box\">\r\n    <el-button type=\"success\"\r\n               size=\"small\"\r\n               icon=\"el-icon-zoom-in\"\r\n               @click=\"zoomViewport(true)\">放大</el-button>\r\n    <el-button type=\"warning\"\r\n               size=\"small\"\r\n               icon=\"el-icon-zoom-out\"\r\n               @click=\"zoomViewport(false)\">缩小</el-button>\r\n    <el-button type=\"info\"\r\n               size=\"small\"\r\n               icon=\"el-icon-rank\"\r\n               @click=\"fitViewport\">适中</el-button>\r\n    <div class=\"canvas\" ref=\"flowCanvas\"></div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { CustomViewer as BpmnViewer } from \"@/components/customBpmn\";\r\n\r\nexport default {\r\n  name: \"FlowView\",\r\n  props: {\r\n    flowData: {\r\n      type: Object,\r\n      default: () => {}\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      bpmnViewer: null\r\n    };\r\n  },\r\n  watch: {\r\n    flowData: {\r\n      handler(newVal) {\r\n        if (Object.keys(newVal).length > 0) {\r\n          // 生成实例\r\n          this.bpmnViewer && this.bpmnViewer.destroy();\r\n          this.bpmnViewer = new BpmnViewer({\r\n            container: this.$refs.flowCanvas,\r\n            height: 'calc(100vh - 200px)',\r\n          });\r\n          this.loadFlowCanvas(newVal)\r\n        }\r\n      },\r\n      immediate: true, // 立即生效\r\n      deep: true  //监听对象或数组的时候，要用到深度监听\r\n    }\r\n  },\r\n  mounted() {},\r\n  methods: {\r\n    // 加载流程图片\r\n    async loadFlowCanvas(flowData) {\r\n      const self = this\r\n      try {\r\n        await self.bpmnViewer.importXML(flowData.xmlData);\r\n        self.fitViewport()\r\n      } catch (err) {\r\n        console.error(err.message, err.warnings)\r\n      }\r\n    },\r\n    // 让图能自适应屏幕\r\n    fitViewport() {\r\n      this.zoom = this.bpmnViewer.get('canvas').zoom(\"fit-viewport\", \"auto\")\r\n    },\r\n    // 放大缩小\r\n    zoomViewport(zoomIn = true) {\r\n      this.zoom = this.bpmnViewer.get('canvas').zoom()\r\n      this.zoom += (zoomIn ? 0.1 : -0.1)\r\n      if(this.zoom >= 0.2) this.bpmnViewer.get('canvas').zoom(this.zoom)\r\n    },\r\n  }\r\n};\r\n</script>\r\n<style lang=\"scss\">\r\n  .bjs-powered-by {\r\n    display: none;\r\n  }\r\n  .view-mode {\r\n    .el-header, .el-aside, .djs-palette, .bjs-powered-by {\r\n      display: none;\r\n    }\r\n    .el-loading-mask {\r\n      background-color: initial;\r\n    }\r\n    .el-loading-spinner {\r\n      display: none;\r\n    }\r\n  }\r\n  .containers {\r\n    // background-color: #ffffff;\r\n    width: 100%;\r\n    height: 100%;\r\n    .canvas {\r\n      width: 100%;\r\n      height: 100%;\r\n    }\r\n    .panel {\r\n      position: absolute;\r\n      right: 0;\r\n      top: 50px;\r\n      width: 300px;\r\n    }\r\n    .load {\r\n      margin-right: 10px;\r\n    }\r\n    .el-form-item__label{\r\n      font-size: 13px;\r\n    }\r\n\r\n    .djs-palette{\r\n      left: 0px!important;\r\n      top: 0px;\r\n      border-top: none;\r\n    }\r\n\r\n    .djs-container svg {\r\n      min-height: 650px;\r\n    }\r\n\r\n    .overlays-div {\r\n      font-size: 10px;\r\n      color: red;\r\n      width: 100px;\r\n      top: -20px !important;\r\n    }\r\n  }\r\n</style>\r\n"],"mappings":";;;;;;;;;;AAkBA,IAAAA,WAAA,GAAAC,OAAA;;;;;;;;;;;;;;;;;;gBAEA;EACAC,IAAA;EACAC,KAAA;IACAC,QAAA;MACAC,IAAA,EAAAC,MAAA;MACAC,OAAA,WAAAC,SAAA;IACA;EACA;EACAC,IAAA,WAAAA,KAAA;IACA;MACAC,UAAA;IACA;EACA;EACAC,KAAA;IACAP,QAAA;MACAQ,OAAA,WAAAA,QAAAC,MAAA;QACA,IAAAP,MAAA,CAAAQ,IAAA,CAAAD,MAAA,EAAAE,MAAA;UACA;UACA,KAAAL,UAAA,SAAAA,UAAA,CAAAM,OAAA;UACA,KAAAN,UAAA,OAAAO,wBAAA;YACAC,SAAA,OAAAC,KAAA,CAAAC,UAAA;YACAC,MAAA;UACA;UACA,KAAAC,cAAA,CAAAT,MAAA;QACA;MACA;MACAU,SAAA;MAAA;MACAC,IAAA;IACA;EACA;EACAC,OAAA,WAAAA,QAAA;EACAC,OAAA;IACA;IACAJ,cAAA,WAAAA,eAAAlB,QAAA;MAAA,IAAAuB,KAAA;MAAA,WAAAC,kBAAA,CAAArB,OAAA,oBAAAsB,oBAAA,CAAAtB,OAAA,IAAAuB,IAAA,UAAAC,QAAA;QAAA,IAAAC,IAAA;QAAA,WAAAH,oBAAA,CAAAtB,OAAA,IAAA0B,IAAA,UAAAC,SAAAC,QAAA;UAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;YAAA;cACAL,IAAA,GAAAL,KAAA;cAAAQ,QAAA,CAAAC,IAAA;cAAAD,QAAA,CAAAE,IAAA;cAAA,OAEAL,IAAA,CAAAtB,UAAA,CAAA4B,SAAA,CAAAlC,QAAA,CAAAmC,OAAA;YAAA;cACAP,IAAA,CAAAQ,WAAA;cAAAL,QAAA,CAAAE,IAAA;cAAA;YAAA;cAAAF,QAAA,CAAAC,IAAA;cAAAD,QAAA,CAAAM,EAAA,GAAAN,QAAA;cAEAO,OAAA,CAAAC,KAAA,CAAAR,QAAA,CAAAM,EAAA,CAAAG,OAAA,EAAAT,QAAA,CAAAM,EAAA,CAAAI,QAAA;YAAA;YAAA;cAAA,OAAAV,QAAA,CAAAW,IAAA;UAAA;QAAA,GAAAf,OAAA;MAAA;IAEA;IACA;IACAS,WAAA,WAAAA,YAAA;MACA,KAAAO,IAAA,QAAArC,UAAA,CAAAsC,GAAA,WAAAD,IAAA;IACA;IACA;IACAE,YAAA,WAAAA,aAAA;MAAA,IAAAC,MAAA,GAAAC,SAAA,CAAApC,MAAA,QAAAoC,SAAA,QAAAC,SAAA,GAAAD,SAAA;MACA,KAAAJ,IAAA,QAAArC,UAAA,CAAAsC,GAAA,WAAAD,IAAA;MACA,KAAAA,IAAA,IAAAG,MAAA;MACA,SAAAH,IAAA,cAAArC,UAAA,CAAAsC,GAAA,WAAAD,IAAA,MAAAA,IAAA;IACA;EACA;AACA;AAAAM,OAAA,CAAA9C,OAAA,GAAA+C,SAAA"}]}