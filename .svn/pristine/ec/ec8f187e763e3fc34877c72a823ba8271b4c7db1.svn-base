{"remainingRequest":"E:\\visual_code_work_space\\ruoyi-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\visual_code_work_space\\ruoyi-ui\\src\\components\\parser\\Parser.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\visual_code_work_space\\ruoyi-ui\\src\\components\\parser\\Parser.vue","mtime":1693557459629},{"path":"E:\\visual_code_work_space\\ruoyi-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\visual_code_work_space\\ruoyi-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"E:\\visual_code_work_space\\ruoyi-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\visual_code_work_space\\ruoyi-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQppbXBvcnQgeyBkZWVwQ2xvbmUgfSBmcm9tICcuLi8uLi91dGlscy9pbmRleCcNCmltcG9ydCByZW5kZXIgZnJvbSAnLi4vcmVuZGVyL3JlbmRlci5qcycNCg0KY29uc3QgcnVsZVRyaWdnZXIgPSB7DQogICdlbC1pbnB1dCc6ICdibHVyJywNCiAgJ2VsLWlucHV0LW51bWJlcic6ICdibHVyJywNCiAgJ2VsLXNlbGVjdCc6ICdjaGFuZ2UnLA0KICAnZWwtcmFkaW8tZ3JvdXAnOiAnY2hhbmdlJywNCiAgJ2VsLWNoZWNrYm94LWdyb3VwJzogJ2NoYW5nZScsDQogICdlbC1jYXNjYWRlcic6ICdjaGFuZ2UnLA0KICAnZWwtdGltZS1waWNrZXInOiAnY2hhbmdlJywNCiAgJ2VsLWRhdGUtcGlja2VyJzogJ2NoYW5nZScsDQogICdlbC1yYXRlJzogJ2NoYW5nZScNCn0NCg0KY29uc3QgbGF5b3V0cyA9IHsNCiAgY29sRm9ybUl0ZW0oaCwgc2NoZW1lKSB7DQogICAgY29uc3QgY29uZmlnID0gc2NoZW1lLl9fY29uZmlnX18NCiAgICBjb25zdCBsaXN0ZW5lcnMgPSBidWlsZExpc3RlbmVycy5jYWxsKHRoaXMsIHNjaGVtZSkNCg0KICAgIGxldCBsYWJlbFdpZHRoID0gY29uZmlnLmxhYmVsV2lkdGggPyBgJHtjb25maWcubGFiZWxXaWR0aH1weGAgOiBudWxsDQogICAgaWYgKGNvbmZpZy5zaG93TGFiZWwgPT09IGZhbHNlKSBsYWJlbFdpZHRoID0gJzAnDQogICAgcmV0dXJuICgNCiAgICAgIDxlbC1jb2wgc3Bhbj17Y29uZmlnLnNwYW59Pg0KICAgICAgICA8ZWwtZm9ybS1pdGVtIGxhYmVsLXdpZHRoPXtsYWJlbFdpZHRofSBwcm9wPXtzY2hlbWUuX192TW9kZWxfX30NCiAgICAgICAgICBsYWJlbD17Y29uZmlnLnNob3dMYWJlbCA/IGNvbmZpZy5sYWJlbCA6ICcnfT4NCiAgICAgICAgICA8cmVuZGVyIGNvbmY9e3NjaGVtZX0gb249e2xpc3RlbmVyc30gLz4NCiAgICAgICAgPC9lbC1mb3JtLWl0ZW0+DQogICAgICA8L2VsLWNvbD4NCiAgICApDQogIH0sDQogIHJvd0Zvcm1JdGVtKGgsIHNjaGVtZSkgew0KICAgIGxldCBjaGlsZCA9IHJlbmRlckNoaWxkcmVuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykNCiAgICBpZiAoc2NoZW1lLnR5cGUgPT09ICdmbGV4Jykgew0KICAgICAgY2hpbGQgPSA8ZWwtcm93IHR5cGU9e3NjaGVtZS50eXBlfSBqdXN0aWZ5PXtzY2hlbWUuanVzdGlmeX0gYWxpZ249e3NjaGVtZS5hbGlnbn0+DQogICAgICAgICAgICAgIHtjaGlsZH0NCiAgICAgICAgICAgIDwvZWwtcm93Pg0KICAgIH0NCiAgICByZXR1cm4gKA0KICAgICAgPGVsLWNvbCBzcGFuPXtzY2hlbWUuc3Bhbn0+DQogICAgICAgIDxlbC1yb3cgZ3V0dGVyPXtzY2hlbWUuZ3V0dGVyfT4NCiAgICAgICAgICB7Y2hpbGR9DQogICAgICAgIDwvZWwtcm93Pg0KICAgICAgPC9lbC1jb2w+DQogICAgKQ0KICB9DQp9DQoNCmZ1bmN0aW9uIHJlbmRlckZyb20oaCkgew0KICBjb25zdCB7IGZvcm1Db25mQ29weSB9ID0gdGhpcw0KDQogIHJldHVybiAoDQogICAgPGVsLXJvdyBndXR0ZXI9e2Zvcm1Db25mQ29weS5ndXR0ZXJ9Pg0KICAgICAgPGVsLWZvcm0NCiAgICAgICAgc2l6ZT17Zm9ybUNvbmZDb3B5LnNpemV9DQogICAgICAgIGxhYmVsLXBvc2l0aW9uPXtmb3JtQ29uZkNvcHkubGFiZWxQb3NpdGlvbn0NCiAgICAgICAgZGlzYWJsZWQ9e2Zvcm1Db25mQ29weS5kaXNhYmxlZH0NCiAgICAgICAgbGFiZWwtd2lkdGg9e2Ake2Zvcm1Db25mQ29weS5sYWJlbFdpZHRofXB4YH0NCiAgICAgICAgcmVmPXtmb3JtQ29uZkNvcHkuZm9ybVJlZn0NCiAgICAgICAgLy8gbW9kZWzkuI3og73nm7TmjqXotYvlgLwgaHR0cHM6Ly9naXRodWIuY29tL3Z1ZWpzL2pzeC9pc3N1ZXMvNDkjaXNzdWVjb21tZW50LTQ3MjAxMzY2NA0KICAgICAgICBwcm9wcz17eyBtb2RlbDogdGhpc1tmb3JtQ29uZkNvcHkuZm9ybU1vZGVsXSB9fQ0KICAgICAgICBydWxlcz17dGhpc1tmb3JtQ29uZkNvcHkuZm9ybVJ1bGVzXX0NCiAgICAgID4NCiAgICAgICAge3JlbmRlckZvcm1JdGVtLmNhbGwodGhpcywgaCwgZm9ybUNvbmZDb3B5LmZpZWxkcyl9DQogICAgICAgIHtmb3JtQ29uZkNvcHkuZm9ybUJ0bnMgJiYgZm9ybUJ0bnMuY2FsbCh0aGlzLCBoKX0NCiAgICAgIDwvZWwtZm9ybT4NCiAgICA8L2VsLXJvdz4NCiAgKQ0KfQ0KDQpmdW5jdGlvbiBmb3JtQnRucyhoKSB7DQogIHJldHVybiA8ZWwtY29sPg0KICAgIDxlbC1mb3JtLWl0ZW0gc2l6ZT0ibGFyZ2UiPg0KICAgICAgPGVsLWJ1dHRvbiB0eXBlPSJwcmltYXJ5IiBvbkNsaWNrPXt0aGlzLnN1Ym1pdEZvcm19PuaPkOS6pDwvZWwtYnV0dG9uPg0KICAgICAgPGVsLWJ1dHRvbiBvbkNsaWNrPXt0aGlzLnJlc2V0Rm9ybX0+6YeN572uPC9lbC1idXR0b24+DQogICAgPC9lbC1mb3JtLWl0ZW0+DQogIDwvZWwtY29sPg0KfQ0KDQpmdW5jdGlvbiByZW5kZXJGb3JtSXRlbShoLCBlbGVtZW50TGlzdCkgew0KICBpZiAoZWxlbWVudExpc3QpIHsNCiAgICByZXR1cm4gZWxlbWVudExpc3QubWFwKHNjaGVtZSA9PiB7DQogICAgICBjb25zdCBjb25maWcgPSBzY2hlbWUuX19jb25maWdfXw0KICAgICAgY29uc3QgbGF5b3V0ID0gbGF5b3V0c1tjb25maWcubGF5b3V0XQ0KDQogICAgICBpZiAobGF5b3V0KSB7DQogICAgICAgIHJldHVybiBsYXlvdXQuY2FsbCh0aGlzLCBoLCBzY2hlbWUpDQogICAgICB9DQogICAgICB0aHJvdyBuZXcgRXJyb3IoYOayoeacieS4jiR7Y29uZmlnLmxheW91dH3ljLnphY3nmoRsYXlvdXRgKQ0KICAgIH0pDQogIH0NCn0NCg0KZnVuY3Rpb24gcmVuZGVyQ2hpbGRyZW4oaCwgc2NoZW1lKSB7DQogIGNvbnN0IGNvbmZpZyA9IHNjaGVtZS5fX2NvbmZpZ19fDQogIGlmICghQXJyYXkuaXNBcnJheShjb25maWcuY2hpbGRyZW4pKSByZXR1cm4gbnVsbA0KICByZXR1cm4gcmVuZGVyRm9ybUl0ZW0uY2FsbCh0aGlzLCBoLCBjb25maWcuY2hpbGRyZW4pDQp9DQoNCmZ1bmN0aW9uIHNldFZhbHVlKGV2ZW50LCBjb25maWcsIHNjaGVtZSkgew0KICB0aGlzLiRzZXQoY29uZmlnLCAnZGVmYXVsdFZhbHVlJywgZXZlbnQpDQogIHRoaXMuJHNldCh0aGlzW3RoaXMuZm9ybUNvbmYuZm9ybU1vZGVsXSwgc2NoZW1lLl9fdk1vZGVsX18sIGV2ZW50KQ0KfQ0KDQpmdW5jdGlvbiBidWlsZExpc3RlbmVycyhzY2hlbWUpIHsNCiAgY29uc3QgY29uZmlnID0gc2NoZW1lLl9fY29uZmlnX187DQogIGNvbnN0IG1ldGhvZHMgPSB0aGlzLmZvcm1Db25mLl9fbWV0aG9kc19fIHx8IHt9Ow0KICBjb25zdCBsaXN0ZW5lcnMgPSB7fTsNCg0KICAvLyDnu5lfX21ldGhvZHNfX+S4reeahOaWueazlee7keWumnRoaXPlkoxldmVudA0KICBPYmplY3Qua2V5cyhtZXRob2RzKS5mb3JFYWNoKChrZXkpID0+IHsNCiAgICBsaXN0ZW5lcnNba2V5XSA9IChldmVudCkgPT4gbWV0aG9kc1trZXldLmNhbGwodGhpcywgZXZlbnQpOw0KICB9KTsNCg0KICAvLyDlk43lupQgcmVuZGVyLmpzIOS4reeahCB2TW9kZWwgJGVtaXQoJ2lucHV0JywgdmFsKQ0KICBsaXN0ZW5lcnMuaW5wdXQgPSAoZXZlbnQpID0+IHNldFZhbHVlLmNhbGwodGhpcywgZXZlbnQsIGNvbmZpZywgc2NoZW1lKTsNCg0KICAvLyDkuIrkvKDooajljZXlhYPntKDnu4Tku7bnmoTmiJDlip/jgIHnp7vpmaTlkozpooTop4jkuovku7YNCiAgaWYgKGNvbmZpZy50YWcgPT09ICJlbC11cGxvYWQiKSB7DQogICAgbGlzdGVuZXJzLnVwbG9hZCA9IChyZXNwb25zZSwgZmlsZSwgZmlsZUxpc3QpID0+DQogICAgICBzZXRVcGxvYWQuY2FsbCh0aGlzLCBjb25maWcsIHNjaGVtZSwgcmVzcG9uc2UsIGZpbGUsIGZpbGVMaXN0KTsNCg0KICAgIGxpc3RlbmVycy5kZWxldGVVcGxvYWQgPSAoZmlsZSwgZmlsZUxpc3QpID0+DQogICAgICBkZWxldGVVcGxvYWQuY2FsbCh0aGlzLCBjb25maWcsIHNjaGVtZSwgZmlsZSwgZmlsZUxpc3QpOw0KDQogICAgbGlzdGVuZXJzLnByZXZpZXdVcGxvYWQgPSAoZmlsZSwgZmlsZUxpc3QpID0+DQogICAgICB3aW5kb3cub3BlbihmaWxlLnVybCwgIl9ibGFuayIpOw0KICB9DQoNCiAgcmV0dXJuIGxpc3RlbmVyczsNCn0NCg0KLy/ojrflj5bkuIrkvKDooajljZXlhYPntKDnu4Tku7Yg5LiK5Lyg55qE5paH5Lu2DQpmdW5jdGlvbiBzZXRVcGxvYWQoY29uZmlnLCBzY2hlbWUsIHJlc3BvbnNlLCBmaWxlLCBmaWxlTGlzdCkgew0KICAvL3Jlc3BvbnNlOiDkuIrkvKDmjqXlj6Pov5Tlm57nmoTmlbDmja4NCiAgbGV0IGZpbGVPYmogPSB7DQogICAgbmFtZTogcmVzcG9uc2UuZmlsZU5hbWUsDQogICAgdXJsOiByZXNwb25zZS51cmwsDQogICAgZmlsZVR5cGU6IHJlc3BvbnNlLmNvbnRlbnRUeXBlLA0KICB9Ow0KICBsZXQgb2xkVmFsdWUgPSAiIjsNCiAgdHJ5IHsNCiAgICBvbGRWYWx1ZSA9IEpTT04ucGFyc2UodGhpc1t0aGlzLmZvcm1Db25mLmZvcm1Nb2RlbF1bc2NoZW1lLl9fdk1vZGVsX19dKTsNCiAgfSBjYXRjaCAoZXJyKSB7DQogICAgY29uc29sZS53YXJuKGVycik7DQogIH0NCg0KICBpZiAob2xkVmFsdWUpIHsNCiAgICBvbGRWYWx1ZS5wdXNoKGZpbGVPYmopOw0KICB9IGVsc2Ugew0KICAgIG9sZFZhbHVlID0gW2ZpbGVPYmpdOw0KICB9DQoNCiAgdGhpcy4kc2V0KGNvbmZpZywgImRlZmF1bHRWYWx1ZSIsIEpTT04uc3RyaW5naWZ5KG9sZFZhbHVlKSk7DQogIHRoaXMuJHNldCgNCiAgICB0aGlzW3RoaXMuZm9ybUNvbmYuZm9ybU1vZGVsXSwNCiAgICBzY2hlbWUuX192TW9kZWxfXywNCiAgICBKU09OLnN0cmluZ2lmeShvbGRWYWx1ZSkNCiAgKTsNCn0NCg0KLy/ojrflj5bkuIrkvKDooajljZXlhYPntKDnu4Tku7Yg5Yig6Zmk5paH5Lu25ZCO55qE5paH5Lu25YiX6KGoDQpmdW5jdGlvbiBkZWxldGVVcGxvYWQoY29uZmlnLCBzY2hlbWUsIGZpbGUsIGZpbGVMaXN0KSB7DQogIGxldCBvbGRWYWx1ZSA9IEpTT04ucGFyc2UodGhpc1t0aGlzLmZvcm1Db25mLmZvcm1Nb2RlbF1bc2NoZW1lLl9fdk1vZGVsX19dKTsNCg0KICAvL2ZpbGUg5Yig6Zmk55qE5paH5Lu2DQogIC8v6L+H5ruk5o6J5Yig6Zmk55qE5paH5Lu2DQogIGxldCBuZXdWYWx1ZSA9IG9sZFZhbHVlLmZpbHRlcigoaXRlbSkgPT4gaXRlbS5uYW1lICE9PSBmaWxlLm5hbWUpOw0KICB0aGlzLiRzZXQoY29uZmlnLCAiZGVmYXVsdFZhbHVlIiwgSlNPTi5zdHJpbmdpZnkobmV3VmFsdWUpKTsNCiAgdGhpcy4kc2V0KA0KICAgIHRoaXNbdGhpcy5mb3JtQ29uZi5mb3JtTW9kZWxdLA0KICAgIHNjaGVtZS5fX3ZNb2RlbF9fLA0KICAgIEpTT04uc3RyaW5naWZ5KG5ld1ZhbHVlKQ0KICApOw0KfQ0KDQpleHBvcnQgZGVmYXVsdCB7DQogIGNvbXBvbmVudHM6IHsNCiAgICByZW5kZXINCiAgfSwNCiAgcHJvcHM6IHsNCiAgICBmb3JtQ29uZjogew0KICAgICAgdHlwZTogT2JqZWN0LA0KICAgICAgcmVxdWlyZWQ6IHRydWUNCiAgICB9DQogIH0sDQogIGRhdGEoKSB7DQogICAgY29uc3QgZGF0YSA9IHsNCiAgICAgIGZvcm1Db25mQ29weTogZGVlcENsb25lKHRoaXMuZm9ybUNvbmYpLA0KICAgICAgW3RoaXMuZm9ybUNvbmYuZm9ybU1vZGVsXToge30sDQogICAgICBbdGhpcy5mb3JtQ29uZi5mb3JtUnVsZXNdOiB7fQ0KICAgIH0NCiAgICBpZiAoZGF0YS5mb3JtQ29uZkNvcHkuZmllbGRzKSB7DQogICAgICB0aGlzLmluaXRGb3JtRGF0YShkYXRhLmZvcm1Db25mQ29weS5maWVsZHMsIGRhdGFbdGhpcy5mb3JtQ29uZi5mb3JtTW9kZWxdKQ0KICAgICAgdGhpcy5idWlsZFJ1bGVzKGRhdGEuZm9ybUNvbmZDb3B5LmZpZWxkcywgZGF0YVt0aGlzLmZvcm1Db25mLmZvcm1SdWxlc10pDQogICAgfQ0KICAgIHJldHVybiBkYXRhDQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICBpbml0Rm9ybURhdGEoY29tcG9uZW50TGlzdCwgZm9ybURhdGEpIHsNCiAgICAgIGNvbXBvbmVudExpc3QuZm9yRWFjaChjdXIgPT4gew0KICAgICAgICBjb25zdCBjb25maWcgPSBjdXIuX19jb25maWdfXw0KICAgICAgICBpZiAoY3VyLl9fdk1vZGVsX18pIGZvcm1EYXRhW2N1ci5fX3ZNb2RlbF9fXSA9IGNvbmZpZy5kZWZhdWx0VmFsdWUNCiAgICAgICAgaWYgKGNvbmZpZy5jaGlsZHJlbikgdGhpcy5pbml0Rm9ybURhdGEoY29uZmlnLmNoaWxkcmVuLCBmb3JtRGF0YSkNCiAgICAgIH0pDQogICAgfSwNCiAgICBidWlsZFJ1bGVzKGNvbXBvbmVudExpc3QsIHJ1bGVzKSB7DQogICAgICBjb21wb25lbnRMaXN0LmZvckVhY2goY3VyID0+IHsNCiAgICAgICAgY29uc3QgY29uZmlnID0gY3VyLl9fY29uZmlnX18NCiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoY29uZmlnLnJlZ0xpc3QpKSB7DQogICAgICAgICAgaWYgKGNvbmZpZy5yZXF1aXJlZCkgew0KICAgICAgICAgICAgY29uc3QgcmVxdWlyZWQgPSB7IHJlcXVpcmVkOiBjb25maWcucmVxdWlyZWQsIG1lc3NhZ2U6IGN1ci5wbGFjZWhvbGRlciB9DQogICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShjb25maWcuZGVmYXVsdFZhbHVlKSkgew0KICAgICAgICAgICAgICByZXF1aXJlZC50eXBlID0gJ2FycmF5Jw0KICAgICAgICAgICAgICByZXF1aXJlZC5tZXNzYWdlID0gYOivt+iHs+WwkemAieaLqeS4gOS4qiR7Y29uZmlnLmxhYmVsfWANCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJlcXVpcmVkLm1lc3NhZ2UgPT09IHVuZGVmaW5lZCAmJiAocmVxdWlyZWQubWVzc2FnZSA9IGAke2NvbmZpZy5sYWJlbH3kuI3og73kuLrnqbpgKQ0KICAgICAgICAgICAgY29uZmlnLnJlZ0xpc3QucHVzaChyZXF1aXJlZCkNCiAgICAgICAgICB9DQogICAgICAgICAgcnVsZXNbY3VyLl9fdk1vZGVsX19dID0gY29uZmlnLnJlZ0xpc3QubWFwKGl0ZW0gPT4gew0KICAgICAgICAgICAgaXRlbS5wYXR0ZXJuICYmIChpdGVtLnBhdHRlcm4gPSBldmFsKGl0ZW0ucGF0dGVybikpDQogICAgICAgICAgICBpdGVtLnRyaWdnZXIgPSBydWxlVHJpZ2dlciAmJiBydWxlVHJpZ2dlcltjb25maWcudGFnXQ0KICAgICAgICAgICAgcmV0dXJuIGl0ZW0NCiAgICAgICAgICB9KQ0KICAgICAgICB9DQogICAgICAgIGlmIChjb25maWcuY2hpbGRyZW4pIHRoaXMuYnVpbGRSdWxlcyhjb25maWcuY2hpbGRyZW4sIHJ1bGVzKQ0KICAgICAgfSkNCiAgICB9LA0KICAgIHJlc2V0Rm9ybSgpIHsNCiAgICAgIHRoaXMuZm9ybUNvbmZDb3B5ID0gZGVlcENsb25lKHRoaXMuZm9ybUNvbmYpDQogICAgICB0aGlzLiRyZWZzW3RoaXMuZm9ybUNvbmYuZm9ybVJlZl0ucmVzZXRGaWVsZHMoKQ0KICAgIH0sDQogICAgc3VibWl0Rm9ybSgpIHsNCiAgICAgIHRoaXMuJHJlZnNbdGhpcy5mb3JtQ29uZi5mb3JtUmVmXS52YWxpZGF0ZSh2YWxpZCA9PiB7DQogICAgICAgIGlmICghdmFsaWQpIHJldHVybiBmYWxzZQ0KICAgICAgICAvLyDop6blj5FzdW1pdOS6i+S7tg0KICAgICAgICAvLyB0aGlzLiRlbWl0KCdzdWJtaXQnLCB0aGlzW3RoaXMuZm9ybUNvbmYuZm9ybU1vZGVsXSkNCiAgICAgICAgY29uc3QgcGFyYW1zID0gew0KICAgICAgICAgIGZvcm1EYXRhOiB0aGlzLmZvcm1Db25mQ29weSwNCiAgICAgICAgICB2YWxEYXRhOiB0aGlzW3RoaXMuZm9ybUNvbmYuZm9ybU1vZGVsXQ0KICAgICAgICB9DQogICAgICAgIHRoaXMuJGVtaXQoJ3N1Ym1pdCcsIHBhcmFtcykNCiAgICAgICAgcmV0dXJuIHRydWUNCiAgICAgIH0pDQogICAgfSwNCiAgICAvLyDkvKDlgLznu5nniLbnu4Tku7YNCiAgICBnZXREYXRhKCl7DQogICAgICB0aGlzLiRlbWl0KCdnZXREYXRhJywgdGhpc1t0aGlzLmZvcm1Db25mLmZvcm1Nb2RlbF0pDQogICAgICAvLyB0aGlzLiRlbWl0KCdnZXREYXRhJyx0aGlzLmZvcm1Db25mQ29weSkNCiAgICB9DQogIH0sDQogIHJlbmRlcihoKSB7DQogICAgcmV0dXJuIHJlbmRlckZyb20uY2FsbCh0aGlzLCBoKQ0KICB9DQp9DQo="},{"version":3,"sources":["Parser.vue"],"names":[],"mappings":";AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Parser.vue","sourceRoot":"src/components/parser","sourcesContent":["<script>\r\nimport { deepClone } from '../../utils/index'\r\nimport render from '../render/render.js'\r\n\r\nconst ruleTrigger = {\r\n  'el-input': 'blur',\r\n  'el-input-number': 'blur',\r\n  'el-select': 'change',\r\n  'el-radio-group': 'change',\r\n  'el-checkbox-group': 'change',\r\n  'el-cascader': 'change',\r\n  'el-time-picker': 'change',\r\n  'el-date-picker': 'change',\r\n  'el-rate': 'change'\r\n}\r\n\r\nconst layouts = {\r\n  colFormItem(h, scheme) {\r\n    const config = scheme.__config__\r\n    const listeners = buildListeners.call(this, scheme)\r\n\r\n    let labelWidth = config.labelWidth ? `${config.labelWidth}px` : null\r\n    if (config.showLabel === false) labelWidth = '0'\r\n    return (\r\n      <el-col span={config.span}>\r\n        <el-form-item label-width={labelWidth} prop={scheme.__vModel__}\r\n          label={config.showLabel ? config.label : ''}>\r\n          <render conf={scheme} on={listeners} />\r\n        </el-form-item>\r\n      </el-col>\r\n    )\r\n  },\r\n  rowFormItem(h, scheme) {\r\n    let child = renderChildren.apply(this, arguments)\r\n    if (scheme.type === 'flex') {\r\n      child = <el-row type={scheme.type} justify={scheme.justify} align={scheme.align}>\r\n              {child}\r\n            </el-row>\r\n    }\r\n    return (\r\n      <el-col span={scheme.span}>\r\n        <el-row gutter={scheme.gutter}>\r\n          {child}\r\n        </el-row>\r\n      </el-col>\r\n    )\r\n  }\r\n}\r\n\r\nfunction renderFrom(h) {\r\n  const { formConfCopy } = this\r\n\r\n  return (\r\n    <el-row gutter={formConfCopy.gutter}>\r\n      <el-form\r\n        size={formConfCopy.size}\r\n        label-position={formConfCopy.labelPosition}\r\n        disabled={formConfCopy.disabled}\r\n        label-width={`${formConfCopy.labelWidth}px`}\r\n        ref={formConfCopy.formRef}\r\n        // model不能直接赋值 https://github.com/vuejs/jsx/issues/49#issuecomment-472013664\r\n        props={{ model: this[formConfCopy.formModel] }}\r\n        rules={this[formConfCopy.formRules]}\r\n      >\r\n        {renderFormItem.call(this, h, formConfCopy.fields)}\r\n        {formConfCopy.formBtns && formBtns.call(this, h)}\r\n      </el-form>\r\n    </el-row>\r\n  )\r\n}\r\n\r\nfunction formBtns(h) {\r\n  return <el-col>\r\n    <el-form-item size=\"large\">\r\n      <el-button type=\"primary\" onClick={this.submitForm}>提交</el-button>\r\n      <el-button onClick={this.resetForm}>重置</el-button>\r\n    </el-form-item>\r\n  </el-col>\r\n}\r\n\r\nfunction renderFormItem(h, elementList) {\r\n  if (elementList) {\r\n    return elementList.map(scheme => {\r\n      const config = scheme.__config__\r\n      const layout = layouts[config.layout]\r\n\r\n      if (layout) {\r\n        return layout.call(this, h, scheme)\r\n      }\r\n      throw new Error(`没有与${config.layout}匹配的layout`)\r\n    })\r\n  }\r\n}\r\n\r\nfunction renderChildren(h, scheme) {\r\n  const config = scheme.__config__\r\n  if (!Array.isArray(config.children)) return null\r\n  return renderFormItem.call(this, h, config.children)\r\n}\r\n\r\nfunction setValue(event, config, scheme) {\r\n  this.$set(config, 'defaultValue', event)\r\n  this.$set(this[this.formConf.formModel], scheme.__vModel__, event)\r\n}\r\n\r\nfunction buildListeners(scheme) {\r\n  const config = scheme.__config__;\r\n  const methods = this.formConf.__methods__ || {};\r\n  const listeners = {};\r\n\r\n  // 给__methods__中的方法绑定this和event\r\n  Object.keys(methods).forEach((key) => {\r\n    listeners[key] = (event) => methods[key].call(this, event);\r\n  });\r\n\r\n  // 响应 render.js 中的 vModel $emit('input', val)\r\n  listeners.input = (event) => setValue.call(this, event, config, scheme);\r\n\r\n  // 上传表单元素组件的成功、移除和预览事件\r\n  if (config.tag === \"el-upload\") {\r\n    listeners.upload = (response, file, fileList) =>\r\n      setUpload.call(this, config, scheme, response, file, fileList);\r\n\r\n    listeners.deleteUpload = (file, fileList) =>\r\n      deleteUpload.call(this, config, scheme, file, fileList);\r\n\r\n    listeners.previewUpload = (file, fileList) =>\r\n      window.open(file.url, \"_blank\");\r\n  }\r\n\r\n  return listeners;\r\n}\r\n\r\n//获取上传表单元素组件 上传的文件\r\nfunction setUpload(config, scheme, response, file, fileList) {\r\n  //response: 上传接口返回的数据\r\n  let fileObj = {\r\n    name: response.fileName,\r\n    url: response.url,\r\n    fileType: response.contentType,\r\n  };\r\n  let oldValue = \"\";\r\n  try {\r\n    oldValue = JSON.parse(this[this.formConf.formModel][scheme.__vModel__]);\r\n  } catch (err) {\r\n    console.warn(err);\r\n  }\r\n\r\n  if (oldValue) {\r\n    oldValue.push(fileObj);\r\n  } else {\r\n    oldValue = [fileObj];\r\n  }\r\n\r\n  this.$set(config, \"defaultValue\", JSON.stringify(oldValue));\r\n  this.$set(\r\n    this[this.formConf.formModel],\r\n    scheme.__vModel__,\r\n    JSON.stringify(oldValue)\r\n  );\r\n}\r\n\r\n//获取上传表单元素组件 删除文件后的文件列表\r\nfunction deleteUpload(config, scheme, file, fileList) {\r\n  let oldValue = JSON.parse(this[this.formConf.formModel][scheme.__vModel__]);\r\n\r\n  //file 删除的文件\r\n  //过滤掉删除的文件\r\n  let newValue = oldValue.filter((item) => item.name !== file.name);\r\n  this.$set(config, \"defaultValue\", JSON.stringify(newValue));\r\n  this.$set(\r\n    this[this.formConf.formModel],\r\n    scheme.__vModel__,\r\n    JSON.stringify(newValue)\r\n  );\r\n}\r\n\r\nexport default {\r\n  components: {\r\n    render\r\n  },\r\n  props: {\r\n    formConf: {\r\n      type: Object,\r\n      required: true\r\n    }\r\n  },\r\n  data() {\r\n    const data = {\r\n      formConfCopy: deepClone(this.formConf),\r\n      [this.formConf.formModel]: {},\r\n      [this.formConf.formRules]: {}\r\n    }\r\n    if (data.formConfCopy.fields) {\r\n      this.initFormData(data.formConfCopy.fields, data[this.formConf.formModel])\r\n      this.buildRules(data.formConfCopy.fields, data[this.formConf.formRules])\r\n    }\r\n    return data\r\n  },\r\n  methods: {\r\n    initFormData(componentList, formData) {\r\n      componentList.forEach(cur => {\r\n        const config = cur.__config__\r\n        if (cur.__vModel__) formData[cur.__vModel__] = config.defaultValue\r\n        if (config.children) this.initFormData(config.children, formData)\r\n      })\r\n    },\r\n    buildRules(componentList, rules) {\r\n      componentList.forEach(cur => {\r\n        const config = cur.__config__\r\n        if (Array.isArray(config.regList)) {\r\n          if (config.required) {\r\n            const required = { required: config.required, message: cur.placeholder }\r\n            if (Array.isArray(config.defaultValue)) {\r\n              required.type = 'array'\r\n              required.message = `请至少选择一个${config.label}`\r\n            }\r\n            required.message === undefined && (required.message = `${config.label}不能为空`)\r\n            config.regList.push(required)\r\n          }\r\n          rules[cur.__vModel__] = config.regList.map(item => {\r\n            item.pattern && (item.pattern = eval(item.pattern))\r\n            item.trigger = ruleTrigger && ruleTrigger[config.tag]\r\n            return item\r\n          })\r\n        }\r\n        if (config.children) this.buildRules(config.children, rules)\r\n      })\r\n    },\r\n    resetForm() {\r\n      this.formConfCopy = deepClone(this.formConf)\r\n      this.$refs[this.formConf.formRef].resetFields()\r\n    },\r\n    submitForm() {\r\n      this.$refs[this.formConf.formRef].validate(valid => {\r\n        if (!valid) return false\r\n        // 触发sumit事件\r\n        // this.$emit('submit', this[this.formConf.formModel])\r\n        const params = {\r\n          formData: this.formConfCopy,\r\n          valData: this[this.formConf.formModel]\r\n        }\r\n        this.$emit('submit', params)\r\n        return true\r\n      })\r\n    },\r\n    // 传值给父组件\r\n    getData(){\r\n      this.$emit('getData', this[this.formConf.formModel])\r\n      // this.$emit('getData',this.formConfCopy)\r\n    }\r\n  },\r\n  render(h) {\r\n    return renderFrom.call(this, h)\r\n  }\r\n}\r\n</script>\r\n"]}]}