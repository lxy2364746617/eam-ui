{"remainingRequest":"E:\\visual_code_work_space\\ruoyi-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\visual_code_work_space\\ruoyi-ui\\src\\views\\tool\\build\\DraggableItem.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\visual_code_work_space\\ruoyi-ui\\src\\views\\tool\\build\\DraggableItem.vue","mtime":1693557459693},{"path":"E:\\visual_code_work_space\\ruoyi-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\visual_code_work_space\\ruoyi-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"E:\\visual_code_work_space\\ruoyi-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\visual_code_work_space\\ruoyi-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQppbXBvcnQgZHJhZ2dhYmxlIGZyb20gJ3Z1ZWRyYWdnYWJsZScNCmltcG9ydCByZW5kZXIgZnJvbSAnQC9jb21wb25lbnRzL3JlbmRlci9yZW5kZXInDQoNCmNvbnN0IGNvbXBvbmVudHMgPSB7DQogIGl0ZW1CdG5zKGgsIGN1cnJlbnRJdGVtLCBpbmRleCwgbGlzdCkgew0KICAgIGNvbnN0IHsgY29weUl0ZW0sIGRlbGV0ZUl0ZW0gfSA9IHRoaXMuJGxpc3RlbmVycw0KICAgIHJldHVybiBbDQogICAgICA8c3BhbiBjbGFzcz0iZHJhd2luZy1pdGVtLWNvcHkiIHRpdGxlPSLlpI3liLYiIG9uQ2xpY2s9e2V2ZW50ID0+IHsNCiAgICAgICAgY29weUl0ZW0oY3VycmVudEl0ZW0sIGxpc3QpOyBldmVudC5zdG9wUHJvcGFnYXRpb24oKQ0KICAgICAgfX0+DQogICAgICAgIDxpIGNsYXNzPSJlbC1pY29uLWNvcHktZG9jdW1lbnQiIC8+DQogICAgICA8L3NwYW4+LA0KICAgICAgPHNwYW4gY2xhc3M9ImRyYXdpbmctaXRlbS1kZWxldGUiIHRpdGxlPSLliKDpmaQiIG9uQ2xpY2s9e2V2ZW50ID0+IHsNCiAgICAgICAgZGVsZXRlSXRlbShpbmRleCwgbGlzdCk7IGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpDQogICAgICB9fT4NCiAgICAgICAgPGkgY2xhc3M9ImVsLWljb24tZGVsZXRlIiAvPg0KICAgICAgPC9zcGFuPg0KICAgIF0NCiAgfQ0KfQ0KY29uc3QgbGF5b3V0cyA9IHsNCiAgY29sRm9ybUl0ZW0oaCwgY3VycmVudEl0ZW0sIGluZGV4LCBsaXN0KSB7DQogICAgY29uc3QgeyBhY3RpdmVJdGVtIH0gPSB0aGlzLiRsaXN0ZW5lcnMNCiAgICBjb25zdCBjb25maWcgPSBjdXJyZW50SXRlbS5fX2NvbmZpZ19fDQogICAgY29uc3QgY2hpbGQgPSByZW5kZXJDaGlsZHJlbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpDQogICAgbGV0IGNsYXNzTmFtZSA9IHRoaXMuYWN0aXZlSWQgPT09IGNvbmZpZy5mb3JtSWQgPyAnZHJhd2luZy1pdGVtIGFjdGl2ZS1mcm9tLWl0ZW0nIDogJ2RyYXdpbmctaXRlbScNCiAgICBpZiAodGhpcy5mb3JtQ29uZi51bkZvY3VzZWRDb21wb25lbnRCb3JkZXIpIGNsYXNzTmFtZSArPSAnIHVuZm9jdXMtYm9yZGVyZWQnDQogICAgbGV0IGxhYmVsV2lkdGggPSBjb25maWcubGFiZWxXaWR0aCA/IGAke2NvbmZpZy5sYWJlbFdpZHRofXB4YCA6IG51bGwNCiAgICBpZiAoY29uZmlnLnNob3dMYWJlbCA9PT0gZmFsc2UpIGxhYmVsV2lkdGggPSAnMCcNCiAgICByZXR1cm4gKA0KICAgICAgPGVsLWNvbCBzcGFuPXtjb25maWcuc3Bhbn0gY2xhc3M9e2NsYXNzTmFtZX0NCiAgICAgICAgICAgICAgbmF0aXZlT25DbGljaz17ZXZlbnQgPT4geyBhY3RpdmVJdGVtKGN1cnJlbnRJdGVtKTsgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCkgfX0+DQogICAgICAgIDxlbC1mb3JtLWl0ZW0gbGFiZWwtd2lkdGg9e2xhYmVsV2lkdGh9DQogICAgICAgICAgICAgICAgICAgICAgbGFiZWw9e2NvbmZpZy5zaG93TGFiZWwgPyBjb25maWcubGFiZWwgOiAnJ30gcmVxdWlyZWQ9e2NvbmZpZy5yZXF1aXJlZH0+DQogICAgICAgICAgPHJlbmRlciBrZXk9e2NvbmZpZy5yZW5kZXJLZXl9IGNvbmY9e2N1cnJlbnRJdGVtfSBvbklucHV0PXsgZXZlbnQgPT4gew0KICAgICAgICAgICAgdGhpcy4kc2V0KGNvbmZpZywgJ2RlZmF1bHRWYWx1ZScsIGV2ZW50KQ0KICAgICAgICAgIH19Pg0KICAgICAgICAgICAge2NoaWxkfQ0KICAgICAgICAgIDwvcmVuZGVyPg0KICAgICAgICA8L2VsLWZvcm0taXRlbT4NCiAgICAgICAge2NvbXBvbmVudHMuaXRlbUJ0bnMuYXBwbHkodGhpcywgYXJndW1lbnRzKX0NCiAgICAgIDwvZWwtY29sPg0KICAgICkNCiAgfSwNCiAgcm93Rm9ybUl0ZW0oaCwgY3VycmVudEl0ZW0sIGluZGV4LCBsaXN0KSB7DQogICAgY29uc3QgeyBhY3RpdmVJdGVtIH0gPSB0aGlzLiRsaXN0ZW5lcnMNCiAgICBjb25zdCBjb25maWcgPSBjdXJyZW50SXRlbS5fX2NvbmZpZ19fDQogICAgY29uc3QgY2xhc3NOYW1lID0gdGhpcy5hY3RpdmVJZCA9PT0gY29uZmlnLmZvcm1JZA0KICAgICAgPyAnZHJhd2luZy1yb3ctaXRlbSBhY3RpdmUtZnJvbS1pdGVtJw0KICAgICAgOiAnZHJhd2luZy1yb3ctaXRlbScNCiAgICBsZXQgY2hpbGQgPSByZW5kZXJDaGlsZHJlbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpDQogICAgaWYgKGN1cnJlbnRJdGVtLnR5cGUgPT09ICdmbGV4Jykgew0KICAgICAgY2hpbGQgPSA8ZWwtcm93IHR5cGU9e2N1cnJlbnRJdGVtLnR5cGV9IGp1c3RpZnk9e2N1cnJlbnRJdGVtLmp1c3RpZnl9IGFsaWduPXtjdXJyZW50SXRlbS5hbGlnbn0+DQogICAgICAgIHtjaGlsZH0NCiAgICAgIDwvZWwtcm93Pg0KICAgIH0NCiAgICByZXR1cm4gKA0KICAgICAgPGVsLWNvbCBzcGFuPXtjb25maWcuc3Bhbn0+DQogICAgICAgIDxlbC1yb3cgZ3V0dGVyPXtjb25maWcuZ3V0dGVyfSBjbGFzcz17Y2xhc3NOYW1lfQ0KICAgICAgICAgICAgICAgIG5hdGl2ZU9uQ2xpY2s9e2V2ZW50ID0+IHsgYWN0aXZlSXRlbShjdXJyZW50SXRlbSk7IGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpIH19Pg0KICAgICAgICAgIDxzcGFuIGNsYXNzPSJjb21wb25lbnQtbmFtZSI+e2NvbmZpZy5jb21wb25lbnROYW1lfTwvc3Bhbj4NCiAgICAgICAgICA8ZHJhZ2dhYmxlIGxpc3Q9e2NvbmZpZy5jaGlsZHJlbiB8fCBbXX0gYW5pbWF0aW9uPXszNDB9DQogICAgICAgICAgICAgICAgICAgICBncm91cD0iY29tcG9uZW50c0dyb3VwIiBjbGFzcz0iZHJhZy13cmFwcGVyIj4NCiAgICAgICAgICAgIHtjaGlsZH0NCiAgICAgICAgICA8L2RyYWdnYWJsZT4NCiAgICAgICAgICB7Y29tcG9uZW50cy5pdGVtQnRucy5hcHBseSh0aGlzLCBhcmd1bWVudHMpfQ0KICAgICAgICA8L2VsLXJvdz4NCiAgICAgIDwvZWwtY29sPg0KICAgICkNCiAgfSwNCiAgcmF3KGgsIGN1cnJlbnRJdGVtLCBpbmRleCwgbGlzdCkgew0KICAgIGNvbnN0IGNvbmZpZyA9IGN1cnJlbnRJdGVtLl9fY29uZmlnX18NCiAgICBjb25zdCBjaGlsZCA9IHJlbmRlckNoaWxkcmVuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykNCiAgICByZXR1cm4gPHJlbmRlciBrZXk9e2NvbmZpZy5yZW5kZXJLZXl9IGNvbmY9e2N1cnJlbnRJdGVtfSBvbklucHV0PXsgZXZlbnQgPT4gew0KICAgICAgdGhpcy4kc2V0KGNvbmZpZywgJ2RlZmF1bHRWYWx1ZScsIGV2ZW50KQ0KICAgIH19Pg0KICAgICAge2NoaWxkfQ0KICAgIDwvcmVuZGVyPg0KICB9DQp9DQoNCmZ1bmN0aW9uIHJlbmRlckNoaWxkcmVuKGgsIGN1cnJlbnRJdGVtLCBpbmRleCwgbGlzdCkgew0KICBjb25zdCBjb25maWcgPSBjdXJyZW50SXRlbS5fX2NvbmZpZ19fDQogIGlmICghQXJyYXkuaXNBcnJheShjb25maWcuY2hpbGRyZW4pKSByZXR1cm4gbnVsbA0KICByZXR1cm4gY29uZmlnLmNoaWxkcmVuLm1hcCgoZWwsIGkpID0+IHsNCiAgICBjb25zdCBsYXlvdXQgPSBsYXlvdXRzW2VsLl9fY29uZmlnX18ubGF5b3V0XQ0KICAgIGlmIChsYXlvdXQpIHsNCiAgICAgIHJldHVybiBsYXlvdXQuY2FsbCh0aGlzLCBoLCBlbCwgaSwgY29uZmlnLmNoaWxkcmVuKQ0KICAgIH0NCiAgICByZXR1cm4gbGF5b3V0SXNOb3RGb3VuZC5jYWxsKHRoaXMpDQogIH0pDQp9DQoNCmZ1bmN0aW9uIGxheW91dElzTm90Rm91bmQoKSB7DQogIHRocm93IG5ldyBFcnJvcihg5rKh5pyJ5LiOJHt0aGlzLmN1cnJlbnRJdGVtLl9fY29uZmlnX18ubGF5b3V0feWMuemFjeeahGxheW91dGApDQp9DQoNCmV4cG9ydCBkZWZhdWx0IHsNCiAgY29tcG9uZW50czogew0KICAgIHJlbmRlciwNCiAgICBkcmFnZ2FibGUNCiAgfSwNCiAgcHJvcHM6IFsNCiAgICAnY3VycmVudEl0ZW0nLA0KICAgICdpbmRleCcsDQogICAgJ2RyYXdpbmdMaXN0JywNCiAgICAnYWN0aXZlSWQnLA0KICAgICdmb3JtQ29uZicNCiAgXSwNCiAgcmVuZGVyKGgpIHsNCiAgICBjb25zdCBsYXlvdXQgPSBsYXlvdXRzW3RoaXMuY3VycmVudEl0ZW0uX19jb25maWdfXy5sYXlvdXRdDQoNCiAgICBpZiAobGF5b3V0KSB7DQogICAgICByZXR1cm4gbGF5b3V0LmNhbGwodGhpcywgaCwgdGhpcy5jdXJyZW50SXRlbSwgdGhpcy5pbmRleCwgdGhpcy5kcmF3aW5nTGlzdCkNCiAgICB9DQogICAgcmV0dXJuIGxheW91dElzTm90Rm91bmQuY2FsbCh0aGlzKQ0KICB9DQp9DQo="},{"version":3,"sources":["DraggableItem.vue"],"names":[],"mappings":";AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"DraggableItem.vue","sourceRoot":"src/views/tool/build","sourcesContent":["<script>\r\nimport draggable from 'vuedraggable'\r\nimport render from '@/components/render/render'\r\n\r\nconst components = {\r\n  itemBtns(h, currentItem, index, list) {\r\n    const { copyItem, deleteItem } = this.$listeners\r\n    return [\r\n      <span class=\"drawing-item-copy\" title=\"复制\" onClick={event => {\r\n        copyItem(currentItem, list); event.stopPropagation()\r\n      }}>\r\n        <i class=\"el-icon-copy-document\" />\r\n      </span>,\r\n      <span class=\"drawing-item-delete\" title=\"删除\" onClick={event => {\r\n        deleteItem(index, list); event.stopPropagation()\r\n      }}>\r\n        <i class=\"el-icon-delete\" />\r\n      </span>\r\n    ]\r\n  }\r\n}\r\nconst layouts = {\r\n  colFormItem(h, currentItem, index, list) {\r\n    const { activeItem } = this.$listeners\r\n    const config = currentItem.__config__\r\n    const child = renderChildren.apply(this, arguments)\r\n    let className = this.activeId === config.formId ? 'drawing-item active-from-item' : 'drawing-item'\r\n    if (this.formConf.unFocusedComponentBorder) className += ' unfocus-bordered'\r\n    let labelWidth = config.labelWidth ? `${config.labelWidth}px` : null\r\n    if (config.showLabel === false) labelWidth = '0'\r\n    return (\r\n      <el-col span={config.span} class={className}\r\n              nativeOnClick={event => { activeItem(currentItem); event.stopPropagation() }}>\r\n        <el-form-item label-width={labelWidth}\r\n                      label={config.showLabel ? config.label : ''} required={config.required}>\r\n          <render key={config.renderKey} conf={currentItem} onInput={ event => {\r\n            this.$set(config, 'defaultValue', event)\r\n          }}>\r\n            {child}\r\n          </render>\r\n        </el-form-item>\r\n        {components.itemBtns.apply(this, arguments)}\r\n      </el-col>\r\n    )\r\n  },\r\n  rowFormItem(h, currentItem, index, list) {\r\n    const { activeItem } = this.$listeners\r\n    const config = currentItem.__config__\r\n    const className = this.activeId === config.formId\r\n      ? 'drawing-row-item active-from-item'\r\n      : 'drawing-row-item'\r\n    let child = renderChildren.apply(this, arguments)\r\n    if (currentItem.type === 'flex') {\r\n      child = <el-row type={currentItem.type} justify={currentItem.justify} align={currentItem.align}>\r\n        {child}\r\n      </el-row>\r\n    }\r\n    return (\r\n      <el-col span={config.span}>\r\n        <el-row gutter={config.gutter} class={className}\r\n                nativeOnClick={event => { activeItem(currentItem); event.stopPropagation() }}>\r\n          <span class=\"component-name\">{config.componentName}</span>\r\n          <draggable list={config.children || []} animation={340}\r\n                     group=\"componentsGroup\" class=\"drag-wrapper\">\r\n            {child}\r\n          </draggable>\r\n          {components.itemBtns.apply(this, arguments)}\r\n        </el-row>\r\n      </el-col>\r\n    )\r\n  },\r\n  raw(h, currentItem, index, list) {\r\n    const config = currentItem.__config__\r\n    const child = renderChildren.apply(this, arguments)\r\n    return <render key={config.renderKey} conf={currentItem} onInput={ event => {\r\n      this.$set(config, 'defaultValue', event)\r\n    }}>\r\n      {child}\r\n    </render>\r\n  }\r\n}\r\n\r\nfunction renderChildren(h, currentItem, index, list) {\r\n  const config = currentItem.__config__\r\n  if (!Array.isArray(config.children)) return null\r\n  return config.children.map((el, i) => {\r\n    const layout = layouts[el.__config__.layout]\r\n    if (layout) {\r\n      return layout.call(this, h, el, i, config.children)\r\n    }\r\n    return layoutIsNotFound.call(this)\r\n  })\r\n}\r\n\r\nfunction layoutIsNotFound() {\r\n  throw new Error(`没有与${this.currentItem.__config__.layout}匹配的layout`)\r\n}\r\n\r\nexport default {\r\n  components: {\r\n    render,\r\n    draggable\r\n  },\r\n  props: [\r\n    'currentItem',\r\n    'index',\r\n    'drawingList',\r\n    'activeId',\r\n    'formConf'\r\n  ],\r\n  render(h) {\r\n    const layout = layouts[this.currentItem.__config__.layout]\r\n\r\n    if (layout) {\r\n      return layout.call(this, h, this.currentItem, this.index, this.drawingList)\r\n    }\r\n    return layoutIsNotFound.call(this)\r\n  }\r\n}\r\n</script>\r\n"]}]}