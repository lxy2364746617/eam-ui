{"remainingRequest":"E:\\qrhpro\\cms-eam-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\qrhpro\\cms-eam-ui\\src\\views\\tool\\build\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\qrhpro\\cms-eam-ui\\src\\views\\tool\\build\\index.vue","mtime":1693791860679},{"path":"E:\\qrhpro\\cms-eam-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1693791616229},{"path":"E:\\qrhpro\\cms-eam-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":1693791596985},{"path":"E:\\qrhpro\\cms-eam-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1693791616229},{"path":"E:\\qrhpro\\cms-eam-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":1693791844037}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgZHJhZ2dhYmxlIGZyb20gJ3Z1ZWRyYWdnYWJsZScNCmltcG9ydCB7IGRlYm91bmNlIH0gZnJvbSAndGhyb3R0bGUtZGVib3VuY2UnDQppbXBvcnQgeyBzYXZlQXMgfSBmcm9tICdmaWxlLXNhdmVyJw0KaW1wb3J0IENsaXBib2FyZEpTIGZyb20gJ2NsaXBib2FyZCcNCmltcG9ydCByZW5kZXIgZnJvbSAnQC9jb21wb25lbnRzL3JlbmRlci9yZW5kZXInDQppbXBvcnQgRm9ybURyYXdlciBmcm9tICcuL0Zvcm1EcmF3ZXInDQppbXBvcnQgSnNvbkRyYXdlciBmcm9tICcuL0pzb25EcmF3ZXInDQppbXBvcnQgUmlnaHRQYW5lbCBmcm9tICcuL1JpZ2h0UGFuZWwnDQppbXBvcnQgew0KICBpbnB1dENvbXBvbmVudHMsIHNlbGVjdENvbXBvbmVudHMsIGxheW91dENvbXBvbmVudHMsIGZvcm1Db25mDQp9IGZyb20gJ0AvdXRpbHMvZ2VuZXJhdG9yL2NvbmZpZycNCmltcG9ydCB7DQogIGV4cG9ydERlZmF1bHQsIGJlYXV0aWZpZXJDb25mLCBpc051bWJlclN0ciwgdGl0bGVDYXNlLCBkZWVwQ2xvbmUsIGlzT2JqZWN0T2JqZWN0DQp9IGZyb20gJ0AvdXRpbHMvaW5kZXgnDQppbXBvcnQgew0KICBtYWtlVXBIdG1sLCB2dWVUZW1wbGF0ZSwgdnVlU2NyaXB0LCBjc3NTdHlsZQ0KfSBmcm9tICdAL3V0aWxzL2dlbmVyYXRvci9odG1sJw0KaW1wb3J0IHsgbWFrZVVwSnMgfSBmcm9tICdAL3V0aWxzL2dlbmVyYXRvci9qcycNCmltcG9ydCB7IG1ha2VVcENzcyB9IGZyb20gJ0AvdXRpbHMvZ2VuZXJhdG9yL2NzcycNCmltcG9ydCBkcmF3aW5nRGVmYXVsdCBmcm9tICdAL3V0aWxzL2dlbmVyYXRvci9kcmF3aW5nRGVmYWx1dCcNCmltcG9ydCBsb2dvIGZyb20gJ0AvYXNzZXRzL2xvZ28vbG9nby5wbmcnDQppbXBvcnQgQ29kZVR5cGVEaWFsb2cgZnJvbSAnLi9Db2RlVHlwZURpYWxvZycNCmltcG9ydCBEcmFnZ2FibGVJdGVtIGZyb20gJy4vRHJhZ2dhYmxlSXRlbScNCmltcG9ydCB7DQogIGdldERyYXdpbmdMaXN0LCBzYXZlRHJhd2luZ0xpc3QsIGdldElkR2xvYmFsLCBzYXZlSWRHbG9iYWwsIGdldEZvcm1Db25mDQp9IGZyb20gJ0AvdXRpbHMvZGInDQppbXBvcnQgbG9hZEJlYXV0aWZpZXIgZnJvbSAnQC91dGlscy9sb2FkQmVhdXRpZmllcicNCmltcG9ydCB7Z2V0Rm9ybSwgYWRkRm9ybSwgdXBkYXRlRm9ybX0gZnJvbSAiQC9hcGkvZmxvd2FibGUvZm9ybSI7DQoNCmxldCBiZWF1dGlmaWVyDQpjb25zdCBlbXB0eUFjdGl2ZURhdGEgPSB7IHN0eWxlOiB7fSwgYXV0b3NpemU6IHt9IH0NCmxldCBvbGRBY3RpdmVJZA0KbGV0IHRlbXBBY3RpdmVEYXRhDQpjb25zdCBkcmF3aW5nTGlzdEluREIgPSBnZXREcmF3aW5nTGlzdCgpDQpjb25zdCBmb3JtQ29uZkluREIgPSBnZXRGb3JtQ29uZigpDQpjb25zdCBpZEdsb2JhbCA9IGdldElkR2xvYmFsKCkNCg0KZXhwb3J0IGRlZmF1bHQgew0KICBjb21wb25lbnRzOiB7DQogICAgZHJhZ2dhYmxlLA0KICAgIHJlbmRlciwNCiAgICBGb3JtRHJhd2VyLA0KICAgIEpzb25EcmF3ZXIsDQogICAgUmlnaHRQYW5lbCwNCiAgICBDb2RlVHlwZURpYWxvZywNCiAgICBEcmFnZ2FibGVJdGVtDQogIH0sDQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIGxvZ28sDQogICAgICBpZEdsb2JhbCwNCiAgICAgIGZvcm1Db25mLA0KICAgICAgaW5wdXRDb21wb25lbnRzLA0KICAgICAgc2VsZWN0Q29tcG9uZW50cywNCiAgICAgIGxheW91dENvbXBvbmVudHMsDQogICAgICBsYWJlbFdpZHRoOiAxMDAsDQogICAgICBkcmF3aW5nTGlzdDogZHJhd2luZ0RlZmF1bHQsDQogICAgICBkcmF3aW5nRGF0YToge30sDQogICAgICBhY3RpdmVJZDogZHJhd2luZ0RlZmF1bHRbMF0uZm9ybUlkLA0KICAgICAgZHJhd2VyVmlzaWJsZTogZmFsc2UsDQogICAgICBmb3JtRGF0YToge30sDQogICAgICBkaWFsb2dWaXNpYmxlOiBmYWxzZSwNCiAgICAgIGpzb25EcmF3ZXJWaXNpYmxlOiBmYWxzZSwNCiAgICAgIGdlbmVyYXRlQ29uZjogbnVsbCwNCiAgICAgIHNob3dGaWxlTmFtZTogZmFsc2UsDQogICAgICBhY3RpdmVEYXRhOiBkcmF3aW5nRGVmYXVsdFswXSwNCiAgICAgIHNhdmVEcmF3aW5nTGlzdERlYm91bmNlOiBkZWJvdW5jZSgzNDAsIHNhdmVEcmF3aW5nTGlzdCksDQogICAgICBzYXZlSWRHbG9iYWxEZWJvdW5jZTogZGVib3VuY2UoMzQwLCBzYXZlSWRHbG9iYWwpLA0KICAgICAgbGVmdENvbXBvbmVudHM6IFsNCiAgICAgICAgew0KICAgICAgICAgIHRpdGxlOiAn6L6T5YWl5Z6L57uE5Lu2JywNCiAgICAgICAgICBsaXN0OiBpbnB1dENvbXBvbmVudHMNCiAgICAgICAgfSwNCiAgICAgICAgew0KICAgICAgICAgIHRpdGxlOiAn6YCJ5oup5Z6L57uE5Lu2JywNCiAgICAgICAgICBsaXN0OiBzZWxlY3RDb21wb25lbnRzDQogICAgICAgIH0sDQogICAgICAgIHsNCiAgICAgICAgICB0aXRsZTogJ+W4g+WxgOWei+e7hOS7ticsDQogICAgICAgICAgbGlzdDogbGF5b3V0Q29tcG9uZW50cw0KICAgICAgICB9DQogICAgICBdLA0KICAgICAgZm9ybU9wZW46IGZhbHNlLA0KICAgICAgZm9ybVRpdGxlOiAiIiwNCiAgICAgIC8vIOihqOWNleWPguaVsA0KICAgICAgZm9ybTogew0KICAgICAgICBmb3JtSWQ6IG51bGwsDQogICAgICAgIGZvcm1OYW1lOiBudWxsLA0KICAgICAgICBmb3JtQ29udGVudDogbnVsbCwNCiAgICAgICAgcmVtYXJrOiBudWxsDQogICAgICB9LA0KICAgICAgLy8g6KGo5Y2V5qCh6aqMDQogICAgICBydWxlczoge30NCiAgICB9DQogIH0sDQogIGNvbXB1dGVkOiB7DQogIH0sDQogIHdhdGNoOiB7DQogICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGZ1bmMtbmFtZXMNCiAgICAnYWN0aXZlRGF0YS5fX2NvbmZpZ19fLmxhYmVsJzogZnVuY3Rpb24gKHZhbCwgb2xkVmFsKSB7DQogICAgICBpZiAoDQogICAgICAgIHRoaXMuYWN0aXZlRGF0YS5wbGFjZWhvbGRlciA9PT0gdW5kZWZpbmVkDQogICAgICAgIHx8ICF0aGlzLmFjdGl2ZURhdGEuX19jb25maWdfXy50YWcNCiAgICAgICAgfHwgb2xkQWN0aXZlSWQgIT09IHRoaXMuYWN0aXZlSWQNCiAgICAgICkgew0KICAgICAgICByZXR1cm4NCiAgICAgIH0NCiAgICAgIHRoaXMuYWN0aXZlRGF0YS5wbGFjZWhvbGRlciA9IHRoaXMuYWN0aXZlRGF0YS5wbGFjZWhvbGRlci5yZXBsYWNlKG9sZFZhbCwgJycpICsgdmFsDQogICAgfSwNCiAgICBhY3RpdmVJZDogew0KICAgICAgaGFuZGxlcih2YWwpIHsNCiAgICAgICAgb2xkQWN0aXZlSWQgPSB2YWwNCiAgICAgIH0sDQogICAgICBpbW1lZGlhdGU6IHRydWUNCiAgICB9LA0KICAgIGRyYXdpbmdMaXN0OiB7DQogICAgICBoYW5kbGVyKHZhbCkgew0KICAgICAgICB0aGlzLnNhdmVEcmF3aW5nTGlzdERlYm91bmNlKHZhbCkNCiAgICAgICAgaWYgKHZhbC5sZW5ndGggPT09IDApIHRoaXMuaWRHbG9iYWwgPSAxMDANCiAgICAgIH0sDQogICAgICBkZWVwOiB0cnVlDQogICAgfSwNCiAgICBpZEdsb2JhbDogew0KICAgICAgaGFuZGxlcih2YWwpIHsNCiAgICAgICAgdGhpcy5zYXZlSWRHbG9iYWxEZWJvdW5jZSh2YWwpDQogICAgICB9LA0KICAgICAgaW1tZWRpYXRlOiB0cnVlDQogICAgfQ0KICB9LA0KDQogIG1vdW50ZWQoKSB7DQogICAgY29uc3QgdGhhdCA9IHRoaXM7DQogICAgaWYgKEFycmF5LmlzQXJyYXkoZHJhd2luZ0xpc3RJbkRCKSAmJiBkcmF3aW5nTGlzdEluREIubGVuZ3RoID4gMCkgew0KICAgICAgdGhhdC5kcmF3aW5nTGlzdCA9IGRyYXdpbmdMaXN0SW5EQg0KICAgIH0gZWxzZSB7DQogICAgICB0aGF0LmRyYXdpbmdMaXN0ID0gZHJhd2luZ0RlZmF1bHQNCiAgICB9DQogICAgdGhpcy5hY3RpdmVGb3JtSXRlbSh0aGF0LmRyYXdpbmdMaXN0WzBdKQ0KICAgIHRoYXQuZHJhd2luZ0xpc3QgPSBbXTsNCiAgICBjb25zdCBmb3JtSWQgPSAgdGhhdC4kcm91dGUucXVlcnkgJiYgdGhhdC4kcm91dGUucXVlcnkuZm9ybUlkOw0KICAgIGlmIChmb3JtSWQpIHsNCiAgICAgIGdldEZvcm0oZm9ybUlkKS50aGVuKHJlcyA9PnsNCiAgICAgICAgdGhhdC5mb3JtQ29uZiA9IEpTT04ucGFyc2UocmVzLmRhdGEuZm9ybUNvbnRlbnQpOw0KICAgICAgICB0aGF0LmRyYXdpbmdMaXN0ID0gdGhhdC5mb3JtQ29uZi5maWVsZHM7DQogICAgICAgIHRoYXQuZm9ybSA9IHJlcy5kYXRhOw0KICAgICAgfSkNCiAgICB9ZWxzZSB7DQogICAgICAvLyDliJ3lp4vljJbooajljZXorr7orqHlmagNCiAgICAgIC8vIHRoYXQuZm9ybUNvbmYgPSB7fTsNCiAgICAgIGlmIChmb3JtQ29uZkluREIpIHsNCiAgICAgICAgdGhhdC5mb3JtQ29uZiA9IGZvcm1Db25mSW5EQg0KICAgICAgfQ0KICAgIH0NCiAgICBsb2FkQmVhdXRpZmllcihidGYgPT4gew0KICAgICAgYmVhdXRpZmllciA9IGJ0Zg0KICAgIH0pDQogICAgY29uc3QgY2xpcGJvYXJkID0gbmV3IENsaXBib2FyZEpTKCcjY29weU5vZGUnLCB7DQogICAgICB0ZXh0OiB0cmlnZ2VyID0+IHsNCiAgICAgICAgY29uc3QgY29kZVN0ciA9IHRoaXMuZ2VuZXJhdGVDb2RlKCkNCiAgICAgICAgdGhpcy4kbm90aWZ5KHsNCiAgICAgICAgICB0aXRsZTogJ+aIkOWKnycsDQogICAgICAgICAgbWVzc2FnZTogJ+S7o+eggeW3suWkjeWItuWIsOWJquWIh+adv++8jOWPr+eymOi0tOOAgicsDQogICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnDQogICAgICAgIH0pDQogICAgICAgIHJldHVybiBjb2RlU3RyDQogICAgICB9DQogICAgfSkNCiAgICBjbGlwYm9hcmQub24oJ2Vycm9yJywgZSA9PiB7DQogICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfku6PnoIHlpI3liLblpLHotKUnKQ0KICAgIH0pDQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICBzZXRPYmplY3RWYWx1ZVJlZHVjZShvYmosIHN0cktleXMsIGRhdGEpIHsNCiAgICAgIGNvbnN0IGFyciA9IHN0cktleXMuc3BsaXQoJy4nKQ0KICAgICAgYXJyLnJlZHVjZSgocHJlLCBpdGVtLCBpKSA9PiB7DQogICAgICAgIGlmIChhcnIubGVuZ3RoID09PSBpICsgMSkgew0KICAgICAgICAgIHByZVtpdGVtXSA9IGRhdGENCiAgICAgICAgfSBlbHNlIGlmICghaXNPYmplY3RPYmplY3QocHJlW2l0ZW1dKSkgew0KICAgICAgICAgIHByZVtpdGVtXSA9IHt9DQogICAgICAgIH0NCiAgICAgICAgcmV0dXJuIHByZVtpdGVtXQ0KICAgICAgfSwgb2JqKQ0KICAgIH0sDQogICAgc2V0UmVzcERhdGEoY29tcG9uZW50LCByZXNwKSB7DQogICAgICBjb25zdCB7IGRhdGFQYXRoLCByZW5kZXJLZXksIGRhdGFDb25zdW1lciB9ID0gY29tcG9uZW50Ll9fY29uZmlnX18NCiAgICAgIGlmICghZGF0YVBhdGggfHwgIWRhdGFDb25zdW1lcikgcmV0dXJuDQogICAgICBjb25zdCByZXNwRGF0YSA9IGRhdGFQYXRoLnNwbGl0KCcuJykucmVkdWNlKChwcmUsIGl0ZW0pID0+IHByZVtpdGVtXSwgcmVzcCkNCg0KICAgICAgLy8g5bCG6K+35rGC5Zue5p2l55qE5pWw5o2u77yM6LWL5YC85Yiw5oyH5a6a5bGe5oCn44CCDQogICAgICAvLyDku6VlbC10YWJlbOS4uuS+i++8jOagueaNrkVsZW1lbnTmlofmoaPvvIzlupTor6XlsIbmlbDmja7otYvlgLznu5llbC10YWJlbOeahGRhdGHlsZ7mgKfvvIzmiYDku6VkYXRhQ29uc3VtZXLnmoTlgLzlupTkuLonZGF0YSc7DQogICAgICAvLyDmraTml7botYvlgLzku6PnoIHlj6/lhpnmiJAgY29tcG9uZW50W2RhdGFDb25zdW1lcl0gPSByZXNwRGF0Ye+8mw0KICAgICAgLy8g5L2G5Li65pSv5oyB5pu05rex5bGC57qn55qE6LWL5YC877yI5aaC77yaZGF0YUNvbnN1bWVy55qE5YC85Li6J29wdGlvbnMuZGF0YSfvvIks5L2/55Soc2V0T2JqZWN0VmFsdWVSZWR1Y2UNCiAgICAgIHRoaXMuc2V0T2JqZWN0VmFsdWVSZWR1Y2UoY29tcG9uZW50LCBkYXRhQ29uc3VtZXIsIHJlc3BEYXRhKQ0KICAgICAgY29uc3QgaSA9IHRoaXMuZHJhd2luZ0xpc3QuZmluZEluZGV4KGl0ZW0gPT4gaXRlbS5fX2NvbmZpZ19fLnJlbmRlcktleSA9PT0gcmVuZGVyS2V5KQ0KICAgICAgaWYgKGkgPiAtMSkgdGhpcy4kc2V0KHRoaXMuZHJhd2luZ0xpc3QsIGksIGNvbXBvbmVudCkNCiAgICB9LA0KICAgIGZldGNoRGF0YShjb21wb25lbnQpIHsNCiAgICAgIGNvbnN0IHsgZGF0YVR5cGUsIG1ldGhvZCwgdXJsIH0gPSBjb21wb25lbnQuX19jb25maWdfXw0KICAgICAgaWYgKGRhdGFUeXBlID09PSAnZHluYW1pYycgJiYgbWV0aG9kICYmIHVybCkgew0KICAgICAgICB0aGlzLnNldExvYWRpbmcoY29tcG9uZW50LCB0cnVlKQ0KICAgICAgICB0aGlzLiRheGlvcyh7DQogICAgICAgICAgbWV0aG9kLA0KICAgICAgICAgIHVybA0KICAgICAgICB9KS50aGVuKHJlc3AgPT4gew0KICAgICAgICAgIHRoaXMuc2V0TG9hZGluZyhjb21wb25lbnQsIGZhbHNlKQ0KICAgICAgICAgIHRoaXMuc2V0UmVzcERhdGEoY29tcG9uZW50LCByZXNwLmRhdGEpDQogICAgICAgIH0pDQogICAgICB9DQogICAgfSwNCiAgICBzZXRMb2FkaW5nKGNvbXBvbmVudCwgdmFsKSB7DQogICAgICBjb25zdCB7IGRpcmVjdGl2ZXMgfSA9IGNvbXBvbmVudA0KICAgICAgaWYgKEFycmF5LmlzQXJyYXkoZGlyZWN0aXZlcykpIHsNCiAgICAgICAgY29uc3QgdCA9IGRpcmVjdGl2ZXMuZmluZChkID0+IGQubmFtZSA9PT0gJ2xvYWRpbmcnKQ0KICAgICAgICBpZiAodCkgdC52YWx1ZSA9IHZhbA0KICAgICAgfQ0KICAgIH0sDQogICAgYWN0aXZlRm9ybUl0ZW0oY3VycmVudEl0ZW0pIHsNCiAgICAgIHRoaXMuYWN0aXZlRGF0YSA9IGN1cnJlbnRJdGVtDQogICAgICB0aGlzLmFjdGl2ZUlkID0gY3VycmVudEl0ZW0uX19jb25maWdfXy5mb3JtSWQNCiAgICB9LA0KICAgIG9uRW5kKG9iaikgew0KICAgICAgaWYgKG9iai5mcm9tICE9PSBvYmoudG8pIHsNCiAgICAgICAgdGhpcy5mZXRjaERhdGEodGVtcEFjdGl2ZURhdGEpDQogICAgICAgIHRoaXMuYWN0aXZlRGF0YSA9IHRlbXBBY3RpdmVEYXRhDQogICAgICAgIHRoaXMuYWN0aXZlSWQgPSB0aGlzLmlkR2xvYmFsDQogICAgICB9DQogICAgfSwNCiAgICBhZGRDb21wb25lbnQoaXRlbSkgew0KICAgICAgY29uc3QgY2xvbmUgPSB0aGlzLmNsb25lQ29tcG9uZW50KGl0ZW0pDQogICAgICB0aGlzLmZldGNoRGF0YShjbG9uZSkNCiAgICAgIHRoaXMuZHJhd2luZ0xpc3QucHVzaChjbG9uZSkNCiAgICAgIHRoaXMuYWN0aXZlRm9ybUl0ZW0oY2xvbmUpDQogICAgfSwNCiAgICBjbG9uZUNvbXBvbmVudChvcmlnaW4pIHsNCiAgICAgIGNvbnN0IGNsb25lID0gZGVlcENsb25lKG9yaWdpbikNCiAgICAgIGNvbnN0IGNvbmZpZyA9IGNsb25lLl9fY29uZmlnX18NCiAgICAgIGNvbmZpZy5zcGFuID0gdGhpcy5mb3JtQ29uZi5zcGFuIC8vIOeUn+aIkOS7o+eggeaXtu+8jOS8muagueaNrnNwYW7lgZrnsr7nroDliKTmlq0NCiAgICAgIHRoaXMuY3JlYXRlSWRBbmRLZXkoY2xvbmUpDQogICAgICBjbG9uZS5wbGFjZWhvbGRlciAhPT0gdW5kZWZpbmVkICYmIChjbG9uZS5wbGFjZWhvbGRlciArPSBjb25maWcubGFiZWwpDQogICAgICB0ZW1wQWN0aXZlRGF0YSA9IGNsb25lDQogICAgICByZXR1cm4gdGVtcEFjdGl2ZURhdGENCiAgICB9LA0KICAgIGNyZWF0ZUlkQW5kS2V5KGl0ZW0pIHsNCiAgICAgIGNvbnN0IGNvbmZpZyA9IGl0ZW0uX19jb25maWdfXw0KICAgICAgY29uZmlnLmZvcm1JZCA9ICsrdGhpcy5pZEdsb2JhbA0KICAgICAgY29uZmlnLnJlbmRlcktleSA9IGAke2NvbmZpZy5mb3JtSWR9JHsrbmV3IERhdGUoKX1gIC8vIOaUueWPmHJlbmRlcktleeWQjuWPr+S7peWunueOsOW8uuWItuabtOaWsOe7hOS7tg0KICAgICAgaWYgKGNvbmZpZy5sYXlvdXQgPT09ICdjb2xGb3JtSXRlbScpIHsNCiAgICAgICAgaXRlbS5fX3ZNb2RlbF9fID0gYGZpZWxkJHt0aGlzLmlkR2xvYmFsfWANCiAgICAgIH0gZWxzZSBpZiAoY29uZmlnLmxheW91dCA9PT0gJ3Jvd0Zvcm1JdGVtJykgew0KICAgICAgICBjb25maWcuY29tcG9uZW50TmFtZSA9IGByb3cke3RoaXMuaWRHbG9iYWx9YA0KICAgICAgICAhQXJyYXkuaXNBcnJheShjb25maWcuY2hpbGRyZW4pICYmIChjb25maWcuY2hpbGRyZW4gPSBbXSkNCiAgICAgICAgZGVsZXRlIGNvbmZpZy5sYWJlbCAvLyByb3dGb3JtSXRlbeaXoOmcgOmFjee9rmxhYmVs5bGe5oCnDQogICAgICB9DQogICAgICBpZiAoQXJyYXkuaXNBcnJheShjb25maWcuY2hpbGRyZW4pKSB7DQogICAgICAgIGNvbmZpZy5jaGlsZHJlbiA9IGNvbmZpZy5jaGlsZHJlbi5tYXAoY2hpbGRJdGVtID0+IHRoaXMuY3JlYXRlSWRBbmRLZXkoY2hpbGRJdGVtKSkNCiAgICAgIH0NCiAgICAgIHJldHVybiBpdGVtDQogICAgfSwNCiAgICBBc3NlbWJsZUZvcm1EYXRhKCkgew0KICAgICAgdGhpcy5mb3JtRGF0YSA9IHsNCiAgICAgICAgLi4udGhpcy5mb3JtQ29uZg0KICAgICAgfQ0KICAgICAgdGhpcy5mb3JtRGF0YS5maWVsZHMgPSBkZWVwQ2xvbmUodGhpcy5kcmF3aW5nTGlzdCk7DQogICAgfSwNCiAgICBnZW5lcmF0ZShkYXRhKSB7DQogICAgICBjb25zdCBmdW5jID0gdGhpc1tgZXhlYyR7dGl0bGVDYXNlKHRoaXMub3BlcmF0aW9uVHlwZSl9YF0NCiAgICAgIHRoaXMuZ2VuZXJhdGVDb25mID0gZGF0YQ0KICAgICAgZnVuYyAmJiBmdW5jKGRhdGEpDQogICAgfSwNCiAgICBleGVjUnVuKGRhdGEpIHsNCiAgICAgIHRoaXMuQXNzZW1ibGVGb3JtRGF0YSgpDQogICAgICB0aGlzLmRyYXdlclZpc2libGUgPSB0cnVlDQogICAgfSwNCiAgICBleGVjRG93bmxvYWQoZGF0YSkgew0KICAgICAgY29uc3QgY29kZVN0ciA9IHRoaXMuZ2VuZXJhdGVDb2RlKCkNCiAgICAgIGNvbnN0IGJsb2IgPSBuZXcgQmxvYihbY29kZVN0cl0sIHsgdHlwZTogJ3RleHQvcGxhaW47Y2hhcnNldD11dGYtOCcgfSkNCiAgICAgIHNhdmVBcyhibG9iLCBkYXRhLmZpbGVOYW1lKQ0KICAgIH0sDQogICAgZXhlY0NvcHkoZGF0YSkgew0KICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvcHlOb2RlJykuY2xpY2soKQ0KICAgIH0sDQogICAgZW1wdHkoKSB7DQogICAgICB0aGlzLiRjb25maXJtKCfnoa7lrpropoHmuIXnqbrmiYDmnInnu4Tku7blkJfvvJ8nLCAn5o+Q56S6JywgeyB0eXBlOiAnd2FybmluZycgfSkudGhlbigNCiAgICAgICAgKCkgPT4gew0KICAgICAgICAgIHRoaXMuZHJhd2luZ0xpc3QgPSBbXQ0KICAgICAgICAgIHRoaXMuaWRHbG9iYWwgPSAxMDANCiAgICAgICAgfQ0KICAgICAgKQ0KICAgIH0sDQogICAgZHJhd2luZ0l0ZW1Db3B5KGl0ZW0sIGxpc3QpIHsNCiAgICAgIGxldCBjbG9uZSA9IGRlZXBDbG9uZShpdGVtKQ0KICAgICAgY2xvbmUgPSB0aGlzLmNyZWF0ZUlkQW5kS2V5KGNsb25lKQ0KICAgICAgbGlzdC5wdXNoKGNsb25lKQ0KICAgICAgdGhpcy5hY3RpdmVGb3JtSXRlbShjbG9uZSkNCiAgICB9LA0KICAgIGRyYXdpbmdJdGVtRGVsZXRlKGluZGV4LCBsaXN0KSB7DQogICAgICBsaXN0LnNwbGljZShpbmRleCwgMSkNCiAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsNCiAgICAgICAgY29uc3QgbGVuID0gdGhpcy5kcmF3aW5nTGlzdC5sZW5ndGgNCiAgICAgICAgaWYgKGxlbikgew0KICAgICAgICAgIHRoaXMuYWN0aXZlRm9ybUl0ZW0odGhpcy5kcmF3aW5nTGlzdFtsZW4gLSAxXSkNCiAgICAgICAgfQ0KICAgICAgfSkNCiAgICB9LA0KICAgIGdlbmVyYXRlQ29kZSgpIHsNCiAgICAgIGNvbnN0IHsgdHlwZSB9ID0gdGhpcy5nZW5lcmF0ZUNvbmYNCiAgICAgIHRoaXMuQXNzZW1ibGVGb3JtRGF0YSgpDQogICAgICBjb25zdCBzY3JpcHQgPSB2dWVTY3JpcHQobWFrZVVwSnModGhpcy5mb3JtRGF0YSwgdHlwZSkpDQogICAgICBjb25zdCBodG1sID0gdnVlVGVtcGxhdGUobWFrZVVwSHRtbCh0aGlzLmZvcm1EYXRhLCB0eXBlKSkNCiAgICAgIGNvbnN0IGNzcyA9IGNzc1N0eWxlKG1ha2VVcENzcyh0aGlzLmZvcm1EYXRhKSkNCiAgICAgIHJldHVybiBiZWF1dGlmaWVyLmh0bWwoaHRtbCArIHNjcmlwdCArIGNzcywgYmVhdXRpZmllckNvbmYuaHRtbCkNCiAgICB9LA0KICAgIHNob3dKc29uKCkgew0KICAgICAgdGhpcy5Bc3NlbWJsZUZvcm1EYXRhKCkNCiAgICAgIHRoaXMuanNvbkRyYXdlclZpc2libGUgPSB0cnVlDQogICAgfSwNCiAgICBkb3dubG9hZCgpIHsNCiAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IHRydWUNCiAgICAgIHRoaXMuc2hvd0ZpbGVOYW1lID0gdHJ1ZQ0KICAgICAgdGhpcy5vcGVyYXRpb25UeXBlID0gJ2Rvd25sb2FkJw0KICAgIH0sDQogICAgcnVuKCkgew0KICAgICAgdGhpcy5kaWFsb2dWaXNpYmxlID0gdHJ1ZQ0KICAgICAgdGhpcy5zaG93RmlsZU5hbWUgPSBmYWxzZQ0KICAgICAgdGhpcy5vcGVyYXRpb25UeXBlID0gJ3J1bicNCiAgICB9LA0KICAgIGNvcHkoKSB7DQogICAgICB0aGlzLmRpYWxvZ1Zpc2libGUgPSB0cnVlDQogICAgICB0aGlzLnNob3dGaWxlTmFtZSA9IGZhbHNlDQogICAgICB0aGlzLm9wZXJhdGlvblR5cGUgPSAnY29weScNCiAgICB9LA0KICAgIHRhZ0NoYW5nZShuZXdUYWcpIHsNCiAgICAgIG5ld1RhZyA9IHRoaXMuY2xvbmVDb21wb25lbnQobmV3VGFnKQ0KICAgICAgY29uc3QgY29uZmlnID0gbmV3VGFnLl9fY29uZmlnX18NCiAgICAgIG5ld1RhZy5fX3ZNb2RlbF9fID0gdGhpcy5hY3RpdmVEYXRhLl9fdk1vZGVsX18NCiAgICAgIGNvbmZpZy5mb3JtSWQgPSB0aGlzLmFjdGl2ZUlkDQogICAgICBjb25maWcuc3BhbiA9IHRoaXMuYWN0aXZlRGF0YS5fX2NvbmZpZ19fLnNwYW4NCiAgICAgIHRoaXMuYWN0aXZlRGF0YS5fX2NvbmZpZ19fLnRhZyA9IGNvbmZpZy50YWcNCiAgICAgIHRoaXMuYWN0aXZlRGF0YS5fX2NvbmZpZ19fLnRhZ0ljb24gPSBjb25maWcudGFnSWNvbg0KICAgICAgdGhpcy5hY3RpdmVEYXRhLl9fY29uZmlnX18uZG9jdW1lbnQgPSBjb25maWcuZG9jdW1lbnQNCiAgICAgIGlmICh0eXBlb2YgdGhpcy5hY3RpdmVEYXRhLl9fY29uZmlnX18uZGVmYXVsdFZhbHVlID09PSB0eXBlb2YgY29uZmlnLmRlZmF1bHRWYWx1ZSkgew0KICAgICAgICBjb25maWcuZGVmYXVsdFZhbHVlID0gdGhpcy5hY3RpdmVEYXRhLl9fY29uZmlnX18uZGVmYXVsdFZhbHVlDQogICAgICB9DQogICAgICBPYmplY3Qua2V5cyhuZXdUYWcpLmZvckVhY2goa2V5ID0+IHsNCiAgICAgICAgaWYgKHRoaXMuYWN0aXZlRGF0YVtrZXldICE9PSB1bmRlZmluZWQpIHsNCiAgICAgICAgICBuZXdUYWdba2V5XSA9IHRoaXMuYWN0aXZlRGF0YVtrZXldDQogICAgICAgIH0NCiAgICAgIH0pDQogICAgICB0aGlzLmFjdGl2ZURhdGEgPSBuZXdUYWcNCiAgICAgIHRoaXMudXBkYXRlRHJhd2luZ0xpc3QobmV3VGFnLCB0aGlzLmRyYXdpbmdMaXN0KQ0KICAgIH0sDQogICAgdXBkYXRlRHJhd2luZ0xpc3QobmV3VGFnLCBsaXN0KSB7DQogICAgICBjb25zdCBpbmRleCA9IGxpc3QuZmluZEluZGV4KGl0ZW0gPT4gaXRlbS5fX2NvbmZpZ19fLmZvcm1JZCA9PT0gdGhpcy5hY3RpdmVJZCkNCiAgICAgIGlmIChpbmRleCA+IC0xKSB7DQogICAgICAgIGxpc3Quc3BsaWNlKGluZGV4LCAxLCBuZXdUYWcpDQogICAgICB9IGVsc2Ugew0KICAgICAgICBsaXN0LmZvckVhY2goaXRlbSA9PiB7DQogICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoaXRlbS5fX2NvbmZpZ19fLmNoaWxkcmVuKSkgdGhpcy51cGRhdGVEcmF3aW5nTGlzdChuZXdUYWcsIGl0ZW0uX19jb25maWdfXy5jaGlsZHJlbikNCiAgICAgICAgfSkNCiAgICAgIH0NCiAgICB9LA0KICAgIHJlZnJlc2hKc29uKGRhdGEpIHsNCiAgICAgIHRoaXMuZHJhd2luZ0xpc3QgPSBkZWVwQ2xvbmUoZGF0YS5maWVsZHMpDQogICAgICBkZWxldGUgZGF0YS5maWVsZHMNCiAgICAgIHRoaXMuZm9ybUNvbmYgPSBkYXRhDQogICAgfSwNCiAgICAvKiog6KGo5Y2V5Z+65pys5L+h5oGvICovDQogICAgaGFuZGxlRm9ybSgpew0KICAgICAgdGhpcy5mb3JtRGF0YSA9IHsNCiAgICAgICAgLi4udGhpcy5mb3JtQ29uZg0KICAgICAgfQ0KICAgICAgdGhpcy5mb3JtRGF0YS5maWVsZHMgPSBkZWVwQ2xvbmUodGhpcy5kcmF3aW5nTGlzdCk7DQogICAgICB0aGlzLmZvcm0uZm9ybUNvbnRlbnQgPSBKU09OLnN0cmluZ2lmeSh0aGlzLmZvcm1EYXRhKTsNCiAgICAgIHRoaXMuZm9ybU9wZW4gPSB0cnVlOw0KICAgICAgdGhpcy5mb3JtVGl0bGUgPSAi5re75Yqg6KGo5Y2VIjsNCiAgICB9LA0KICAgIC8vIOihqOWNlemHjee9rg0KICAgIHJlc2V0KCkgew0KICAgICAgdGhpcy5mb3JtID0gew0KICAgICAgICBmb3JtSWQ6IG51bGwsDQogICAgICAgIGZvcm1OYW1lOiBudWxsLA0KICAgICAgICBmb3JtQ29udGVudDogbnVsbCwNCiAgICAgICAgcmVtYXJrOiBudWxsDQogICAgICB9Ow0KICAgICAgdGhpcy5yZXNldEZvcm0oImZvcm0iKTsNCiAgICB9LA0KICAgIC8vIOWPlua2iOaMiemSrg0KICAgIGNhbmNlbCgpIHsNCiAgICAgIHRoaXMuZm9ybU9wZW4gPSBmYWxzZTsNCiAgICAgIHRoaXMucmVzZXQoKTsNCiAgICB9LA0KICAgIC8qKiDkv53lrZjooajljZXkv6Hmga8gKi8NCiAgICBzdWJtaXRGb3JtKCl7DQogICAgICB0aGlzLiRyZWZzWyJmb3JtIl0udmFsaWRhdGUodmFsaWQgPT4gew0KICAgICAgICBpZiAodmFsaWQpIHsNCiAgICAgICAgICBpZiAodGhpcy5mb3JtLmZvcm1JZCAhPSBudWxsKSB7DQogICAgICAgICAgICB1cGRhdGVGb3JtKHRoaXMuZm9ybSkudGhlbihyZXNwb25zZSA9PiB7DQogICAgICAgICAgICAgIHRoaXMuJG1vZGFsLm1zZ1N1Y2Nlc3MoIuS/ruaUueaIkOWKnyIpOw0KICAgICAgICAgICAgfSk7DQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIGFkZEZvcm0odGhpcy5mb3JtKS50aGVuKHJlc3BvbnNlID0+IHsNCiAgICAgICAgICAgICAgdGhpcy4kbW9kYWwubXNnU3VjY2Vzcygi5paw5aKe5oiQ5YqfIik7DQogICAgICAgICAgICB9KTsNCiAgICAgICAgICB9DQogICAgICAgICAgdGhpcy5kcmF3aW5nTGlzdCA9IFtdDQogICAgICAgICAgdGhpcy5pZEdsb2JhbCA9IDEwMA0KICAgICAgICAgIHRoaXMub3BlbiA9IGZhbHNlOw0KICAgICAgICAgIC8vIOWFs+mXreW9k+WJjeagh+etvumhteW5tui/lOWbnuS4iuS4qumhtemdog0KICAgICAgICAgIGNvbnN0IG9iaiA9IHsgcGF0aDogIi9mbG93YWJsZS9mb3JtIiwgcXVlcnk6IHsgdDogRGF0ZS5ub3coKX0gfTsNCiAgICAgICAgICB0aGlzLiR0YWIuY2xvc2VPcGVuUGFnZShvYmopOw0KICAgICAgICB9DQogICAgICB9KTsNCiAgICB9DQogIH0NCn0NCg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/tool/build","sourcesContent":["<template>\r\n  <div class=\"container\">\r\n    <div class=\"left-board\">\r\n      <div class=\"logo-wrapper\">\r\n        <div class=\"logo\">\r\n          <img :src=\"logo\" alt=\"logo\"> Form Generator\r\n        </div>\r\n      </div>\r\n      <el-scrollbar class=\"left-scrollbar\">\r\n        <div class=\"components-list\">\r\n          <div v-for=\"(item, listIndex) in leftComponents\" :key=\"listIndex\">\r\n            <div class=\"components-title\">\r\n              <svg-icon icon-class=\"component\" />\r\n              {{ item.title }}\r\n            </div>\r\n            <draggable\r\n              class=\"components-draggable\"\r\n              :list=\"item.list\"\r\n              :group=\"{ name: 'componentsGroup', pull: 'clone', put: false }\"\r\n              :clone=\"cloneComponent\"\r\n              draggable=\".components-item\"\r\n              :sort=\"false\"\r\n              @end=\"onEnd\"\r\n            >\r\n              <div\r\n                v-for=\"(element, index) in item.list\"\r\n                :key=\"index\"\r\n                class=\"components-item\"\r\n                @click=\"addComponent(element)\"\r\n              >\r\n                <div class=\"components-body\">\r\n                  <svg-icon :icon-class=\"element.__config__.tagIcon\" />\r\n                  {{ element.__config__.label }}\r\n                </div>\r\n              </div>\r\n            </draggable>\r\n          </div>\r\n        </div>\r\n      </el-scrollbar>\r\n    </div>\r\n\r\n    <div class=\"center-board\">\r\n      <div class=\"action-bar\">\r\n<!--        <el-button icon=\"el-icon-video-play\" type=\"text\" @click=\"run\">-->\r\n<!--          运行-->\r\n<!--        </el-button>-->\r\n        <el-button icon=\"el-icon-plus\" type=\"text\" @click=\"handleForm\">\r\n          保存\r\n        </el-button>\r\n        <el-button icon=\"el-icon-view\" type=\"text\" @click=\"showJson\">\r\n          查看json\r\n        </el-button>\r\n        <el-button icon=\"el-icon-download\" type=\"text\" @click=\"download\">\r\n          导出vue文件\r\n        </el-button>\r\n        <el-button class=\"copy-btn-main\" icon=\"el-icon-document-copy\" type=\"text\" @click=\"copy\">\r\n          复制代码\r\n        </el-button>\r\n        <el-button class=\"delete-btn\" icon=\"el-icon-delete\" type=\"text\" @click=\"empty\">\r\n          清空\r\n        </el-button>\r\n      </div>\r\n      <el-scrollbar class=\"center-scrollbar\">\r\n        <el-row class=\"center-board-row\" :gutter=\"formConf.gutter\">\r\n          <el-form\r\n            :size=\"formConf.size\"\r\n            :label-position=\"formConf.labelPosition\"\r\n            :disabled=\"formConf.disabled\"\r\n            :label-width=\"formConf.labelWidth + 'px'\"\r\n          >\r\n            <draggable class=\"drawing-board\" :list=\"drawingList\" :animation=\"340\" group=\"componentsGroup\">\r\n              <draggable-item\r\n                v-for=\"(item, index) in drawingList\"\r\n                :key=\"item.renderKey\"\r\n                :drawing-list=\"drawingList\"\r\n                :current-item=\"item\"\r\n                :index=\"index\"\r\n                :active-id=\"activeId\"\r\n                :form-conf=\"formConf\"\r\n                @activeItem=\"activeFormItem\"\r\n                @copyItem=\"drawingItemCopy\"\r\n                @deleteItem=\"drawingItemDelete\"\r\n              />\r\n            </draggable>\r\n            <div v-show=\"!drawingList.length\" class=\"empty-info\">\r\n              从左侧拖入或点选组件进行表单设计\r\n            </div>\r\n          </el-form>\r\n        </el-row>\r\n      </el-scrollbar>\r\n    </div>\r\n\r\n    <right-panel\r\n      :active-data=\"activeData\"\r\n      :form-conf=\"formConf\"\r\n      :show-field=\"!!drawingList.length\"\r\n      @tag-change=\"tagChange\"\r\n      @fetch-data=\"fetchData\"\r\n    />\r\n\r\n    <form-drawer\r\n      :visible.sync=\"drawerVisible\"\r\n      :form-data=\"formData\"\r\n      size=\"100%\"\r\n      :generate-conf=\"generateConf\"\r\n    />\r\n    <json-drawer\r\n      size=\"60%\"\r\n      :visible.sync=\"jsonDrawerVisible\"\r\n      :json-str=\"JSON.stringify(formData)\"\r\n      @refresh=\"refreshJson\"\r\n    />\r\n    <code-type-dialog\r\n      :visible.sync=\"dialogVisible\"\r\n      title=\"选择生成类型\"\r\n      :show-file-name=\"showFileName\"\r\n      @confirm=\"generate\"\r\n    />\r\n    <input id=\"copyNode\" type=\"hidden\">\r\n    <!--表单配置详情-->\r\n    <el-dialog :title=\"formTitle\" :visible.sync=\"formOpen\" width=\"500px\" append-to-body>\r\n      <el-form ref=\"form\" :model=\"form\" :rules=\"rules\" label-width=\"80px\">\r\n        <el-form-item label=\"表单名称\" prop=\"formName\">\r\n          <el-input v-model=\"form.formName\" placeholder=\"请输入表单名称\" />\r\n        </el-form-item>\r\n        <el-form-item label=\"备注\" prop=\"remark\">\r\n          <el-input v-model=\"form.remark\" placeholder=\"请输入备注\" />\r\n        </el-form-item>\r\n      </el-form>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button type=\"primary\" @click=\"submitForm\">确 定</el-button>\r\n        <el-button @click=\"cancel\">取 消</el-button>\r\n      </div>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport draggable from 'vuedraggable'\r\nimport { debounce } from 'throttle-debounce'\r\nimport { saveAs } from 'file-saver'\r\nimport ClipboardJS from 'clipboard'\r\nimport render from '@/components/render/render'\r\nimport FormDrawer from './FormDrawer'\r\nimport JsonDrawer from './JsonDrawer'\r\nimport RightPanel from './RightPanel'\r\nimport {\r\n  inputComponents, selectComponents, layoutComponents, formConf\r\n} from '@/utils/generator/config'\r\nimport {\r\n  exportDefault, beautifierConf, isNumberStr, titleCase, deepClone, isObjectObject\r\n} from '@/utils/index'\r\nimport {\r\n  makeUpHtml, vueTemplate, vueScript, cssStyle\r\n} from '@/utils/generator/html'\r\nimport { makeUpJs } from '@/utils/generator/js'\r\nimport { makeUpCss } from '@/utils/generator/css'\r\nimport drawingDefault from '@/utils/generator/drawingDefalut'\r\nimport logo from '@/assets/logo/logo.png'\r\nimport CodeTypeDialog from './CodeTypeDialog'\r\nimport DraggableItem from './DraggableItem'\r\nimport {\r\n  getDrawingList, saveDrawingList, getIdGlobal, saveIdGlobal, getFormConf\r\n} from '@/utils/db'\r\nimport loadBeautifier from '@/utils/loadBeautifier'\r\nimport {getForm, addForm, updateForm} from \"@/api/flowable/form\";\r\n\r\nlet beautifier\r\nconst emptyActiveData = { style: {}, autosize: {} }\r\nlet oldActiveId\r\nlet tempActiveData\r\nconst drawingListInDB = getDrawingList()\r\nconst formConfInDB = getFormConf()\r\nconst idGlobal = getIdGlobal()\r\n\r\nexport default {\r\n  components: {\r\n    draggable,\r\n    render,\r\n    FormDrawer,\r\n    JsonDrawer,\r\n    RightPanel,\r\n    CodeTypeDialog,\r\n    DraggableItem\r\n  },\r\n  data() {\r\n    return {\r\n      logo,\r\n      idGlobal,\r\n      formConf,\r\n      inputComponents,\r\n      selectComponents,\r\n      layoutComponents,\r\n      labelWidth: 100,\r\n      drawingList: drawingDefault,\r\n      drawingData: {},\r\n      activeId: drawingDefault[0].formId,\r\n      drawerVisible: false,\r\n      formData: {},\r\n      dialogVisible: false,\r\n      jsonDrawerVisible: false,\r\n      generateConf: null,\r\n      showFileName: false,\r\n      activeData: drawingDefault[0],\r\n      saveDrawingListDebounce: debounce(340, saveDrawingList),\r\n      saveIdGlobalDebounce: debounce(340, saveIdGlobal),\r\n      leftComponents: [\r\n        {\r\n          title: '输入型组件',\r\n          list: inputComponents\r\n        },\r\n        {\r\n          title: '选择型组件',\r\n          list: selectComponents\r\n        },\r\n        {\r\n          title: '布局型组件',\r\n          list: layoutComponents\r\n        }\r\n      ],\r\n      formOpen: false,\r\n      formTitle: \"\",\r\n      // 表单参数\r\n      form: {\r\n        formId: null,\r\n        formName: null,\r\n        formContent: null,\r\n        remark: null\r\n      },\r\n      // 表单校验\r\n      rules: {}\r\n    }\r\n  },\r\n  computed: {\r\n  },\r\n  watch: {\r\n    // eslint-disable-next-line func-names\r\n    'activeData.__config__.label': function (val, oldVal) {\r\n      if (\r\n        this.activeData.placeholder === undefined\r\n        || !this.activeData.__config__.tag\r\n        || oldActiveId !== this.activeId\r\n      ) {\r\n        return\r\n      }\r\n      this.activeData.placeholder = this.activeData.placeholder.replace(oldVal, '') + val\r\n    },\r\n    activeId: {\r\n      handler(val) {\r\n        oldActiveId = val\r\n      },\r\n      immediate: true\r\n    },\r\n    drawingList: {\r\n      handler(val) {\r\n        this.saveDrawingListDebounce(val)\r\n        if (val.length === 0) this.idGlobal = 100\r\n      },\r\n      deep: true\r\n    },\r\n    idGlobal: {\r\n      handler(val) {\r\n        this.saveIdGlobalDebounce(val)\r\n      },\r\n      immediate: true\r\n    }\r\n  },\r\n\r\n  mounted() {\r\n    const that = this;\r\n    if (Array.isArray(drawingListInDB) && drawingListInDB.length > 0) {\r\n      that.drawingList = drawingListInDB\r\n    } else {\r\n      that.drawingList = drawingDefault\r\n    }\r\n    this.activeFormItem(that.drawingList[0])\r\n    that.drawingList = [];\r\n    const formId =  that.$route.query && that.$route.query.formId;\r\n    if (formId) {\r\n      getForm(formId).then(res =>{\r\n        that.formConf = JSON.parse(res.data.formContent);\r\n        that.drawingList = that.formConf.fields;\r\n        that.form = res.data;\r\n      })\r\n    }else {\r\n      // 初始化表单设计器\r\n      // that.formConf = {};\r\n      if (formConfInDB) {\r\n        that.formConf = formConfInDB\r\n      }\r\n    }\r\n    loadBeautifier(btf => {\r\n      beautifier = btf\r\n    })\r\n    const clipboard = new ClipboardJS('#copyNode', {\r\n      text: trigger => {\r\n        const codeStr = this.generateCode()\r\n        this.$notify({\r\n          title: '成功',\r\n          message: '代码已复制到剪切板，可粘贴。',\r\n          type: 'success'\r\n        })\r\n        return codeStr\r\n      }\r\n    })\r\n    clipboard.on('error', e => {\r\n      this.$message.error('代码复制失败')\r\n    })\r\n  },\r\n  methods: {\r\n    setObjectValueReduce(obj, strKeys, data) {\r\n      const arr = strKeys.split('.')\r\n      arr.reduce((pre, item, i) => {\r\n        if (arr.length === i + 1) {\r\n          pre[item] = data\r\n        } else if (!isObjectObject(pre[item])) {\r\n          pre[item] = {}\r\n        }\r\n        return pre[item]\r\n      }, obj)\r\n    },\r\n    setRespData(component, resp) {\r\n      const { dataPath, renderKey, dataConsumer } = component.__config__\r\n      if (!dataPath || !dataConsumer) return\r\n      const respData = dataPath.split('.').reduce((pre, item) => pre[item], resp)\r\n\r\n      // 将请求回来的数据，赋值到指定属性。\r\n      // 以el-tabel为例，根据Element文档，应该将数据赋值给el-tabel的data属性，所以dataConsumer的值应为'data';\r\n      // 此时赋值代码可写成 component[dataConsumer] = respData；\r\n      // 但为支持更深层级的赋值（如：dataConsumer的值为'options.data'）,使用setObjectValueReduce\r\n      this.setObjectValueReduce(component, dataConsumer, respData)\r\n      const i = this.drawingList.findIndex(item => item.__config__.renderKey === renderKey)\r\n      if (i > -1) this.$set(this.drawingList, i, component)\r\n    },\r\n    fetchData(component) {\r\n      const { dataType, method, url } = component.__config__\r\n      if (dataType === 'dynamic' && method && url) {\r\n        this.setLoading(component, true)\r\n        this.$axios({\r\n          method,\r\n          url\r\n        }).then(resp => {\r\n          this.setLoading(component, false)\r\n          this.setRespData(component, resp.data)\r\n        })\r\n      }\r\n    },\r\n    setLoading(component, val) {\r\n      const { directives } = component\r\n      if (Array.isArray(directives)) {\r\n        const t = directives.find(d => d.name === 'loading')\r\n        if (t) t.value = val\r\n      }\r\n    },\r\n    activeFormItem(currentItem) {\r\n      this.activeData = currentItem\r\n      this.activeId = currentItem.__config__.formId\r\n    },\r\n    onEnd(obj) {\r\n      if (obj.from !== obj.to) {\r\n        this.fetchData(tempActiveData)\r\n        this.activeData = tempActiveData\r\n        this.activeId = this.idGlobal\r\n      }\r\n    },\r\n    addComponent(item) {\r\n      const clone = this.cloneComponent(item)\r\n      this.fetchData(clone)\r\n      this.drawingList.push(clone)\r\n      this.activeFormItem(clone)\r\n    },\r\n    cloneComponent(origin) {\r\n      const clone = deepClone(origin)\r\n      const config = clone.__config__\r\n      config.span = this.formConf.span // 生成代码时，会根据span做精简判断\r\n      this.createIdAndKey(clone)\r\n      clone.placeholder !== undefined && (clone.placeholder += config.label)\r\n      tempActiveData = clone\r\n      return tempActiveData\r\n    },\r\n    createIdAndKey(item) {\r\n      const config = item.__config__\r\n      config.formId = ++this.idGlobal\r\n      config.renderKey = `${config.formId}${+new Date()}` // 改变renderKey后可以实现强制更新组件\r\n      if (config.layout === 'colFormItem') {\r\n        item.__vModel__ = `field${this.idGlobal}`\r\n      } else if (config.layout === 'rowFormItem') {\r\n        config.componentName = `row${this.idGlobal}`\r\n        !Array.isArray(config.children) && (config.children = [])\r\n        delete config.label // rowFormItem无需配置label属性\r\n      }\r\n      if (Array.isArray(config.children)) {\r\n        config.children = config.children.map(childItem => this.createIdAndKey(childItem))\r\n      }\r\n      return item\r\n    },\r\n    AssembleFormData() {\r\n      this.formData = {\r\n        ...this.formConf\r\n      }\r\n      this.formData.fields = deepClone(this.drawingList);\r\n    },\r\n    generate(data) {\r\n      const func = this[`exec${titleCase(this.operationType)}`]\r\n      this.generateConf = data\r\n      func && func(data)\r\n    },\r\n    execRun(data) {\r\n      this.AssembleFormData()\r\n      this.drawerVisible = true\r\n    },\r\n    execDownload(data) {\r\n      const codeStr = this.generateCode()\r\n      const blob = new Blob([codeStr], { type: 'text/plain;charset=utf-8' })\r\n      saveAs(blob, data.fileName)\r\n    },\r\n    execCopy(data) {\r\n      document.getElementById('copyNode').click()\r\n    },\r\n    empty() {\r\n      this.$confirm('确定要清空所有组件吗？', '提示', { type: 'warning' }).then(\r\n        () => {\r\n          this.drawingList = []\r\n          this.idGlobal = 100\r\n        }\r\n      )\r\n    },\r\n    drawingItemCopy(item, list) {\r\n      let clone = deepClone(item)\r\n      clone = this.createIdAndKey(clone)\r\n      list.push(clone)\r\n      this.activeFormItem(clone)\r\n    },\r\n    drawingItemDelete(index, list) {\r\n      list.splice(index, 1)\r\n      this.$nextTick(() => {\r\n        const len = this.drawingList.length\r\n        if (len) {\r\n          this.activeFormItem(this.drawingList[len - 1])\r\n        }\r\n      })\r\n    },\r\n    generateCode() {\r\n      const { type } = this.generateConf\r\n      this.AssembleFormData()\r\n      const script = vueScript(makeUpJs(this.formData, type))\r\n      const html = vueTemplate(makeUpHtml(this.formData, type))\r\n      const css = cssStyle(makeUpCss(this.formData))\r\n      return beautifier.html(html + script + css, beautifierConf.html)\r\n    },\r\n    showJson() {\r\n      this.AssembleFormData()\r\n      this.jsonDrawerVisible = true\r\n    },\r\n    download() {\r\n      this.dialogVisible = true\r\n      this.showFileName = true\r\n      this.operationType = 'download'\r\n    },\r\n    run() {\r\n      this.dialogVisible = true\r\n      this.showFileName = false\r\n      this.operationType = 'run'\r\n    },\r\n    copy() {\r\n      this.dialogVisible = true\r\n      this.showFileName = false\r\n      this.operationType = 'copy'\r\n    },\r\n    tagChange(newTag) {\r\n      newTag = this.cloneComponent(newTag)\r\n      const config = newTag.__config__\r\n      newTag.__vModel__ = this.activeData.__vModel__\r\n      config.formId = this.activeId\r\n      config.span = this.activeData.__config__.span\r\n      this.activeData.__config__.tag = config.tag\r\n      this.activeData.__config__.tagIcon = config.tagIcon\r\n      this.activeData.__config__.document = config.document\r\n      if (typeof this.activeData.__config__.defaultValue === typeof config.defaultValue) {\r\n        config.defaultValue = this.activeData.__config__.defaultValue\r\n      }\r\n      Object.keys(newTag).forEach(key => {\r\n        if (this.activeData[key] !== undefined) {\r\n          newTag[key] = this.activeData[key]\r\n        }\r\n      })\r\n      this.activeData = newTag\r\n      this.updateDrawingList(newTag, this.drawingList)\r\n    },\r\n    updateDrawingList(newTag, list) {\r\n      const index = list.findIndex(item => item.__config__.formId === this.activeId)\r\n      if (index > -1) {\r\n        list.splice(index, 1, newTag)\r\n      } else {\r\n        list.forEach(item => {\r\n          if (Array.isArray(item.__config__.children)) this.updateDrawingList(newTag, item.__config__.children)\r\n        })\r\n      }\r\n    },\r\n    refreshJson(data) {\r\n      this.drawingList = deepClone(data.fields)\r\n      delete data.fields\r\n      this.formConf = data\r\n    },\r\n    /** 表单基本信息 */\r\n    handleForm(){\r\n      this.formData = {\r\n        ...this.formConf\r\n      }\r\n      this.formData.fields = deepClone(this.drawingList);\r\n      this.form.formContent = JSON.stringify(this.formData);\r\n      this.formOpen = true;\r\n      this.formTitle = \"添加表单\";\r\n    },\r\n    // 表单重置\r\n    reset() {\r\n      this.form = {\r\n        formId: null,\r\n        formName: null,\r\n        formContent: null,\r\n        remark: null\r\n      };\r\n      this.resetForm(\"form\");\r\n    },\r\n    // 取消按钮\r\n    cancel() {\r\n      this.formOpen = false;\r\n      this.reset();\r\n    },\r\n    /** 保存表单信息 */\r\n    submitForm(){\r\n      this.$refs[\"form\"].validate(valid => {\r\n        if (valid) {\r\n          if (this.form.formId != null) {\r\n            updateForm(this.form).then(response => {\r\n              this.$modal.msgSuccess(\"修改成功\");\r\n            });\r\n          } else {\r\n            addForm(this.form).then(response => {\r\n              this.$modal.msgSuccess(\"新增成功\");\r\n            });\r\n          }\r\n          this.drawingList = []\r\n          this.idGlobal = 100\r\n          this.open = false;\r\n          // 关闭当前标签页并返回上个页面\r\n          const obj = { path: \"/flowable/form\", query: { t: Date.now()} };\r\n          this.$tab.closeOpenPage(obj);\r\n        }\r\n      });\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang='scss'>\r\n@import '@/styles/home.scss';\r\n</style>\r\n"]}]}