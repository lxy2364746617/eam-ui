{"remainingRequest":"E:\\visual_code_work_space\\ruoyi-ui\\node_modules\\babel-loader\\lib\\index.js!E:\\visual_code_work_space\\ruoyi-ui\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\visual_code_work_space\\ruoyi-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\visual_code_work_space\\ruoyi-ui\\src\\components\\tinymce\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\visual_code_work_space\\ruoyi-ui\\src\\components\\tinymce\\index.vue","mtime":1693557459634},{"path":"E:\\visual_code_work_space\\ruoyi-ui\\babel.config.js","mtime":1693557459543},{"path":"E:\\visual_code_work_space\\ruoyi-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\visual_code_work_space\\ruoyi-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"E:\\visual_code_work_space\\ruoyi-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\visual_code_work_space\\ruoyi-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKdmFyIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQgPSByZXF1aXJlKCJFOi92aXN1YWxfY29kZV93b3JrX3NwYWNlL3J1b3lpLXVpL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2ludGVyb3BSZXF1aXJlRGVmYXVsdC5qcyIpLmRlZmF1bHQ7Ck9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICB2YWx1ZTogdHJ1ZQp9KTsKZXhwb3J0cy5kZWZhdWx0ID0gdm9pZCAwOwpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIik7CnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIik7CnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAudG8tc3RyaW5nLmpzIik7CnZhciBfbG9hZFRpbnltY2UgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoIkAvdXRpbHMvbG9hZFRpbnltY2UiKSk7CnZhciBfY29uZmlnID0gcmVxdWlyZSgiLi9jb25maWciKTsKdmFyIF90aHJvdHRsZURlYm91bmNlID0gcmVxdWlyZSgidGhyb3R0bGUtZGVib3VuY2UiKTsKLy8KLy8KLy8KLy8KCnZhciBudW0gPSAxOwp2YXIgX2RlZmF1bHQyID0gewogIHByb3BzOiB7CiAgICBpZDogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6IGZ1bmN0aW9uIF9kZWZhdWx0KCkgewogICAgICAgIG51bSA9PT0gMTAwMDAgJiYgKG51bSA9IDEpOwogICAgICAgIHJldHVybiAidGlueW1jZSIuY29uY2F0KCtuZXcgRGF0ZSgpKS5jb25jYXQobnVtKyspOwogICAgICB9CiAgICB9LAogICAgdmFsdWU6IHsKICAgICAgZGVmYXVsdDogJycKICAgIH0KICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB0aW55bWNlSWQ6IHRoaXMuaWQKICAgIH07CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKICAgICgwLCBfbG9hZFRpbnltY2UuZGVmYXVsdCkoZnVuY3Rpb24gKHRpbnltY2UpIHsKICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGdsb2JhbC1yZXF1aXJlCiAgICAgIHJlcXVpcmUoJy4vemhfQ04nKTsKICAgICAgdmFyIGNvbmYgPSB7CiAgICAgICAgc2VsZWN0b3I6ICIjIi5jb25jYXQoX3RoaXMudGlueW1jZUlkKSwKICAgICAgICBsYW5ndWFnZTogJ3poX0NOJywKICAgICAgICBtZW51YmFyOiAnZmlsZSBlZGl0IGluc2VydCB2aWV3IGZvcm1hdCB0YWJsZScsCiAgICAgICAgcGx1Z2luczogX2NvbmZpZy5wbHVnaW5zLAogICAgICAgIHRvb2xiYXI6IF9jb25maWcudG9vbGJhciwKICAgICAgICBoZWlnaHQ6IDMwMCwKICAgICAgICBicmFuZGluZzogZmFsc2UsCiAgICAgICAgb2JqZWN0X3Jlc2l6aW5nOiBmYWxzZSwKICAgICAgICBlbmRfY29udGFpbmVyX29uX2VtcHR5X2Jsb2NrOiB0cnVlLAogICAgICAgIHBvd2VycGFzdGVfd29yZF9pbXBvcnQ6ICdjbGVhbicsCiAgICAgICAgY29kZV9kaWFsb2dfaGVpZ2h0OiA0NTAsCiAgICAgICAgY29kZV9kaWFsb2dfd2lkdGg6IDEwMDAsCiAgICAgICAgYWR2bGlzdF9idWxsZXRfc3R5bGVzOiAnc3F1YXJlJywKICAgICAgICBhZHZsaXN0X251bWJlcl9zdHlsZXM6ICdkZWZhdWx0JywKICAgICAgICBkZWZhdWx0X2xpbmtfdGFyZ2V0OiAnX2JsYW5rJywKICAgICAgICBsaW5rX3RpdGxlOiBmYWxzZSwKICAgICAgICBub25icmVha2luZ19mb3JjZV90YWI6IHRydWUKICAgICAgfTsKICAgICAgY29uZiA9IE9iamVjdC5hc3NpZ24oY29uZiwgX3RoaXMuJGF0dHJzKTsKICAgICAgY29uZi5pbml0X2luc3RhbmNlX2NhbGxiYWNrID0gZnVuY3Rpb24gKGVkaXRvcikgewogICAgICAgIGlmIChfdGhpcy52YWx1ZSkgZWRpdG9yLnNldENvbnRlbnQoX3RoaXMudmFsdWUpOwogICAgICAgIF90aGlzLnZNb2RlbChlZGl0b3IpOwogICAgICB9OwogICAgICB0aW55bWNlLmluaXQoY29uZik7CiAgICB9KTsKICB9LAogIGRlc3Ryb3llZDogZnVuY3Rpb24gZGVzdHJveWVkKCkgewogICAgdGhpcy5kZXN0cm95VGlueW1jZSgpOwogIH0sCiAgbWV0aG9kczogewogICAgdk1vZGVsOiBmdW5jdGlvbiB2TW9kZWwoZWRpdG9yKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwogICAgICAvLyDmjqfliLbov57nu63lhpnlhaXml7ZzZXRDb250ZW5055qE6Kem5Y+R6aKR546HCiAgICAgIHZhciBkZWJvdW5jZVNldENvbnRlbnQgPSAoMCwgX3Rocm90dGxlRGVib3VuY2UuZGVib3VuY2UpKDI1MCwgZWRpdG9yLnNldENvbnRlbnQpOwogICAgICB0aGlzLiR3YXRjaCgndmFsdWUnLCBmdW5jdGlvbiAodmFsLCBwcmV2VmFsKSB7CiAgICAgICAgaWYgKGVkaXRvciAmJiB2YWwgIT09IHByZXZWYWwgJiYgdmFsICE9PSBlZGl0b3IuZ2V0Q29udGVudCgpKSB7CiAgICAgICAgICBpZiAodHlwZW9mIHZhbCAhPT0gJ3N0cmluZycpIHZhbCA9IHZhbC50b1N0cmluZygpOwogICAgICAgICAgZGVib3VuY2VTZXRDb250ZW50LmNhbGwoZWRpdG9yLCB2YWwpOwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIGVkaXRvci5vbignY2hhbmdlIGtleXVwIHVuZG8gcmVkbycsIGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpczIuJGVtaXQoJ2lucHV0JywgZWRpdG9yLmdldENvbnRlbnQoKSk7CiAgICAgIH0pOwogICAgfSwKICAgIGRlc3Ryb3lUaW55bWNlOiBmdW5jdGlvbiBkZXN0cm95VGlueW1jZSgpIHsKICAgICAgaWYgKCF3aW5kb3cudGlueW1jZSkgcmV0dXJuOwogICAgICB2YXIgdGlueW1jZSA9IHdpbmRvdy50aW55bWNlLmdldCh0aGlzLnRpbnltY2VJZCk7CiAgICAgIGlmICh0aW55bWNlKSB7CiAgICAgICAgdGlueW1jZS5kZXN0cm95KCk7CiAgICAgIH0KICAgIH0KICB9Cn07CmV4cG9ydHMuZGVmYXVsdCA9IF9kZWZhdWx0Mjs="},{"version":3,"names":["_loadTinymce","_interopRequireDefault","require","_config","_throttleDebounce","num","_default2","props","id","type","String","default","_default","concat","Date","value","data","tinymceId","mounted","_this","loadTinymce","tinymce","conf","selector","language","menubar","plugins","toolbar","height","branding","object_resizing","end_container_on_empty_block","powerpaste_word_import","code_dialog_height","code_dialog_width","advlist_bullet_styles","advlist_number_styles","default_link_target","link_title","nonbreaking_force_tab","Object","assign","$attrs","init_instance_callback","editor","setContent","vModel","init","destroyed","destroyTinymce","methods","_this2","debounceSetContent","debounce","$watch","val","prevVal","getContent","toString","call","on","$emit","window","get","destroy","exports"],"sources":["src/components/tinymce/index.vue"],"sourcesContent":["<template>\r\n  <textarea :id=\"tinymceId\" style=\"visibility: hidden\" />\r\n</template>\r\n\r\n<script>\r\nimport loadTinymce from '@/utils/loadTinymce'\r\nimport { plugins, toolbar } from './config'\r\nimport { debounce } from 'throttle-debounce'\r\n\r\nlet num = 1\r\n\r\nexport default {\r\n  props: {\r\n    id: {\r\n      type: String,\r\n      default: () => {\r\n        num === 10000 && (num = 1)\r\n        return `tinymce${+new Date()}${num++}`\r\n      }\r\n    },\r\n    value: {\r\n      default: ''\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      tinymceId: this.id\r\n    }\r\n  },\r\n  mounted() {\r\n    loadTinymce(tinymce => {\r\n      // eslint-disable-next-line global-require\r\n      require('./zh_CN')\r\n      let conf = {\r\n        selector: `#${this.tinymceId}`,\r\n        language: 'zh_CN',\r\n        menubar: 'file edit insert view format table',\r\n        plugins,\r\n        toolbar,\r\n        height: 300,\r\n        branding: false,\r\n        object_resizing: false,\r\n        end_container_on_empty_block: true,\r\n        powerpaste_word_import: 'clean',\r\n        code_dialog_height: 450,\r\n        code_dialog_width: 1000,\r\n        advlist_bullet_styles: 'square',\r\n        advlist_number_styles: 'default',\r\n        default_link_target: '_blank',\r\n        link_title: false,\r\n        nonbreaking_force_tab: true\r\n      }\r\n      conf = Object.assign(conf, this.$attrs)\r\n      conf.init_instance_callback = editor => {\r\n        if (this.value) editor.setContent(this.value)\r\n        this.vModel(editor)\r\n      }\r\n      tinymce.init(conf)\r\n    })\r\n  },\r\n  destroyed() {\r\n    this.destroyTinymce()\r\n  },\r\n  methods: {\r\n    vModel(editor) {\r\n      // 控制连续写入时setContent的触发频率\r\n      const debounceSetContent = debounce(250, editor.setContent)\r\n      this.$watch('value', (val, prevVal) => {\r\n        if (editor && val !== prevVal && val !== editor.getContent()) {\r\n          if (typeof val !== 'string') val = val.toString()\r\n          debounceSetContent.call(editor, val)\r\n        }\r\n      })\r\n\r\n      editor.on('change keyup undo redo', () => {\r\n        this.$emit('input', editor.getContent())\r\n      })\r\n    },\r\n    destroyTinymce() {\r\n      if (!window.tinymce) return\r\n      const tinymce = window.tinymce.get(this.tinymceId)\r\n      if (tinymce) {\r\n        tinymce.destroy()\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n"],"mappings":";;;;;;;;;;AAKA,IAAAA,YAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,OAAA,GAAAD,OAAA;AACA,IAAAE,iBAAA,GAAAF,OAAA;;;;;;AAEA,IAAAG,GAAA;AAAA,IAAAC,SAAA,GAEA;EACAC,KAAA;IACAC,EAAA;MACAC,IAAA,EAAAC,MAAA;MACAC,OAAA,WAAAC,SAAA;QACAP,GAAA,eAAAA,GAAA;QACA,iBAAAQ,MAAA,MAAAC,IAAA,IAAAD,MAAA,CAAAR,GAAA;MACA;IACA;IACAU,KAAA;MACAJ,OAAA;IACA;EACA;EACAK,IAAA,WAAAA,KAAA;IACA;MACAC,SAAA,OAAAT;IACA;EACA;EACAU,OAAA,WAAAA,QAAA;IAAA,IAAAC,KAAA;IACA,IAAAC,oBAAA,YAAAC,OAAA;MACA;MACAnB,OAAA;MACA,IAAAoB,IAAA;QACAC,QAAA,MAAAV,MAAA,CAAAM,KAAA,CAAAF,SAAA;QACAO,QAAA;QACAC,OAAA;QACAC,OAAA,EAAAA,eAAA;QACAC,OAAA,EAAAA,eAAA;QACAC,MAAA;QACAC,QAAA;QACAC,eAAA;QACAC,4BAAA;QACAC,sBAAA;QACAC,kBAAA;QACAC,iBAAA;QACAC,qBAAA;QACAC,qBAAA;QACAC,mBAAA;QACAC,UAAA;QACAC,qBAAA;MACA;MACAjB,IAAA,GAAAkB,MAAA,CAAAC,MAAA,CAAAnB,IAAA,EAAAH,KAAA,CAAAuB,MAAA;MACApB,IAAA,CAAAqB,sBAAA,aAAAC,MAAA;QACA,IAAAzB,KAAA,CAAAJ,KAAA,EAAA6B,MAAA,CAAAC,UAAA,CAAA1B,KAAA,CAAAJ,KAAA;QACAI,KAAA,CAAA2B,MAAA,CAAAF,MAAA;MACA;MACAvB,OAAA,CAAA0B,IAAA,CAAAzB,IAAA;IACA;EACA;EACA0B,SAAA,WAAAA,UAAA;IACA,KAAAC,cAAA;EACA;EACAC,OAAA;IACAJ,MAAA,WAAAA,OAAAF,MAAA;MAAA,IAAAO,MAAA;MACA;MACA,IAAAC,kBAAA,OAAAC,0BAAA,OAAAT,MAAA,CAAAC,UAAA;MACA,KAAAS,MAAA,oBAAAC,GAAA,EAAAC,OAAA;QACA,IAAAZ,MAAA,IAAAW,GAAA,KAAAC,OAAA,IAAAD,GAAA,KAAAX,MAAA,CAAAa,UAAA;UACA,WAAAF,GAAA,eAAAA,GAAA,GAAAA,GAAA,CAAAG,QAAA;UACAN,kBAAA,CAAAO,IAAA,CAAAf,MAAA,EAAAW,GAAA;QACA;MACA;MAEAX,MAAA,CAAAgB,EAAA;QACAT,MAAA,CAAAU,KAAA,UAAAjB,MAAA,CAAAa,UAAA;MACA;IACA;IACAR,cAAA,WAAAA,eAAA;MACA,KAAAa,MAAA,CAAAzC,OAAA;MACA,IAAAA,OAAA,GAAAyC,MAAA,CAAAzC,OAAA,CAAA0C,GAAA,MAAA9C,SAAA;MACA,IAAAI,OAAA;QACAA,OAAA,CAAA2C,OAAA;MACA;IACA;EACA;AACA;AAAAC,OAAA,CAAAtD,OAAA,GAAAL,SAAA"}]}