{"remainingRequest":"E:\\visual_code_work_space\\ruoyi-ui\\node_modules\\babel-loader\\lib\\index.js!E:\\visual_code_work_space\\ruoyi-ui\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\visual_code_work_space\\ruoyi-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\visual_code_work_space\\ruoyi-ui\\src\\views\\flowable\\task\\finished\\detail\\flowview.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\visual_code_work_space\\ruoyi-ui\\src\\views\\flowable\\task\\finished\\detail\\flowview.vue","mtime":1693557459672},{"path":"E:\\visual_code_work_space\\ruoyi-ui\\babel.config.js","mtime":1693557459543},{"path":"E:\\visual_code_work_space\\ruoyi-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\visual_code_work_space\\ruoyi-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"E:\\visual_code_work_space\\ruoyi-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\visual_code_work_space\\ruoyi-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKdmFyIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQgPSByZXF1aXJlKCJFOi92aXN1YWxfY29kZV93b3JrX3NwYWNlL3J1b3lpLXVpL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2ludGVyb3BSZXF1aXJlRGVmYXVsdC5qcyIpLmRlZmF1bHQ7Ck9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICB2YWx1ZTogdHJ1ZQp9KTsKZXhwb3J0cy5kZWZhdWx0ID0gdm9pZCAwOwp2YXIgX3JlZ2VuZXJhdG9yUnVudGltZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoIkU6L3Zpc3VhbF9jb2RlX3dvcmtfc3BhY2UvcnVveWktdWkvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvcmVnZW5lcmF0b3JSdW50aW1lLmpzIikpOwp2YXIgX2FzeW5jVG9HZW5lcmF0b3IyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJFOi92aXN1YWxfY29kZV93b3JrX3NwYWNlL3J1b3lpLXVpL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2FzeW5jVG9HZW5lcmF0b3IuanMiKSk7CnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3Qua2V5cy5qcyIpOwpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyIpOwpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyIpOwpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZC5qcyIpOwp2YXIgX2N1c3RvbUJwbW4gPSByZXF1aXJlKCJAL2NvbXBvbmVudHMvY3VzdG9tQnBtbiIpOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwp2YXIgX2RlZmF1bHQyID0gewogIG5hbWU6ICJGbG93VmlldyIsCiAgcHJvcHM6IHsKICAgIGZsb3dEYXRhOiB7CiAgICAgIHR5cGU6IE9iamVjdCwKICAgICAgZGVmYXVsdDogZnVuY3Rpb24gX2RlZmF1bHQoKSB7fQogICAgfQogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGJwbW5WaWV3ZXI6IG51bGwKICAgIH07CiAgfSwKICB3YXRjaDogewogICAgZmxvd0RhdGE6IHsKICAgICAgaGFuZGxlcjogZnVuY3Rpb24gaGFuZGxlcihuZXdWYWwpIHsKICAgICAgICBpZiAoT2JqZWN0LmtleXMobmV3VmFsKS5sZW5ndGggPiAwKSB7CiAgICAgICAgICAvLyDnlJ/miJDlrp7kvosKICAgICAgICAgIHRoaXMuYnBtblZpZXdlciAmJiB0aGlzLmJwbW5WaWV3ZXIuZGVzdHJveSgpOwogICAgICAgICAgdGhpcy5icG1uVmlld2VyID0gbmV3IF9jdXN0b21CcG1uLkN1c3RvbVZpZXdlcih7CiAgICAgICAgICAgIGNvbnRhaW5lcjogdGhpcy4kcmVmcy5mbG93Q2FudmFzLAogICAgICAgICAgICBoZWlnaHQ6ICdjYWxjKDEwMHZoIC0gMjAwcHgpJwogICAgICAgICAgfSk7CiAgICAgICAgICB0aGlzLmxvYWRGbG93Q2FudmFzKG5ld1ZhbCk7CiAgICAgICAgfQogICAgICB9LAogICAgICBpbW1lZGlhdGU6IHRydWUsCiAgICAgIC8vIOeri+WNs+eUn+aViAogICAgICBkZWVwOiB0cnVlIC8v55uR5ZCs5a+56LGh5oiW5pWw57uE55qE5pe25YCZ77yM6KaB55So5Yiw5rex5bqm55uR5ZCsCiAgICB9CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkge30sCiAgbWV0aG9kczogewogICAgLy8g5Yqg6L295rWB56iLCiAgICBsb2FkRmxvd0NhbnZhczogZnVuY3Rpb24gbG9hZEZsb3dDYW52YXMoZmxvd0RhdGEpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgcmV0dXJuICgwLCBfYXN5bmNUb0dlbmVyYXRvcjIuZGVmYXVsdCkoIC8qI19fUFVSRV9fKi8oMCwgX3JlZ2VuZXJhdG9yUnVudGltZTIuZGVmYXVsdCkoKS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgdmFyIHNlbGY7CiAgICAgICAgcmV0dXJuICgwLCBfcmVnZW5lcmF0b3JSdW50aW1lMi5kZWZhdWx0KSgpLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBzZWxmID0gX3RoaXM7CiAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDE7CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDQ7CiAgICAgICAgICAgICAgcmV0dXJuIHNlbGYuYnBtblZpZXdlci5pbXBvcnRYTUwoZmxvd0RhdGEueG1sRGF0YSk7CiAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICBzZWxmLmZpdFZpZXdwb3J0KCk7CiAgICAgICAgICAgICAgaWYgKGZsb3dEYXRhLm5vZGVEYXRhICE9PSB1bmRlZmluZWQgJiYgZmxvd0RhdGEubm9kZURhdGEubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgc2VsZi5maWxsQ29sb3IoZmxvd0RhdGEubm9kZURhdGEpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTE7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gODsKICAgICAgICAgICAgICBfY29udGV4dC50MCA9IF9jb250ZXh0WyJjYXRjaCJdKDEpOwogICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoX2NvbnRleHQudDAubWVzc2FnZSwgX2NvbnRleHQudDAud2FybmluZ3MpOwogICAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSwgbnVsbCwgW1sxLCA4XV0pOwogICAgICB9KSkoKTsKICAgIH0sCiAgICAvLyDorr7nva7pq5jkuq7popzoibLnmoRjbGFzcwogICAgc2V0Tm9kZUNvbG9yOiBmdW5jdGlvbiBzZXROb2RlQ29sb3Iobm9kZUNvZGVzLCBjb2xvckNsYXNzLCBjYW52YXMpIHsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBub2RlQ29kZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICBjYW52YXMuYWRkTWFya2VyKG5vZGVDb2Rlc1tpXSwgY29sb3JDbGFzcyk7CiAgICAgIH0KICAgIH0sCiAgICAvLyDorqnlm77og73oh6rpgILlupTlsY/luZUKICAgIGZpdFZpZXdwb3J0OiBmdW5jdGlvbiBmaXRWaWV3cG9ydCgpIHsKICAgICAgdGhpcy56b29tID0gdGhpcy5icG1uVmlld2VyLmdldCgnY2FudmFzJykuem9vbSgiZml0LXZpZXdwb3J0IiwgImF1dG8iKTsKICAgIH0sCiAgICAvLyDmlL7lpKfnvKnlsI8KICAgIHpvb21WaWV3cG9ydDogZnVuY3Rpb24gem9vbVZpZXdwb3J0KCkgewogICAgICB2YXIgem9vbUluID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB0cnVlOwogICAgICB0aGlzLnpvb20gPSB0aGlzLmJwbW5WaWV3ZXIuZ2V0KCdjYW52YXMnKS56b29tKCk7CiAgICAgIHRoaXMuem9vbSArPSB6b29tSW4gPyAwLjEgOiAtMC4xOwogICAgICBpZiAodGhpcy56b29tID49IDAuMikgdGhpcy5icG1uVmlld2VyLmdldCgnY2FudmFzJykuem9vbSh0aGlzLnpvb20pOwogICAgfSwKICAgIC8vIOiuvue9rumrmOS6ruminOiJsueahAogICAgZmlsbENvbG9yOiBmdW5jdGlvbiBmaWxsQ29sb3Iobm9kZURhdGEpIHsKICAgICAgdmFyIGNhbnZhcyA9IHRoaXMuYnBtblZpZXdlci5nZXQoJ2NhbnZhcycpOwogICAgICB0aGlzLmJwbW5WaWV3ZXIuZ2V0RGVmaW5pdGlvbnMoKS5yb290RWxlbWVudHNbMF0uZmxvd0VsZW1lbnRzLmZvckVhY2goZnVuY3Rpb24gKG4pIHsKICAgICAgICB2YXIgY29tcGxldGVUYXNrID0gbm9kZURhdGEuZmluZChmdW5jdGlvbiAobSkgewogICAgICAgICAgcmV0dXJuIG0ua2V5ID09PSBuLmlkOwogICAgICAgIH0pOwogICAgICAgIHZhciB0b2RvVGFzayA9IG5vZGVEYXRhLmZpbmQoZnVuY3Rpb24gKG0pIHsKICAgICAgICAgIHJldHVybiAhbS5jb21wbGV0ZWQ7CiAgICAgICAgfSk7CiAgICAgICAgdmFyIGVuZFRhc2sgPSBub2RlRGF0YVtub2RlRGF0YS5sZW5ndGggLSAxXTsKICAgICAgICBpZiAobi4kdHlwZSA9PT0gJ2JwbW46VXNlclRhc2snKSB7CiAgICAgICAgICBpZiAoY29tcGxldGVUYXNrKSB7CiAgICAgICAgICAgIHZhciBfbiRvdXRnb2luZzsKICAgICAgICAgICAgY2FudmFzLmFkZE1hcmtlcihuLmlkLCBjb21wbGV0ZVRhc2suY29tcGxldGVkID8gJ2hpZ2hsaWdodCcgOiAnaGlnaGxpZ2h0LXRvZG8nKTsKICAgICAgICAgICAgKF9uJG91dGdvaW5nID0gbi5vdXRnb2luZykgPT09IG51bGwgfHwgX24kb3V0Z29pbmcgPT09IHZvaWQgMCB8fCBfbiRvdXRnb2luZy5mb3JFYWNoKGZ1bmN0aW9uIChubikgewogICAgICAgICAgICAgIHZhciB0YXJnZXRUYXNrID0gbm9kZURhdGEuZmluZChmdW5jdGlvbiAobSkgewogICAgICAgICAgICAgICAgcmV0dXJuIG0ua2V5ID09PSBubi50YXJnZXRSZWYuaWQ7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgaWYgKHRhcmdldFRhc2spIHsKICAgICAgICAgICAgICAgIGlmICh0b2RvVGFzayAmJiBjb21wbGV0ZVRhc2sua2V5ID09PSB0b2RvVGFzay5rZXkgJiYgIXRvZG9UYXNrLmNvbXBsZXRlZCkgewogICAgICAgICAgICAgICAgICBjYW52YXMuYWRkTWFya2VyKG5uLmlkLCB0b2RvVGFzay5jb21wbGV0ZWQgPyAnaGlnaGxpZ2h0JyA6ICdoaWdobGlnaHQtdG9kbycpOwogICAgICAgICAgICAgICAgICBjYW52YXMuYWRkTWFya2VyKG5uLnRhcmdldFJlZi5pZCwgdG9kb1Rhc2suY29tcGxldGVkID8gJ2hpZ2hsaWdodCcgOiAnaGlnaGxpZ2h0LXRvZG8nKTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgIGNhbnZhcy5hZGRNYXJrZXIobm4uaWQsIHRhcmdldFRhc2suY29tcGxldGVkID8gJ2hpZ2hsaWdodCcgOiAnaGlnaGxpZ2h0LXRvZG8nKTsKICAgICAgICAgICAgICAgICAgY2FudmFzLmFkZE1hcmtlcihubi50YXJnZXRSZWYuaWQsIHRhcmdldFRhc2suY29tcGxldGVkID8gJ2hpZ2hsaWdodCcgOiAnaGlnaGxpZ2h0LXRvZG8nKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICAvLyDmjpLku5bnvZHlhbMKICAgICAgICBlbHNlIGlmIChuLiR0eXBlID09PSAnYnBtbjpFeGNsdXNpdmVHYXRld2F5JykgewogICAgICAgICAgaWYgKGNvbXBsZXRlVGFzaykgewogICAgICAgICAgICB2YXIgX24kb3V0Z29pbmcyOwogICAgICAgICAgICBjYW52YXMuYWRkTWFya2VyKG4uaWQsIGNvbXBsZXRlVGFzay5jb21wbGV0ZWQgPyAnaGlnaGxpZ2h0JyA6ICdoaWdobGlnaHQtdG9kbycpOwogICAgICAgICAgICAoX24kb3V0Z29pbmcyID0gbi5vdXRnb2luZykgPT09IG51bGwgfHwgX24kb3V0Z29pbmcyID09PSB2b2lkIDAgfHwgX24kb3V0Z29pbmcyLmZvckVhY2goZnVuY3Rpb24gKG5uKSB7CiAgICAgICAgICAgICAgdmFyIHRhcmdldFRhc2sgPSBub2RlRGF0YS5maW5kKGZ1bmN0aW9uIChtKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gbS5rZXkgPT09IG5uLnRhcmdldFJlZi5pZDsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICBpZiAodGFyZ2V0VGFzaykgewogICAgICAgICAgICAgICAgY2FudmFzLmFkZE1hcmtlcihubi5pZCwgdGFyZ2V0VGFzay5jb21wbGV0ZWQgPyAnaGlnaGxpZ2h0JyA6ICdoaWdobGlnaHQtdG9kbycpOwogICAgICAgICAgICAgICAgY2FudmFzLmFkZE1hcmtlcihubi50YXJnZXRSZWYuaWQsIHRhcmdldFRhc2suY29tcGxldGVkID8gJ2hpZ2hsaWdodCcgOiAnaGlnaGxpZ2h0LXRvZG8nKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICAvLyDlubbooYznvZHlhbMKICAgICAgICBlbHNlIGlmIChuLiR0eXBlID09PSAnYnBtbjpQYXJhbGxlbEdhdGV3YXknKSB7CiAgICAgICAgICBpZiAoY29tcGxldGVUYXNrKSB7CiAgICAgICAgICAgIHZhciBfbiRvdXRnb2luZzM7CiAgICAgICAgICAgIGNhbnZhcy5hZGRNYXJrZXIobi5pZCwgY29tcGxldGVUYXNrLmNvbXBsZXRlZCA/ICdoaWdobGlnaHQnIDogJ2hpZ2hsaWdodC10b2RvJyk7CiAgICAgICAgICAgIChfbiRvdXRnb2luZzMgPSBuLm91dGdvaW5nKSA9PT0gbnVsbCB8fCBfbiRvdXRnb2luZzMgPT09IHZvaWQgMCB8fCBfbiRvdXRnb2luZzMuZm9yRWFjaChmdW5jdGlvbiAobm4pIHsKICAgICAgICAgICAgICB2YXIgdGFyZ2V0VGFzayA9IG5vZGVEYXRhLmZpbmQoZnVuY3Rpb24gKG0pIHsKICAgICAgICAgICAgICAgIHJldHVybiBtLmtleSA9PT0gbm4udGFyZ2V0UmVmLmlkOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIGlmICh0YXJnZXRUYXNrKSB7CiAgICAgICAgICAgICAgICBjYW52YXMuYWRkTWFya2VyKG5uLmlkLCB0YXJnZXRUYXNrLmNvbXBsZXRlZCA/ICdoaWdobGlnaHQnIDogJ2hpZ2hsaWdodC10b2RvJyk7CiAgICAgICAgICAgICAgICBjYW52YXMuYWRkTWFya2VyKG5uLnRhcmdldFJlZi5pZCwgdGFyZ2V0VGFzay5jb21wbGV0ZWQgPyAnaGlnaGxpZ2h0JyA6ICdoaWdobGlnaHQtdG9kbycpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIGlmIChuLiR0eXBlID09PSAnYnBtbjpTdGFydEV2ZW50JykgewogICAgICAgICAgbi5vdXRnb2luZy5mb3JFYWNoKGZ1bmN0aW9uIChubikgewogICAgICAgICAgICB2YXIgY29tcGxldGVUYXNrID0gbm9kZURhdGEuZmluZChmdW5jdGlvbiAobSkgewogICAgICAgICAgICAgIHJldHVybiBtLmtleSA9PT0gbm4udGFyZ2V0UmVmLmlkOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgaWYgKGNvbXBsZXRlVGFzaykgewogICAgICAgICAgICAgIGNhbnZhcy5hZGRNYXJrZXIobm4uaWQsICdoaWdobGlnaHQnKTsKICAgICAgICAgICAgICBjYW52YXMuYWRkTWFya2VyKG4uaWQsICdoaWdobGlnaHQnKTsKICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSBpZiAobi4kdHlwZSA9PT0gJ2JwbW46RW5kRXZlbnQnKSB7CiAgICAgICAgICBpZiAoZW5kVGFzay5rZXkgPT09IG4uaWQgJiYgZW5kVGFzay5jb21wbGV0ZWQpIHsKICAgICAgICAgICAgY2FudmFzLmFkZE1hcmtlcihuLmlkLCAnaGlnaGxpZ2h0Jyk7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pOwogICAgfQogIH0KfTsKZXhwb3J0cy5kZWZhdWx0ID0gX2RlZmF1bHQyOw=="},{"version":3,"names":["_customBpmn","require","name","props","flowData","type","Object","default","_default","data","bpmnViewer","watch","handler","newVal","keys","length","destroy","BpmnViewer","container","$refs","flowCanvas","height","loadFlowCanvas","immediate","deep","mounted","methods","_this","_asyncToGenerator2","_regeneratorRuntime2","mark","_callee","self","wrap","_callee$","_context","prev","next","importXML","xmlData","fitViewport","nodeData","undefined","fillColor","t0","console","error","message","warnings","stop","setNodeColor","nodeCodes","colorClass","canvas","i","addMarker","zoom","get","zoomViewport","zoomIn","arguments","getDefinitions","rootElements","flowElements","forEach","n","completeTask","find","m","key","id","todoTask","completed","endTask","$type","_n$outgoing","outgoing","nn","targetTask","targetRef","_n$outgoing2","_n$outgoing3","exports","_default2"],"sources":["src/views/flowable/task/finished/detail/flowview.vue"],"sourcesContent":["<template>\r\n  <div class=\"containers main-box\">\r\n    <el-button type=\"success\"\r\n               size=\"small\"\r\n               icon=\"el-icon-zoom-in\"\r\n               @click=\"zoomViewport(true)\">放大</el-button>\r\n    <el-button type=\"warning\"\r\n               size=\"small\"\r\n               icon=\"el-icon-zoom-out\"\r\n               @click=\"zoomViewport(false)\">缩小</el-button>\r\n    <el-button type=\"info\"\r\n               size=\"small\"\r\n               icon=\"el-icon-rank\"\r\n               @click=\"fitViewport\">适中</el-button>\r\n    <div class=\"canvas\" ref=\"flowCanvas\"></div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { CustomViewer as BpmnViewer } from \"@/components/customBpmn\";\r\n\r\nexport default {\r\n  name: \"FlowView\",\r\n  props: {\r\n    flowData: {\r\n      type: Object,\r\n      default: () => {}\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      bpmnViewer: null\r\n    };\r\n  },\r\n  watch: {\r\n    flowData: {\r\n      handler(newVal) {\r\n        if (Object.keys(newVal).length > 0) {\r\n          // 生成实例\r\n          this.bpmnViewer && this.bpmnViewer.destroy();\r\n          this.bpmnViewer = new BpmnViewer({\r\n            container: this.$refs.flowCanvas,\r\n            height: 'calc(100vh - 200px)',\r\n          });\r\n          this.loadFlowCanvas(newVal)\r\n        }\r\n      },\r\n      immediate: true, // 立即生效\r\n      deep: true  //监听对象或数组的时候，要用到深度监听\r\n    }\r\n  },\r\n  mounted() {\r\n  },\r\n  methods: {\r\n    // 加载流程\r\n    async loadFlowCanvas(flowData) {\r\n      const self = this\r\n      try {\r\n        await self.bpmnViewer.importXML(flowData.xmlData);\r\n        self.fitViewport()\r\n        if (flowData.nodeData !==undefined && flowData.nodeData.length > 0 ) {\r\n          self.fillColor(flowData.nodeData)\r\n        }\r\n      } catch (err) {\r\n        console.error(err.message, err.warnings)\r\n      }\r\n    },\r\n    // 设置高亮颜色的class\r\n    setNodeColor(nodeCodes, colorClass, canvas) {\r\n      for (let i = 0; i < nodeCodes.length; i++) {\r\n        canvas.addMarker(nodeCodes[i], colorClass);\r\n      }\r\n    },\r\n    // 让图能自适应屏幕\r\n    fitViewport() {\r\n      this.zoom = this.bpmnViewer.get('canvas').zoom(\"fit-viewport\", \"auto\")\r\n    },\r\n    // 放大缩小\r\n    zoomViewport(zoomIn = true) {\r\n      this.zoom = this.bpmnViewer.get('canvas').zoom()\r\n      this.zoom += (zoomIn ? 0.1 : -0.1)\r\n      if(this.zoom >= 0.2) this.bpmnViewer.get('canvas').zoom(this.zoom)\r\n    },\r\n\r\n    // 设置高亮颜色的\r\n    fillColor(nodeData) {\r\n      const canvas = this.bpmnViewer.get('canvas')\r\n      this.bpmnViewer.getDefinitions().rootElements[0].flowElements.forEach(n => {\r\n        const completeTask = nodeData.find(m => m.key === n.id)\r\n        const todoTask = nodeData.find(m => !m.completed)\r\n        const endTask = nodeData[nodeData.length - 1]\r\n        if (n.$type === 'bpmn:UserTask') {\r\n          if (completeTask) {\r\n            canvas.addMarker(n.id, completeTask.completed ? 'highlight' : 'highlight-todo')\r\n            n.outgoing?.forEach(nn => {\r\n              const targetTask = nodeData.find(m => m.key === nn.targetRef.id)\r\n              if (targetTask) {\r\n                if (todoTask && completeTask.key === todoTask.key && !todoTask.completed){\r\n                  canvas.addMarker(nn.id, todoTask.completed ? 'highlight' : 'highlight-todo')\r\n                  canvas.addMarker(nn.targetRef.id, todoTask.completed ? 'highlight' : 'highlight-todo')\r\n                }else {\r\n                  canvas.addMarker(nn.id, targetTask.completed ? 'highlight' : 'highlight-todo')\r\n                  canvas.addMarker(nn.targetRef.id, targetTask.completed ? 'highlight' : 'highlight-todo')\r\n                }\r\n              }\r\n            })\r\n          }\r\n        }\r\n        // 排他网关\r\n        else if (n.$type === 'bpmn:ExclusiveGateway') {\r\n          if (completeTask) {\r\n            canvas.addMarker(n.id, completeTask.completed ? 'highlight' : 'highlight-todo')\r\n            n.outgoing?.forEach(nn => {\r\n              const targetTask = nodeData.find(m => m.key === nn.targetRef.id)\r\n              if (targetTask) {\r\n\r\n                canvas.addMarker(nn.id, targetTask.completed ? 'highlight' : 'highlight-todo')\r\n                canvas.addMarker(nn.targetRef.id, targetTask.completed ? 'highlight' : 'highlight-todo')\r\n              }\r\n\r\n            })\r\n          }\r\n\r\n        }\r\n        // 并行网关\r\n        else if (n.$type === 'bpmn:ParallelGateway') {\r\n          if (completeTask) {\r\n            canvas.addMarker(n.id, completeTask.completed ? 'highlight' : 'highlight-todo')\r\n            n.outgoing?.forEach(nn => {\r\n              const targetTask = nodeData.find(m => m.key === nn.targetRef.id)\r\n              if (targetTask) {\r\n                canvas.addMarker(nn.id, targetTask.completed ? 'highlight' : 'highlight-todo')\r\n                canvas.addMarker(nn.targetRef.id, targetTask.completed ? 'highlight' : 'highlight-todo')\r\n              }\r\n            })\r\n          }\r\n        }\r\n        else if (n.$type === 'bpmn:StartEvent') {\r\n          n.outgoing.forEach(nn => {\r\n            const completeTask = nodeData.find(m => m.key === nn.targetRef.id)\r\n            if (completeTask) {\r\n              canvas.addMarker(nn.id, 'highlight')\r\n              canvas.addMarker(n.id, 'highlight')\r\n              return\r\n            }\r\n          })\r\n        }\r\n        else if (n.$type === 'bpmn:EndEvent') {\r\n          if (endTask.key === n.id && endTask.completed) {\r\n            canvas.addMarker(n.id, 'highlight')\r\n            return\r\n          }\r\n        }\r\n      })\r\n    },\r\n  }\r\n};\r\n</script>\r\n<style lang=\"scss\">\r\n  .bjs-powered-by {\r\n    display: none;\r\n  }\r\n  .view-mode {\r\n    .el-header, .el-aside, .djs-palette, .bjs-powered-by {\r\n      display: none;\r\n    }\r\n    .el-loading-mask {\r\n      background-color: initial;\r\n    }\r\n    .el-loading-spinner {\r\n      display: none;\r\n    }\r\n  }\r\n  .containers {\r\n    // background-color: #ffffff;\r\n    width: 100%;\r\n    height: 100%;\r\n    .canvas {\r\n      width: 100%;\r\n      height: 100%;\r\n    }\r\n    .panel {\r\n      position: absolute;\r\n      right: 0;\r\n      top: 50px;\r\n      width: 300px;\r\n    }\r\n    .load {\r\n      margin-right: 10px;\r\n    }\r\n    .el-form-item__label{\r\n      font-size: 13px;\r\n    }\r\n\r\n    .djs-palette{\r\n      left: 0px!important;\r\n      top: 0px;\r\n      border-top: none;\r\n    }\r\n\r\n    .djs-container svg {\r\n      min-height: 650px;\r\n    }\r\n\r\n    .highlight.djs-shape .djs-visual > :nth-child(1) {\r\n      fill: green !important;\r\n      stroke: green !important;\r\n      fill-opacity: 0.2 !important;\r\n    }\r\n    .highlight.djs-shape .djs-visual > :nth-child(2) {\r\n      fill: green !important;\r\n    }\r\n    .highlight.djs-shape .djs-visual > path {\r\n      fill: green !important;\r\n      fill-opacity: 0.2 !important;\r\n      stroke: green !important;\r\n    }\r\n    .highlight.djs-connection > .djs-visual > path {\r\n      stroke: green !important;\r\n    }\r\n    .highlight-todo.djs-connection > .djs-visual > path {\r\n      stroke: orange !important;\r\n      stroke-dasharray: 4px !important;\r\n      fill-opacity: 0.2 !important;\r\n    }\r\n    .highlight-todo.djs-shape .djs-visual > :nth-child(1) {\r\n      fill: orange !important;\r\n      stroke: orange !important;\r\n      stroke-dasharray: 4px !important;\r\n      fill-opacity: 0.2 !important;\r\n    }\r\n    .overlays-div {\r\n      font-size: 10px;\r\n      color: red;\r\n      width: 100px;\r\n      top: -20px !important;\r\n    }\r\n  }\r\n</style>\r\n"],"mappings":"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"}]}