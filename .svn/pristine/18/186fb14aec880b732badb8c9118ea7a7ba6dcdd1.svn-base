{"remainingRequest":"E:\\qrhpro\\cms-eam-ui\\node_modules\\babel-loader\\lib\\index.js!E:\\qrhpro\\cms-eam-ui\\node_modules\\eslint-loader\\index.js??ref--13-0!E:\\qrhpro\\cms-eam-ui\\src\\views\\tool\\preview\\main.js","dependencies":[{"path":"E:\\qrhpro\\cms-eam-ui\\src\\views\\tool\\preview\\main.js","mtime":1693791860718},{"path":"E:\\qrhpro\\cms-eam-ui\\babel.config.js","mtime":1693791556521},{"path":"E:\\qrhpro\\cms-eam-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1693791616229},{"path":"E:\\qrhpro\\cms-eam-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":1693791596985},{"path":"E:\\qrhpro\\cms-eam-ui\\node_modules\\eslint-loader\\index.js","mtime":1693791700180}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKdmFyIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQgPSByZXF1aXJlKCJFOi9xcmhwcm8vY21zLWVhbS11aS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9pbnRlcm9wUmVxdWlyZURlZmF1bHQuanMiKS5kZWZhdWx0OwpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyIpOwpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyIpOwpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIik7CnZhciBfdnVlID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJ2dWUiKSk7CnZhciBfbG9hZFNjcmlwdCA9IHJlcXVpcmUoIkAvdXRpbHMvbG9hZFNjcmlwdCIpOwp2YXIgX2F4aW9zID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJheGlvcyIpKTsKdmFyIF9pbmRleCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiQC9jb21wb25lbnRzL3RpbnltY2UvaW5kZXgudnVlIikpOwpfdnVlLmRlZmF1bHQuY29tcG9uZW50KCd0aW55bWNlJywgX2luZGV4LmRlZmF1bHQpOwpfdnVlLmRlZmF1bHQucHJvdG90eXBlLiRheGlvcyA9IF9heGlvcy5kZWZhdWx0Owp2YXIgJHByZXZpZXdBcHAgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJldmlld0FwcCcpOwp2YXIgY2hpbGRBdHRycyA9IHsKICBmaWxlOiAnJywKICBkaWFsb2c6ICcgd2lkdGg9IjYwMHB4IiBjbGFzcz0iZGlhbG9nLXdpZHRoIiB2LWlmPSJ2aXNpYmxlIiA6dmlzaWJsZS5zeW5jPSJ2aXNpYmxlIiA6bW9kYWwtYXBwZW5kLXRvLWJvZHk9ImZhbHNlIiAnCn07CndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgaW5pdCwgZmFsc2UpOwpmdW5jdGlvbiBidWlsZExpbmtzKGxpbmtzKSB7CiAgdmFyIHN0cnMgPSAnJzsKICBsaW5rcy5mb3JFYWNoKGZ1bmN0aW9uICh1cmwpIHsKICAgIHN0cnMgKz0gIjxsaW5rIGhyZWY9XCIiLmNvbmNhdCh1cmwsICJcIiByZWw9XCJzdHlsZXNoZWV0XCI+Iik7CiAgfSk7CiAgcmV0dXJuIHN0cnM7Cn0KZnVuY3Rpb24gaW5pdChldmVudCkgewogIGlmIChldmVudC5kYXRhLnR5cGUgPT09ICdyZWZyZXNoRnJhbWUnKSB7CiAgICB2YXIgY29kZSA9IGV2ZW50LmRhdGEuZGF0YTsKICAgIHZhciBhdHRycyA9IGNoaWxkQXR0cnNbY29kZS5nZW5lcmF0ZUNvbmYudHlwZV07CiAgICB2YXIgbGlua3MgPSAnJzsKICAgIGlmIChBcnJheS5pc0FycmF5KGNvZGUubGlua3MpICYmIGNvZGUubGlua3MubGVuZ3RoID4gMCkgewogICAgICBsaW5rcyA9IGJ1aWxkTGlua3MoY29kZS5saW5rcyk7CiAgICB9CiAgICAkcHJldmlld0FwcC5pbm5lckhUTUwgPSAiIi5jb25jYXQobGlua3MsICI8c3R5bGU+IikuY29uY2F0KGNvZGUuY3NzLCAiPC9zdHlsZT48ZGl2IGlkPVwiYXBwXCI+PC9kaXY+Iik7CiAgICBpZiAoQXJyYXkuaXNBcnJheShjb2RlLnNjcmlwdHMpICYmIGNvZGUuc2NyaXB0cy5sZW5ndGggPiAwKSB7CiAgICAgICgwLCBfbG9hZFNjcmlwdC5sb2FkU2NyaXB0UXVldWUpKGNvZGUuc2NyaXB0cywgZnVuY3Rpb24gKCkgewogICAgICAgIG5ld1Z1ZShhdHRycywgY29kZS5qcywgY29kZS5odG1sKTsKICAgICAgfSk7CiAgICB9IGVsc2UgewogICAgICBuZXdWdWUoYXR0cnMsIGNvZGUuanMsIGNvZGUuaHRtbCk7CiAgICB9CiAgfQp9CmZ1bmN0aW9uIG5ld1Z1ZShhdHRycywgbWFpbiwgaHRtbCkgewogIG1haW4gPSBldmFsKCIoIi5jb25jYXQobWFpbiwgIikiKSk7CiAgbWFpbi50ZW1wbGF0ZSA9ICI8ZGl2PiIuY29uY2F0KGh0bWwsICI8L2Rpdj4iKTsKICBuZXcgX3Z1ZS5kZWZhdWx0KHsKICAgIGNvbXBvbmVudHM6IHsKICAgICAgY2hpbGQ6IG1haW4KICAgIH0sCiAgICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgICByZXR1cm4gewogICAgICAgIHZpc2libGU6IHRydWUKICAgICAgfTsKICAgIH0sCiAgICB0ZW1wbGF0ZTogIjxkaXY+PGNoaWxkICIuY29uY2F0KGF0dHJzLCAiLz48L2Rpdj4iKQogIH0pLiRtb3VudCgnI2FwcCcpOwp9"},{"version":3,"names":["_vue","_interopRequireDefault","require","_loadScript","_axios","_index","Vue","component","Tinymce","prototype","$axios","axios","$previewApp","document","getElementById","childAttrs","file","dialog","window","addEventListener","init","buildLinks","links","strs","forEach","url","concat","event","data","type","code","attrs","generateConf","Array","isArray","length","innerHTML","css","scripts","loadScriptQueue","newVue","js","html","main","eval","template","components","child","visible","$mount"],"sources":["E:/qrhpro/cms-eam-ui/src/views/tool/preview/main.js"],"sourcesContent":["import Vue from 'vue'\r\nimport { loadScriptQueue } from '@/utils/loadScript'\r\nimport axios from 'axios'\r\nimport Tinymce from '@/components/tinymce/index.vue'\r\n\r\nVue.component('tinymce', Tinymce)\r\nVue.prototype.$axios = axios\r\n\r\nconst $previewApp = document.getElementById('previewApp')\r\nconst childAttrs = {\r\n  file: '',\r\n  dialog: ' width=\"600px\" class=\"dialog-width\" v-if=\"visible\" :visible.sync=\"visible\" :modal-append-to-body=\"false\" '\r\n}\r\n\r\nwindow.addEventListener('message', init, false)\r\n\r\nfunction buildLinks(links) {\r\n  let strs = ''\r\n  links.forEach(url => {\r\n    strs += `<link href=\"${url}\" rel=\"stylesheet\">`\r\n  })\r\n  return strs\r\n}\r\n\r\nfunction init(event) {\r\n  if (event.data.type === 'refreshFrame') {\r\n    const code = event.data.data\r\n    const attrs = childAttrs[code.generateConf.type]\r\n    let links = ''\r\n\r\n    if (Array.isArray(code.links) && code.links.length > 0) {\r\n      links = buildLinks(code.links)\r\n    }\r\n\r\n    $previewApp.innerHTML = `${links}<style>${code.css}</style><div id=\"app\"></div>`\r\n\r\n    if (Array.isArray(code.scripts) && code.scripts.length > 0) {\r\n      loadScriptQueue(code.scripts, () => {\r\n        newVue(attrs, code.js, code.html)\r\n      })\r\n    } else {\r\n      newVue(attrs, code.js, code.html)\r\n    }\r\n  }\r\n}\r\n\r\nfunction newVue(attrs, main, html) {\r\n  main = eval(`(${main})`)\r\n  main.template = `<div>${html}</div>`\r\n  new Vue({\r\n    components: {\r\n      child: main\r\n    },\r\n    data() {\r\n      return {\r\n        visible: true\r\n      }\r\n    },\r\n    template: `<div><child ${attrs}/></div>`\r\n  }).$mount('#app')\r\n}\r\n"],"mappings":";;;;;;AAAA,IAAAA,IAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,WAAA,GAAAD,OAAA;AACA,IAAAE,MAAA,GAAAH,sBAAA,CAAAC,OAAA;AACA,IAAAG,MAAA,GAAAJ,sBAAA,CAAAC,OAAA;AAEAI,YAAG,CAACC,SAAS,CAAC,SAAS,EAAEC,cAAO,CAAC;AACjCF,YAAG,CAACG,SAAS,CAACC,MAAM,GAAGC,cAAK;AAE5B,IAAMC,WAAW,GAAGC,QAAQ,CAACC,cAAc,CAAC,YAAY,CAAC;AACzD,IAAMC,UAAU,GAAG;EACjBC,IAAI,EAAE,EAAE;EACRC,MAAM,EAAE;AACV,CAAC;AAEDC,MAAM,CAACC,gBAAgB,CAAC,SAAS,EAAEC,IAAI,EAAE,KAAK,CAAC;AAE/C,SAASC,UAAUA,CAACC,KAAK,EAAE;EACzB,IAAIC,IAAI,GAAG,EAAE;EACbD,KAAK,CAACE,OAAO,CAAC,UAAAC,GAAG,EAAI;IACnBF,IAAI,oBAAAG,MAAA,CAAmBD,GAAG,2BAAqB;EACjD,CAAC,CAAC;EACF,OAAOF,IAAI;AACb;AAEA,SAASH,IAAIA,CAACO,KAAK,EAAE;EACnB,IAAIA,KAAK,CAACC,IAAI,CAACC,IAAI,KAAK,cAAc,EAAE;IACtC,IAAMC,IAAI,GAAGH,KAAK,CAACC,IAAI,CAACA,IAAI;IAC5B,IAAMG,KAAK,GAAGhB,UAAU,CAACe,IAAI,CAACE,YAAY,CAACH,IAAI,CAAC;IAChD,IAAIP,KAAK,GAAG,EAAE;IAEd,IAAIW,KAAK,CAACC,OAAO,CAACJ,IAAI,CAACR,KAAK,CAAC,IAAIQ,IAAI,CAACR,KAAK,CAACa,MAAM,GAAG,CAAC,EAAE;MACtDb,KAAK,GAAGD,UAAU,CAACS,IAAI,CAACR,KAAK,CAAC;IAChC;IAEAV,WAAW,CAACwB,SAAS,MAAAV,MAAA,CAAMJ,KAAK,aAAAI,MAAA,CAAUI,IAAI,CAACO,GAAG,mCAA8B;IAEhF,IAAIJ,KAAK,CAACC,OAAO,CAACJ,IAAI,CAACQ,OAAO,CAAC,IAAIR,IAAI,CAACQ,OAAO,CAACH,MAAM,GAAG,CAAC,EAAE;MAC1D,IAAAI,2BAAe,EAACT,IAAI,CAACQ,OAAO,EAAE,YAAM;QAClCE,MAAM,CAACT,KAAK,EAAED,IAAI,CAACW,EAAE,EAAEX,IAAI,CAACY,IAAI,CAAC;MACnC,CAAC,CAAC;IACJ,CAAC,MAAM;MACLF,MAAM,CAACT,KAAK,EAAED,IAAI,CAACW,EAAE,EAAEX,IAAI,CAACY,IAAI,CAAC;IACnC;EACF;AACF;AAEA,SAASF,MAAMA,CAACT,KAAK,EAAEY,IAAI,EAAED,IAAI,EAAE;EACjCC,IAAI,GAAGC,IAAI,KAAAlB,MAAA,CAAKiB,IAAI,MAAG,CAAC;EACxBA,IAAI,CAACE,QAAQ,WAAAnB,MAAA,CAAWgB,IAAI,WAAQ;EACpC,IAAIpC,YAAG,CAAC;IACNwC,UAAU,EAAE;MACVC,KAAK,EAAEJ;IACT,CAAC;IACDf,IAAI,WAAAA,KAAA,EAAG;MACL,OAAO;QACLoB,OAAO,EAAE;MACX,CAAC;IACH,CAAC;IACDH,QAAQ,iBAAAnB,MAAA,CAAiBK,KAAK;EAChC,CAAC,CAAC,CAACkB,MAAM,CAAC,MAAM,CAAC;AACnB"}]}