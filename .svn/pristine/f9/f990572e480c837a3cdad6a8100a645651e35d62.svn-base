{"remainingRequest":"E:\\qrhpro\\cms-eam-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\qrhpro\\cms-eam-ui\\src\\views\\flowable\\task\\myProcess\\send\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\qrhpro\\cms-eam-ui\\src\\views\\flowable\\task\\myProcess\\send\\index.vue","mtime":1693791860319},{"path":"E:\\qrhpro\\cms-eam-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1693791616229},{"path":"E:\\qrhpro\\cms-eam-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":1693791596985},{"path":"E:\\qrhpro\\cms-eam-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1693791616229},{"path":"E:\\qrhpro\\cms-eam-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":1693791844037}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgUGFyc2VyIGZyb20gJ0AvY29tcG9uZW50cy9wYXJzZXIvUGFyc2VyJw0KaW1wb3J0IHtkZWZpbml0aW9uU3RhcnQsIGZsb3dYbWxBbmROb2RlfSBmcm9tICJAL2FwaS9mbG93YWJsZS9kZWZpbml0aW9uIjsNCmltcG9ydCBmbG93IGZyb20gJy4vZmxvdycNCmltcG9ydCB7Zmxvd0Zvcm1EYXRhfSBmcm9tICJAL2FwaS9mbG93YWJsZS9wcm9jZXNzIjsNCmltcG9ydCB7Z2V0TmV4dEZsb3dOb2RlQnlTdGFydH0gZnJvbSAiQC9hcGkvZmxvd2FibGUvdG9kbyI7DQppbXBvcnQgRmxvd1VzZXIgZnJvbSAnQC9jb21wb25lbnRzL2Zsb3cvVXNlcicNCmltcG9ydCBGbG93Um9sZSBmcm9tICdAL2NvbXBvbmVudHMvZmxvdy9Sb2xlJw0KDQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICJSZWNvcmQiLA0KICBjb21wb25lbnRzOiB7DQogICAgUGFyc2VyLA0KICAgIGZsb3csDQogICAgRmxvd1VzZXIsDQogICAgRmxvd1JvbGUsDQogIH0sDQogIHByb3BzOiB7fSwNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgLy8g5qih5Z6LeG1s5pWw5o2uDQogICAgICBmbG93RGF0YToge30sDQogICAgICBhY3RpdmVOYW1lOiAnMScsIC8vIOWIh+aNonRhYuagh+etvg0KICAgICAgZGVmYXVsdFByb3BzOiB7DQogICAgICAgIGNoaWxkcmVuOiAiY2hpbGRyZW4iLA0KICAgICAgICBsYWJlbDogImxhYmVsIg0KICAgICAgfSwNCiAgICAgIC8vIOafpeivouWPguaVsA0KICAgICAgcXVlcnlQYXJhbXM6IHsNCiAgICAgICAgZGVwdElkOiB1bmRlZmluZWQNCiAgICAgIH0sDQogICAgICAvLyDpga7nvanlsYINCiAgICAgIGxvYWRpbmc6IHRydWUsDQogICAgICBkZXBsb3lJZDogIiIsICAvLyDmtYHnqIvlrprkuYnnvJblj7cNCiAgICAgIHByb2NEZWZJZDogIiIsICAvLyDmtYHnqIvlrp7kvovnvJblj7cNCiAgICAgIGZvcm1Db25mOiB7fSwgLy8g6buY6K6k6KGo5Y2V5pWw5o2uDQogICAgICB2YXJpYWJsZXM6IFtdLCAvLyDmtYHnqIvlj5jph4/mlbDmja4NCiAgICAgIHRhc2tUaXRsZTogbnVsbCwNCiAgICAgIHRhc2tPcGVuOiBmYWxzZSwNCiAgICAgIGNoZWNrU2VuZFVzZXI6IGZhbHNlLCAvLyDmmK/lkKblsZXnpLrkurrlkZjpgInmi6nmqKHlnZcNCiAgICAgIGNoZWNrU2VuZFJvbGU6IGZhbHNlLC8vIOaYr+WQpuWxleekuuinkuiJsumAieaLqeaooeWdlw0KICAgICAgY2hlY2tUeXBlOiAnJywgLy8g6YCJ5oup57G75Z6LDQogICAgICBjaGVja1ZhbHVlczogbnVsbCwgLy8g6YCJ5Lit5Lu75Yqh5o6l5pS25Lq65ZGY5pWw5o2uDQogICAgICBmb3JtRGF0YToge30sIC8vIOWhq+WGmeeahOihqOWNleaVsOaNriwNCiAgICAgIG11bHRpSW5zdGFuY2VWYXJzOiAnJyAvLyDkvJrnrb7oioLngrkNCiAgICB9Ow0KICB9LA0KICBjcmVhdGVkKCkgew0KICAgIHRoaXMuZGVwbG95SWQgPSB0aGlzLiRyb3V0ZS5xdWVyeSAmJiB0aGlzLiRyb3V0ZS5xdWVyeS5kZXBsb3lJZDsNCiAgICAvLyDliJ3lp4vljJbooajljZUNCiAgICB0aGlzLnByb2NEZWZJZCAgPSB0aGlzLiRyb3V0ZS5xdWVyeSAmJiB0aGlzLiRyb3V0ZS5xdWVyeS5wcm9jRGVmSWQ7DQogICAgLy8gdGhpcy5nZXROZXh0Rmxvd05vZGVCeVN0YXJ0KHRoaXMuZGVwbG95SWQpOw0KICAgIHRoaXMuZ2V0Rmxvd0Zvcm1EYXRhKHRoaXMuZGVwbG95SWQpOw0KICB9LA0KICBtZXRob2RzOiB7DQogICAgaGFuZGxlQ2xpY2sodGFiLCBldmVudCkgew0KICAgICAgaWYgKHRhYi5uYW1lID09PSAnMicpew0KICAgICAgICBmbG93WG1sQW5kTm9kZSh7ZGVwbG95SWQ6dGhpcy5kZXBsb3lJZH0pLnRoZW4ocmVzID0+IHsNCiAgICAgICAgICB0aGlzLmZsb3dEYXRhID0gcmVzLmRhdGE7DQogICAgICAgIH0pDQogICAgICB9DQogICAgfSwNCiAgICAvKiog5rWB56iL6KGo5Y2V5pWw5o2uICovDQogICAgZ2V0Rmxvd0Zvcm1EYXRhKGRlcGxveUlkKSB7DQogICAgICBjb25zdCB0aGF0ID0gdGhpcw0KICAgICAgY29uc3QgcGFyYW1zID0ge2RlcGxveUlkOiBkZXBsb3lJZH0NCiAgICAgIGZsb3dGb3JtRGF0YShwYXJhbXMpLnRoZW4ocmVzID0+IHsNCiAgICAgICAgLy8g5rWB56iL6L+H56iL5Lit5LiN5a2Y5Zyo5Yid5aeL5YyW6KGo5Y2VIOebtOaOpeivu+WPlueahOa1geeoi+WPmOmHj+S4reWtmOWCqOeahOihqOWNleWAvA0KICAgICAgICAgIHRoYXQuZm9ybUNvbmYgPSByZXMuZGF0YTsNCiAgICAgIH0pLmNhdGNoKHJlcyA9PiB7DQogICAgICAgIHRoaXMuZ29CYWNrKCk7DQogICAgICB9KQ0KICAgIH0sDQogICAgLyoqIOi/lOWbnumhtemdoiAqLw0KICAgIGdvQmFjaygpIHsNCiAgICAgIC8vIOWFs+mXreW9k+WJjeagh+etvumhteW5tui/lOWbnuS4iuS4qumhtemdog0KICAgICAgY29uc3Qgb2JqID0geyBwYXRoOiAiL3Rhc2svcHJvY2VzcyIsIHF1ZXJ5OiB7IHQ6IERhdGUubm93KCl9IH07DQogICAgICB0aGlzLiR0YWIuY2xvc2VPcGVuUGFnZShvYmopOw0KICAgIH0sDQogICAgLyoqIOaOpeaUtuWtkOe7hOS7tuS8oOeahOWAvCAqLw0KICAgIGdldERhdGEoZGF0YSkgew0KICAgICAgaWYgKGRhdGEpIHsNCiAgICAgICAgY29uc3QgdmFyaWFibGVzID0gW107DQogICAgICAgIGRhdGEuZmllbGRzLmZvckVhY2goaXRlbSA9PiB7DQogICAgICAgICAgbGV0IHZhcmlhYmxlRGF0YSA9IHt9Ow0KICAgICAgICAgIHZhcmlhYmxlRGF0YS5sYWJlbCA9IGl0ZW0uX19jb25maWdfXy5sYWJlbA0KICAgICAgICAgIC8vIOihqOWNleWAvOS4uuWkmuS4qumAiemhueaXtg0KICAgICAgICAgIGlmIChpdGVtLl9fY29uZmlnX18uZGVmYXVsdFZhbHVlIGluc3RhbmNlb2YgQXJyYXkpIHsNCiAgICAgICAgICAgIGNvbnN0IGFycmF5ID0gW107DQogICAgICAgICAgICBpdGVtLl9fY29uZmlnX18uZGVmYXVsdFZhbHVlLmZvckVhY2godmFsID0+IHsNCiAgICAgICAgICAgICAgYXJyYXkucHVzaCh2YWwpDQogICAgICAgICAgICB9KQ0KICAgICAgICAgICAgdmFyaWFibGVEYXRhLnZhbCA9IGFycmF5Ow0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICB2YXJpYWJsZURhdGEudmFsID0gaXRlbS5fX2NvbmZpZ19fLmRlZmF1bHRWYWx1ZQ0KICAgICAgICAgIH0NCiAgICAgICAgICB2YXJpYWJsZXMucHVzaCh2YXJpYWJsZURhdGEpDQogICAgICAgIH0pDQogICAgICAgIHRoaXMudmFyaWFibGVzID0gdmFyaWFibGVzOw0KICAgICAgfQ0KICAgIH0sDQogICAgLyoqIOeUs+ivt+a1geeoi+ihqOWNleaVsOaNruaPkOS6pCAqLw0KICAgIHN1Ym1pdEZvcm0oZm9ybURhdGEpIHsNCiAgICAgIC8vIOagueaNruW9k+WJjeS7u+WKoeaIluiAhea1geeoi+iuvuiuoemFjee9rueahOS4i+S4gOatpeiKgueCuSB0b2RvIOaaguaXtuacqua2ieWPiuWIsOiAg+iZkee9keWFs+OAgeihqOi+vuW8j+WSjOWkmuiKgueCueaDheWGtQ0KICAgICAgZ2V0TmV4dEZsb3dOb2RlQnlTdGFydCh7ZGVwbG95bWVudElkOiB0aGlzLmRlcGxveUlkLHZhcmlhYmxlczpmb3JtRGF0YS52YWxEYXRhfSkudGhlbihyZXMgPT4gew0KICAgICAgICBjb25zdCBkYXRhID0gcmVzLmRhdGE7DQogICAgICAgIGlmIChkYXRhKSB7DQogICAgICAgICAgdGhpcy5mb3JtRGF0YSA9IGZvcm1EYXRhOw0KICAgICAgICAgIGlmIChkYXRhLmRhdGFUeXBlID09PSAnZHluYW1pYycpIHsNCiAgICAgICAgICAgIGlmIChkYXRhLnR5cGUgPT09ICdhc3NpZ25lZScpIHsgLy8g5oyH5a6a5Lq65ZGYDQogICAgICAgICAgICAgIHRoaXMuY2hlY2tTZW5kVXNlciA9IHRydWU7DQogICAgICAgICAgICAgIHRoaXMuY2hlY2tUeXBlID0gInNpbmdsZSI7DQogICAgICAgICAgICB9IGVsc2UgaWYgKGRhdGEudHlwZSA9PT0gJ2NhbmRpZGF0ZVVzZXJzJykgeyAgLy8g5YCZ6YCJ5Lq65ZGYKOWkmuS4qikNCiAgICAgICAgICAgICAgdGhpcy5jaGVja1NlbmRVc2VyID0gdHJ1ZTsNCiAgICAgICAgICAgICAgdGhpcy5jaGVja1R5cGUgPSAibXVsdGlwbGUiOw0KICAgICAgICAgICAgfSBlbHNlIGlmIChkYXRhLnR5cGUgPT09ICdjYW5kaWRhdGVHcm91cHMnKSB7IC8vIOaMh+Wumue7hCjmiYDlsZ7op5LoibLmjqXmlLbku7vliqEpDQogICAgICAgICAgICAgIHRoaXMuY2hlY2tTZW5kUm9sZSA9IHRydWU7DQogICAgICAgICAgICB9IGVsc2UgeyAvLyDkvJrnrb4NCiAgICAgICAgICAgICAgLy8g5rWB56iL6K6+6K6h5oyH5a6a55qEIGVsZW1lbnRWYXJpYWJsZSDkvZzkuLrkvJrnrb7kurrlkZjliJfooagNCiAgICAgICAgICAgICAgdGhpcy5tdWx0aUluc3RhbmNlVmFycyA9IGRhdGEudmFyczsNCiAgICAgICAgICAgICAgdGhpcy5jaGVja1NlbmRVc2VyID0gdHJ1ZTsNCiAgICAgICAgICAgICAgdGhpcy5jaGVja1R5cGUgPSAibXVsdGlwbGUiOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdGhpcy50YXNrT3BlbiA9IHRydWU7DQogICAgICAgICAgICB0aGlzLnRhc2tUaXRsZSA9ICLpgInmi6nku7vliqHmjqXmlLYiOw0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICBjb25zdCB2YXJpYWJsZXMgPSB0aGlzLmZvcm1EYXRhLnZhbERhdGE7DQogICAgICAgICAgICBjb25zdCBmb3JtRGF0YSA9IHRoaXMuZm9ybURhdGEuZm9ybURhdGE7DQogICAgICAgICAgICBmb3JtRGF0YS5kaXNhYmxlZCA9IHRydWU7DQogICAgICAgICAgICBmb3JtRGF0YS5mb3JtQnRucyA9IGZhbHNlOw0KICAgICAgICAgICAgaWYgKHRoaXMucHJvY0RlZklkKSB7DQogICAgICAgICAgICAgIHZhcmlhYmxlcy52YXJpYWJsZXMgPSBmb3JtRGF0YTsNCiAgICAgICAgICAgICAgLy8g5ZCv5Yqo5rWB56iL5bm25bCG6KGo5Y2V5pWw5o2u5Yqg5YWl5rWB56iL5Y+Y6YePDQogICAgICAgICAgICAgIGRlZmluaXRpb25TdGFydCh0aGlzLnByb2NEZWZJZCwgSlNPTi5zdHJpbmdpZnkodmFyaWFibGVzKSkudGhlbihyZXMgPT4gew0KICAgICAgICAgICAgICAgIHRoaXMuJG1vZGFsLm1zZ1N1Y2Nlc3MocmVzLm1zZyk7DQogICAgICAgICAgICAgICAgdGhpcy5nb0JhY2soKTsNCiAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgIH0pDQogICAgfSwNCiAgICAvKiog5o+Q5Lqk5rWB56iLICovDQogICAgc3VibWl0VGFzaygpIHsNCiAgICAgIGlmICghdGhpcy5jaGVja1ZhbHVlcyAmJiB0aGlzLmNoZWNrU2VuZFVzZXIpew0KICAgICAgICB0aGlzLiRtb2RhbC5tc2dFcnJvcigi6K+36YCJ5oup5Lu75Yqh5o6l5pS2ISIpOw0KICAgICAgICByZXR1cm47DQogICAgICB9DQogICAgICBpZiAoIXRoaXMuY2hlY2tWYWx1ZXMgJiYgdGhpcy5jaGVja1NlbmRSb2xlKXsNCiAgICAgICAgdGhpcy4kbW9kYWwubXNnRXJyb3IoIuivt+mAieaLqea1geeoi+aOpeaUtuinkuiJsue7hCEiKTsNCiAgICAgICAgcmV0dXJuOw0KICAgICAgfQ0KICAgICAgaWYgKHRoaXMuZm9ybURhdGEpIHsNCiAgICAgICAgY29uc3QgdmFyaWFibGVzID0gdGhpcy5mb3JtRGF0YS52YWxEYXRhOw0KICAgICAgICBjb25zdCBmb3JtRGF0YSA9IHRoaXMuZm9ybURhdGEuZm9ybURhdGE7DQogICAgICAgIC8vIOihqOWNleaYr+WQpuemgeeUqA0KICAgICAgICBmb3JtRGF0YS5kaXNhYmxlZCA9IHRydWU7DQogICAgICAgIC8vIOaYr+WQpuaYvuekuuaMiemSrg0KICAgICAgICBmb3JtRGF0YS5mb3JtQnRucyA9IGZhbHNlOw0KICAgICAgICB2YXJpYWJsZXMudmFyaWFibGVzID0gZm9ybURhdGE7DQogICAgICAgIGlmICh0aGlzLm11bHRpSW5zdGFuY2VWYXJzKSB7DQogICAgICAgICAgdGhpcy4kc2V0KHZhcmlhYmxlcywgdGhpcy5tdWx0aUluc3RhbmNlVmFycywgdGhpcy5jaGVja1ZhbHVlcyk7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgdGhpcy4kc2V0KHZhcmlhYmxlcywgImFwcHJvdmFsIiwgdGhpcy5jaGVja1ZhbHVlcyk7DQogICAgICAgIH0NCiAgICAgICAgY29uc29sZS5sb2codmFyaWFibGVzLCLmtYHnqIvlj5Hotbfmj5DkuqTooajljZXmlbDmja4iKQ0KICAgICAgICAvLyDlkK/liqjmtYHnqIvlubblsIbooajljZXmlbDmja7liqDlhaXmtYHnqIvlj5jph48NCiAgICAgICAgZGVmaW5pdGlvblN0YXJ0KHRoaXMucHJvY0RlZklkLCBKU09OLnN0cmluZ2lmeSh2YXJpYWJsZXMpKS50aGVuKHJlcyA9PiB7DQogICAgICAgICAgdGhpcy4kbW9kYWwubXNnU3VjY2VzcyhyZXMubXNnKTsNCiAgICAgICAgICB0aGlzLmdvQmFjaygpOw0KICAgICAgICB9KQ0KICAgICAgfQ0KICAgIH0sDQogICAgLyoqIOagueaNruW9k+WJjeS7u+WKoeiOt+WPlua1geeoi+iuvuiuoemFjee9rueahOS4i+S4gOatpeiKgueCuSAqLw0KICAgIGdldE5leHRGbG93Tm9kZUJ5U3RhcnQoZGVwbG95bWVudElkLHZhcmlhYmxlcykgew0KICAgICAgLy8g5qC55o2u5b2T5YmN5Lu75Yqh5oiW6ICF5rWB56iL6K6+6K6h6YWN572u55qE5LiL5LiA5q2l6IqC54K5IHRvZG8g5pqC5pe25pyq5raJ5Y+K5Yiw6ICD6JmR572R5YWz44CB6KGo6L6+5byP5ZKM5aSa6IqC54K55oOF5Ya1DQogICAgICBnZXROZXh0Rmxvd05vZGVCeVN0YXJ0KHtkZXBsb3ltZW50SWQ6IGRlcGxveW1lbnRJZCx2YXJpYWJsZXM6dmFyaWFibGVzfSkudGhlbihyZXMgPT4gew0KICAgICAgICBjb25zdCBkYXRhID0gcmVzLmRhdGE7DQogICAgICAgIGlmIChkYXRhKSB7DQogICAgICAgICAgaWYgKGRhdGEudHlwZSA9PT0gJ2Fzc2lnbmVlJykgeyAvLyDmjIflrprkurrlkZgNCiAgICAgICAgICAgIHRoaXMuY2hlY2tTZW5kVXNlciA9IHRydWU7DQogICAgICAgICAgICB0aGlzLmNoZWNrVHlwZSA9ICJzaW5nbGUiOw0KICAgICAgICAgIH0gZWxzZSBpZiAoZGF0YS50eXBlID09PSAnY2FuZGlkYXRlVXNlcnMnKSB7ICAvLyDlgJnpgInkurrlkZgo5aSa5LiqKQ0KICAgICAgICAgICAgdGhpcy5jaGVja1NlbmRVc2VyID0gdHJ1ZTsNCiAgICAgICAgICAgIHRoaXMuY2hlY2tUeXBlID0gIm11bHRpcGxlIjsNCiAgICAgICAgICB9IGVsc2UgaWYgKGRhdGEudHlwZSA9PT0gJ2NhbmRpZGF0ZUdyb3VwcycpIHsgLy8g5oyH5a6a57uEKOaJgOWxnuinkuiJsuaOpeaUtuS7u+WKoSkNCiAgICAgICAgICAgIHRoaXMuY2hlY2tTZW5kUm9sZSA9IHRydWU7DQogICAgICAgICAgfSBlbHNlIGlmIChkYXRhLnR5cGUgPT09ICdtdWx0aUluc3RhbmNlJykgeyAvLyDkvJrnrb4/DQogICAgICAgICAgICAvLyDmtYHnqIvorr7orqHmjIflrprnmoQgZWxlbWVudFZhcmlhYmxlIOS9nOS4uuS8muetvuS6uuWRmOWIl+ihqA0KICAgICAgICAgICAgdGhpcy5tdWx0aUluc3RhbmNlVmFycyA9IGRhdGEudmFyczsNCiAgICAgICAgICAgIHRoaXMuY2hlY2tTZW5kVXNlciA9IHRydWU7DQogICAgICAgICAgICB0aGlzLmNoZWNrVHlwZSA9ICJtdWx0aXBsZSI7DQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICB9KQ0KICAgIH0sDQogICAgLy8g55So5oi35L+h5oGv6YCJ5Lit5pWw5o2uDQogICAgaGFuZGxlVXNlclNlbGVjdChzZWxlY3Rpb24pIHsNCiAgICAgIGlmIChzZWxlY3Rpb24pIHsNCiAgICAgICAgaWYgKHNlbGVjdGlvbiBpbnN0YW5jZW9mIEFycmF5KSB7DQogICAgICAgICAgY29uc3Qgc2VsZWN0VmFsID0gc2VsZWN0aW9uLm1hcChpdGVtID0+IGl0ZW0udXNlcklkKTsNCiAgICAgICAgICBpZiAodGhpcy5tdWx0aUluc3RhbmNlVmFycykgew0KICAgICAgICAgICAgdGhpcy5jaGVja1ZhbHVlcyA9IHNlbGVjdFZhbDsNCiAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgdGhpcy5jaGVja1ZhbHVlcyA9IHNlbGVjdFZhbC5qb2luKCcsJyk7DQogICAgICAgICAgfQ0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIHRoaXMuY2hlY2tWYWx1ZXMgPSBzZWxlY3Rpb24udXNlcklkOw0KICAgICAgICB9DQogICAgICB9DQogICAgfSwNCiAgICAvLyDop5LoibLkv6Hmga/pgInkuK3mlbDmja4NCiAgICBoYW5kbGVSb2xlU2VsZWN0KHNlbGVjdGlvbikgew0KICAgICAgaWYgKHNlbGVjdGlvbikgew0KICAgICAgICBpZiAoc2VsZWN0aW9uIGluc3RhbmNlb2YgQXJyYXkpIHsNCiAgICAgICAgICBjb25zdCBzZWxlY3RWYWwgPSBzZWxlY3Rpb24ubWFwKGl0ZW0gPT4gaXRlbS5yb2xlSWQpOw0KICAgICAgICAgIHRoaXMuY2hlY2tWYWx1ZXMgPSBzZWxlY3RWYWwuam9pbignLCcpDQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgdGhpcy5jaGVja1ZhbHVlcyA9IHNlbGVjdGlvbjsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0sDQogIH0NCn07DQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoCA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/flowable/task/myProcess/send","sourcesContent":["<template>\r\n  <div class=\"app-container\">\r\n    <el-card class=\"box-card\" >\r\n      <div slot=\"header\" class=\"clearfix\">\r\n        <span class=\"el-icon-document\">发起任务</span>\r\n        <el-button style=\"float: right;\" size=\"mini\" type=\"danger\" @click=\"goBack\">关闭</el-button>\r\n      </div>\r\n      <el-tabs  tab-position=\"top\" v-model=\"activeName\"  @tab-click=\"handleClick\">\r\n        <!--表单信息-->\r\n        <el-tab-pane label=\"表单信息\" name=\"1\">\r\n            <!--初始化流程加载表单信息-->\r\n            <el-col :span=\"16\" :offset=\"4\">\r\n              <div class=\"test-form\">\r\n                <parser :key=\"new Date().getTime()\" :form-conf=\"formConf\" @submit=\"submitForm\" ref=\"parser\" @getData=\"getData\" />\r\n              </div>\r\n            </el-col>\r\n        </el-tab-pane>\r\n        <!--流程图-->\r\n        <el-tab-pane label=\"流程图\" name=\"2\">\r\n           <flow :flowData=\"flowData\"/>\r\n        </el-tab-pane>\r\n      </el-tabs>\r\n      <!--选择流程接收人-->\r\n      <el-dialog :title=\"taskTitle\" :visible.sync=\"taskOpen\" width=\"65%\" append-to-body>\r\n        <flow-user v-if=\"checkSendUser\" :checkType=\"checkType\"  @handleUserSelect=\"handleUserSelect\"/>\r\n        <flow-role v-if=\"checkSendRole\" @handleRoleSelect=\"handleRoleSelect\"/>\r\n        <span slot=\"footer\" class=\"dialog-footer\">\r\n          <el-button @click=\"taskOpen = false\">取 消</el-button>\r\n          <el-button type=\"primary\" @click=\"submitTask\">提 交</el-button>\r\n        </span>\r\n      </el-dialog>\r\n    </el-card>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Parser from '@/components/parser/Parser'\r\nimport {definitionStart, flowXmlAndNode} from \"@/api/flowable/definition\";\r\nimport flow from './flow'\r\nimport {flowFormData} from \"@/api/flowable/process\";\r\nimport {getNextFlowNodeByStart} from \"@/api/flowable/todo\";\r\nimport FlowUser from '@/components/flow/User'\r\nimport FlowRole from '@/components/flow/Role'\r\n\r\nexport default {\r\n  name: \"Record\",\r\n  components: {\r\n    Parser,\r\n    flow,\r\n    FlowUser,\r\n    FlowRole,\r\n  },\r\n  props: {},\r\n  data() {\r\n    return {\r\n      // 模型xml数据\r\n      flowData: {},\r\n      activeName: '1', // 切换tab标签\r\n      defaultProps: {\r\n        children: \"children\",\r\n        label: \"label\"\r\n      },\r\n      // 查询参数\r\n      queryParams: {\r\n        deptId: undefined\r\n      },\r\n      // 遮罩层\r\n      loading: true,\r\n      deployId: \"\",  // 流程定义编号\r\n      procDefId: \"\",  // 流程实例编号\r\n      formConf: {}, // 默认表单数据\r\n      variables: [], // 流程变量数据\r\n      taskTitle: null,\r\n      taskOpen: false,\r\n      checkSendUser: false, // 是否展示人员选择模块\r\n      checkSendRole: false,// 是否展示角色选择模块\r\n      checkType: '', // 选择类型\r\n      checkValues: null, // 选中任务接收人员数据\r\n      formData: {}, // 填写的表单数据,\r\n      multiInstanceVars: '' // 会签节点\r\n    };\r\n  },\r\n  created() {\r\n    this.deployId = this.$route.query && this.$route.query.deployId;\r\n    // 初始化表单\r\n    this.procDefId  = this.$route.query && this.$route.query.procDefId;\r\n    // this.getNextFlowNodeByStart(this.deployId);\r\n    this.getFlowFormData(this.deployId);\r\n  },\r\n  methods: {\r\n    handleClick(tab, event) {\r\n      if (tab.name === '2'){\r\n        flowXmlAndNode({deployId:this.deployId}).then(res => {\r\n          this.flowData = res.data;\r\n        })\r\n      }\r\n    },\r\n    /** 流程表单数据 */\r\n    getFlowFormData(deployId) {\r\n      const that = this\r\n      const params = {deployId: deployId}\r\n      flowFormData(params).then(res => {\r\n        // 流程过程中不存在初始化表单 直接读取的流程变量中存储的表单值\r\n          that.formConf = res.data;\r\n      }).catch(res => {\r\n        this.goBack();\r\n      })\r\n    },\r\n    /** 返回页面 */\r\n    goBack() {\r\n      // 关闭当前标签页并返回上个页面\r\n      const obj = { path: \"/task/process\", query: { t: Date.now()} };\r\n      this.$tab.closeOpenPage(obj);\r\n    },\r\n    /** 接收子组件传的值 */\r\n    getData(data) {\r\n      if (data) {\r\n        const variables = [];\r\n        data.fields.forEach(item => {\r\n          let variableData = {};\r\n          variableData.label = item.__config__.label\r\n          // 表单值为多个选项时\r\n          if (item.__config__.defaultValue instanceof Array) {\r\n            const array = [];\r\n            item.__config__.defaultValue.forEach(val => {\r\n              array.push(val)\r\n            })\r\n            variableData.val = array;\r\n          } else {\r\n            variableData.val = item.__config__.defaultValue\r\n          }\r\n          variables.push(variableData)\r\n        })\r\n        this.variables = variables;\r\n      }\r\n    },\r\n    /** 申请流程表单数据提交 */\r\n    submitForm(formData) {\r\n      // 根据当前任务或者流程设计配置的下一步节点 todo 暂时未涉及到考虑网关、表达式和多节点情况\r\n      getNextFlowNodeByStart({deploymentId: this.deployId,variables:formData.valData}).then(res => {\r\n        const data = res.data;\r\n        if (data) {\r\n          this.formData = formData;\r\n          if (data.dataType === 'dynamic') {\r\n            if (data.type === 'assignee') { // 指定人员\r\n              this.checkSendUser = true;\r\n              this.checkType = \"single\";\r\n            } else if (data.type === 'candidateUsers') {  // 候选人员(多个)\r\n              this.checkSendUser = true;\r\n              this.checkType = \"multiple\";\r\n            } else if (data.type === 'candidateGroups') { // 指定组(所属角色接收任务)\r\n              this.checkSendRole = true;\r\n            } else { // 会签\r\n              // 流程设计指定的 elementVariable 作为会签人员列表\r\n              this.multiInstanceVars = data.vars;\r\n              this.checkSendUser = true;\r\n              this.checkType = \"multiple\";\r\n            }\r\n            this.taskOpen = true;\r\n            this.taskTitle = \"选择任务接收\";\r\n          } else {\r\n            const variables = this.formData.valData;\r\n            const formData = this.formData.formData;\r\n            formData.disabled = true;\r\n            formData.formBtns = false;\r\n            if (this.procDefId) {\r\n              variables.variables = formData;\r\n              // 启动流程并将表单数据加入流程变量\r\n              definitionStart(this.procDefId, JSON.stringify(variables)).then(res => {\r\n                this.$modal.msgSuccess(res.msg);\r\n                this.goBack();\r\n              })\r\n            }\r\n          }\r\n        }\r\n      })\r\n    },\r\n    /** 提交流程 */\r\n    submitTask() {\r\n      if (!this.checkValues && this.checkSendUser){\r\n        this.$modal.msgError(\"请选择任务接收!\");\r\n        return;\r\n      }\r\n      if (!this.checkValues && this.checkSendRole){\r\n        this.$modal.msgError(\"请选择流程接收角色组!\");\r\n        return;\r\n      }\r\n      if (this.formData) {\r\n        const variables = this.formData.valData;\r\n        const formData = this.formData.formData;\r\n        // 表单是否禁用\r\n        formData.disabled = true;\r\n        // 是否显示按钮\r\n        formData.formBtns = false;\r\n        variables.variables = formData;\r\n        if (this.multiInstanceVars) {\r\n          this.$set(variables, this.multiInstanceVars, this.checkValues);\r\n        } else {\r\n          this.$set(variables, \"approval\", this.checkValues);\r\n        }\r\n        console.log(variables,\"流程发起提交表单数据\")\r\n        // 启动流程并将表单数据加入流程变量\r\n        definitionStart(this.procDefId, JSON.stringify(variables)).then(res => {\r\n          this.$modal.msgSuccess(res.msg);\r\n          this.goBack();\r\n        })\r\n      }\r\n    },\r\n    /** 根据当前任务获取流程设计配置的下一步节点 */\r\n    getNextFlowNodeByStart(deploymentId,variables) {\r\n      // 根据当前任务或者流程设计配置的下一步节点 todo 暂时未涉及到考虑网关、表达式和多节点情况\r\n      getNextFlowNodeByStart({deploymentId: deploymentId,variables:variables}).then(res => {\r\n        const data = res.data;\r\n        if (data) {\r\n          if (data.type === 'assignee') { // 指定人员\r\n            this.checkSendUser = true;\r\n            this.checkType = \"single\";\r\n          } else if (data.type === 'candidateUsers') {  // 候选人员(多个)\r\n            this.checkSendUser = true;\r\n            this.checkType = \"multiple\";\r\n          } else if (data.type === 'candidateGroups') { // 指定组(所属角色接收任务)\r\n            this.checkSendRole = true;\r\n          } else if (data.type === 'multiInstance') { // 会签?\r\n            // 流程设计指定的 elementVariable 作为会签人员列表\r\n            this.multiInstanceVars = data.vars;\r\n            this.checkSendUser = true;\r\n            this.checkType = \"multiple\";\r\n          }\r\n        }\r\n      })\r\n    },\r\n    // 用户信息选中数据\r\n    handleUserSelect(selection) {\r\n      if (selection) {\r\n        if (selection instanceof Array) {\r\n          const selectVal = selection.map(item => item.userId);\r\n          if (this.multiInstanceVars) {\r\n            this.checkValues = selectVal;\r\n          } else {\r\n            this.checkValues = selectVal.join(',');\r\n          }\r\n        } else {\r\n          this.checkValues = selection.userId;\r\n        }\r\n      }\r\n    },\r\n    // 角色信息选中数据\r\n    handleRoleSelect(selection) {\r\n      if (selection) {\r\n        if (selection instanceof Array) {\r\n          const selectVal = selection.map(item => item.roleId);\r\n          this.checkValues = selectVal.join(',')\r\n        } else {\r\n          this.checkValues = selection;\r\n        }\r\n      }\r\n    },\r\n  }\r\n};\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.test-form {\r\n  margin: 15px auto;\r\n  width: 800px;\r\n  padding: 15px;\r\n}\r\n\r\n.clearfix:before,\r\n.clearfix:after {\r\n  display: table;\r\n  content: \"\";\r\n}\r\n.clearfix:after {\r\n  clear: both\r\n}\r\n\r\n.box-card {\r\n  width: 100%;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.el-tag + .el-tag {\r\n  margin-left: 10px;\r\n}\r\n\r\n.my-label {\r\n  background: #E1F3D8;\r\n}\r\n</style>\r\n"]}]}