{"remainingRequest":"E:\\visual_code_work_space\\ruoyi-ui\\node_modules\\babel-loader\\lib\\index.js!E:\\visual_code_work_space\\ruoyi-ui\\node_modules\\eslint-loader\\index.js??ref--13-0!E:\\visual_code_work_space\\ruoyi-ui\\src\\views\\tool\\preview\\main.js","dependencies":[{"path":"E:\\visual_code_work_space\\ruoyi-ui\\src\\views\\tool\\preview\\main.js","mtime":1693557459697},{"path":"E:\\visual_code_work_space\\ruoyi-ui\\babel.config.js","mtime":1693557459543},{"path":"E:\\visual_code_work_space\\ruoyi-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\visual_code_work_space\\ruoyi-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"E:\\visual_code_work_space\\ruoyi-ui\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKdmFyIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQgPSByZXF1aXJlKCJFOi92aXN1YWxfY29kZV93b3JrX3NwYWNlL3J1b3lpLXVpL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2ludGVyb3BSZXF1aXJlRGVmYXVsdC5qcyIpLmRlZmF1bHQ7CnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIik7CnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIik7CnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5jb25jYXQuanMiKTsKdmFyIF92dWUgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoInZ1ZSIpKTsKdmFyIF9sb2FkU2NyaXB0ID0gcmVxdWlyZSgiQC91dGlscy9sb2FkU2NyaXB0Iik7CnZhciBfYXhpb3MgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoImF4aW9zIikpOwp2YXIgX2luZGV4ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJAL2NvbXBvbmVudHMvdGlueW1jZS9pbmRleC52dWUiKSk7Cl92dWUuZGVmYXVsdC5jb21wb25lbnQoJ3RpbnltY2UnLCBfaW5kZXguZGVmYXVsdCk7Cl92dWUuZGVmYXVsdC5wcm90b3R5cGUuJGF4aW9zID0gX2F4aW9zLmRlZmF1bHQ7CnZhciAkcHJldmlld0FwcCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcmV2aWV3QXBwJyk7CnZhciBjaGlsZEF0dHJzID0gewogIGZpbGU6ICcnLAogIGRpYWxvZzogJyB3aWR0aD0iNjAwcHgiIGNsYXNzPSJkaWFsb2ctd2lkdGgiIHYtaWY9InZpc2libGUiIDp2aXNpYmxlLnN5bmM9InZpc2libGUiIDptb2RhbC1hcHBlbmQtdG8tYm9keT0iZmFsc2UiICcKfTsKd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCBpbml0LCBmYWxzZSk7CmZ1bmN0aW9uIGJ1aWxkTGlua3MobGlua3MpIHsKICB2YXIgc3RycyA9ICcnOwogIGxpbmtzLmZvckVhY2goZnVuY3Rpb24gKHVybCkgewogICAgc3RycyArPSAiPGxpbmsgaHJlZj1cIiIuY29uY2F0KHVybCwgIlwiIHJlbD1cInN0eWxlc2hlZXRcIj4iKTsKICB9KTsKICByZXR1cm4gc3RyczsKfQpmdW5jdGlvbiBpbml0KGV2ZW50KSB7CiAgaWYgKGV2ZW50LmRhdGEudHlwZSA9PT0gJ3JlZnJlc2hGcmFtZScpIHsKICAgIHZhciBjb2RlID0gZXZlbnQuZGF0YS5kYXRhOwogICAgdmFyIGF0dHJzID0gY2hpbGRBdHRyc1tjb2RlLmdlbmVyYXRlQ29uZi50eXBlXTsKICAgIHZhciBsaW5rcyA9ICcnOwogICAgaWYgKEFycmF5LmlzQXJyYXkoY29kZS5saW5rcykgJiYgY29kZS5saW5rcy5sZW5ndGggPiAwKSB7CiAgICAgIGxpbmtzID0gYnVpbGRMaW5rcyhjb2RlLmxpbmtzKTsKICAgIH0KICAgICRwcmV2aWV3QXBwLmlubmVySFRNTCA9ICIiLmNvbmNhdChsaW5rcywgIjxzdHlsZT4iKS5jb25jYXQoY29kZS5jc3MsICI8L3N0eWxlPjxkaXYgaWQ9XCJhcHBcIj48L2Rpdj4iKTsKICAgIGlmIChBcnJheS5pc0FycmF5KGNvZGUuc2NyaXB0cykgJiYgY29kZS5zY3JpcHRzLmxlbmd0aCA+IDApIHsKICAgICAgKDAsIF9sb2FkU2NyaXB0LmxvYWRTY3JpcHRRdWV1ZSkoY29kZS5zY3JpcHRzLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgbmV3VnVlKGF0dHJzLCBjb2RlLmpzLCBjb2RlLmh0bWwpOwogICAgICB9KTsKICAgIH0gZWxzZSB7CiAgICAgIG5ld1Z1ZShhdHRycywgY29kZS5qcywgY29kZS5odG1sKTsKICAgIH0KICB9Cn0KZnVuY3Rpb24gbmV3VnVlKGF0dHJzLCBtYWluLCBodG1sKSB7CiAgbWFpbiA9IGV2YWwoIigiLmNvbmNhdChtYWluLCAiKSIpKTsKICBtYWluLnRlbXBsYXRlID0gIjxkaXY+Ii5jb25jYXQoaHRtbCwgIjwvZGl2PiIpOwogIG5ldyBfdnVlLmRlZmF1bHQoewogICAgY29tcG9uZW50czogewogICAgICBjaGlsZDogbWFpbgogICAgfSwKICAgIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgdmlzaWJsZTogdHJ1ZQogICAgICB9OwogICAgfSwKICAgIHRlbXBsYXRlOiAiPGRpdj48Y2hpbGQgIi5jb25jYXQoYXR0cnMsICIvPjwvZGl2PiIpCiAgfSkuJG1vdW50KCcjYXBwJyk7Cn0="},{"version":3,"names":["_vue","_interopRequireDefault","require","_loadScript","_axios","_index","Vue","component","Tinymce","prototype","$axios","axios","$previewApp","document","getElementById","childAttrs","file","dialog","window","addEventListener","init","buildLinks","links","strs","forEach","url","concat","event","data","type","code","attrs","generateConf","Array","isArray","length","innerHTML","css","scripts","loadScriptQueue","newVue","js","html","main","eval","template","components","child","visible","$mount"],"sources":["E:/visual_code_work_space/ruoyi-ui/src/views/tool/preview/main.js"],"sourcesContent":["import Vue from 'vue'\r\nimport { loadScriptQueue } from '@/utils/loadScript'\r\nimport axios from 'axios'\r\nimport Tinymce from '@/components/tinymce/index.vue'\r\n\r\nVue.component('tinymce', Tinymce)\r\nVue.prototype.$axios = axios\r\n\r\nconst $previewApp = document.getElementById('previewApp')\r\nconst childAttrs = {\r\n  file: '',\r\n  dialog: ' width=\"600px\" class=\"dialog-width\" v-if=\"visible\" :visible.sync=\"visible\" :modal-append-to-body=\"false\" '\r\n}\r\n\r\nwindow.addEventListener('message', init, false)\r\n\r\nfunction buildLinks(links) {\r\n  let strs = ''\r\n  links.forEach(url => {\r\n    strs += `<link href=\"${url}\" rel=\"stylesheet\">`\r\n  })\r\n  return strs\r\n}\r\n\r\nfunction init(event) {\r\n  if (event.data.type === 'refreshFrame') {\r\n    const code = event.data.data\r\n    const attrs = childAttrs[code.generateConf.type]\r\n    let links = ''\r\n\r\n    if (Array.isArray(code.links) && code.links.length > 0) {\r\n      links = buildLinks(code.links)\r\n    }\r\n\r\n    $previewApp.innerHTML = `${links}<style>${code.css}</style><div id=\"app\"></div>`\r\n\r\n    if (Array.isArray(code.scripts) && code.scripts.length > 0) {\r\n      loadScriptQueue(code.scripts, () => {\r\n        newVue(attrs, code.js, code.html)\r\n      })\r\n    } else {\r\n      newVue(attrs, code.js, code.html)\r\n    }\r\n  }\r\n}\r\n\r\nfunction newVue(attrs, main, html) {\r\n  main = eval(`(${main})`)\r\n  main.template = `<div>${html}</div>`\r\n  new Vue({\r\n    components: {\r\n      child: main\r\n    },\r\n    data() {\r\n      return {\r\n        visible: true\r\n      }\r\n    },\r\n    template: `<div><child ${attrs}/></div>`\r\n  }).$mount('#app')\r\n}\r\n"],"mappings":";;;;;;AAAA,IAAAA,IAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,WAAA,GAAAD,OAAA;AACA,IAAAE,MAAA,GAAAH,sBAAA,CAAAC,OAAA;AACA,IAAAG,MAAA,GAAAJ,sBAAA,CAAAC,OAAA;AAEAI,YAAG,CAACC,SAAS,CAAC,SAAS,EAAEC,cAAO,CAAC;AACjCF,YAAG,CAACG,SAAS,CAACC,MAAM,GAAGC,cAAK;AAE5B,IAAMC,WAAW,GAAGC,QAAQ,CAACC,cAAc,CAAC,YAAY,CAAC;AACzD,IAAMC,UAAU,GAAG;EACjBC,IAAI,EAAE,EAAE;EACRC,MAAM,EAAE;AACV,CAAC;AAEDC,MAAM,CAACC,gBAAgB,CAAC,SAAS,EAAEC,IAAI,EAAE,KAAK,CAAC;AAE/C,SAASC,UAAUA,CAACC,KAAK,EAAE;EACzB,IAAIC,IAAI,GAAG,EAAE;EACbD,KAAK,CAACE,OAAO,CAAC,UAAAC,GAAG,EAAI;IACnBF,IAAI,oBAAAG,MAAA,CAAmBD,GAAG,2BAAqB;EACjD,CAAC,CAAC;EACF,OAAOF,IAAI;AACb;AAEA,SAASH,IAAIA,CAACO,KAAK,EAAE;EACnB,IAAIA,KAAK,CAACC,IAAI,CAACC,IAAI,KAAK,cAAc,EAAE;IACtC,IAAMC,IAAI,GAAGH,KAAK,CAACC,IAAI,CAACA,IAAI;IAC5B,IAAMG,KAAK,GAAGhB,UAAU,CAACe,IAAI,CAACE,YAAY,CAACH,IAAI,CAAC;IAChD,IAAIP,KAAK,GAAG,EAAE;IAEd,IAAIW,KAAK,CAACC,OAAO,CAACJ,IAAI,CAACR,KAAK,CAAC,IAAIQ,IAAI,CAACR,KAAK,CAACa,MAAM,GAAG,CAAC,EAAE;MACtDb,KAAK,GAAGD,UAAU,CAACS,IAAI,CAACR,KAAK,CAAC;IAChC;IAEAV,WAAW,CAACwB,SAAS,MAAAV,MAAA,CAAMJ,KAAK,aAAAI,MAAA,CAAUI,IAAI,CAACO,GAAG,mCAA8B;IAEhF,IAAIJ,KAAK,CAACC,OAAO,CAACJ,IAAI,CAACQ,OAAO,CAAC,IAAIR,IAAI,CAACQ,OAAO,CAACH,MAAM,GAAG,CAAC,EAAE;MAC1D,IAAAI,2BAAe,EAACT,IAAI,CAACQ,OAAO,EAAE,YAAM;QAClCE,MAAM,CAACT,KAAK,EAAED,IAAI,CAACW,EAAE,EAAEX,IAAI,CAACY,IAAI,CAAC;MACnC,CAAC,CAAC;IACJ,CAAC,MAAM;MACLF,MAAM,CAACT,KAAK,EAAED,IAAI,CAACW,EAAE,EAAEX,IAAI,CAACY,IAAI,CAAC;IACnC;EACF;AACF;AAEA,SAASF,MAAMA,CAACT,KAAK,EAAEY,IAAI,EAAED,IAAI,EAAE;EACjCC,IAAI,GAAGC,IAAI,KAAAlB,MAAA,CAAKiB,IAAI,MAAG,CAAC;EACxBA,IAAI,CAACE,QAAQ,WAAAnB,MAAA,CAAWgB,IAAI,WAAQ;EACpC,IAAIpC,YAAG,CAAC;IACNwC,UAAU,EAAE;MACVC,KAAK,EAAEJ;IACT,CAAC;IACDf,IAAI,WAAAA,KAAA,EAAG;MACL,OAAO;QACLoB,OAAO,EAAE;MACX,CAAC;IACH,CAAC;IACDH,QAAQ,iBAAAnB,MAAA,CAAiBK,KAAK;EAChC,CAAC,CAAC,CAACkB,MAAM,CAAC,MAAM,CAAC;AACnB"}]}