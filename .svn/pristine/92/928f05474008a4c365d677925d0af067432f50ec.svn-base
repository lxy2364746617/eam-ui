{"remainingRequest":"E:\\qrhpro\\cms-eam-ui\\node_modules\\babel-loader\\lib\\index.js!E:\\qrhpro\\cms-eam-ui\\node_modules\\eslint-loader\\index.js??ref--13-0!E:\\qrhpro\\cms-eam-ui\\src\\utils\\db.js","dependencies":[{"path":"E:\\qrhpro\\cms-eam-ui\\src\\utils\\db.js","mtime":1693791859996},{"path":"E:\\qrhpro\\cms-eam-ui\\babel.config.js","mtime":1693791556521},{"path":"E:\\qrhpro\\cms-eam-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1693791616229},{"path":"E:\\qrhpro\\cms-eam-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":1693791596985},{"path":"E:\\qrhpro\\cms-eam-ui\\node_modules\\eslint-loader\\index.js","mtime":1693791700180}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmdldERyYXdpbmdMaXN0ID0gZ2V0RHJhd2luZ0xpc3Q7CmV4cG9ydHMuZ2V0Rm9ybUNvbmYgPSBnZXRGb3JtQ29uZjsKZXhwb3J0cy5nZXRJZEdsb2JhbCA9IGdldElkR2xvYmFsOwpleHBvcnRzLmdldFRyZWVOb2RlSWQgPSBnZXRUcmVlTm9kZUlkOwpleHBvcnRzLnNhdmVEcmF3aW5nTGlzdCA9IHNhdmVEcmF3aW5nTGlzdDsKZXhwb3J0cy5zYXZlRm9ybUNvbmYgPSBzYXZlRm9ybUNvbmY7CmV4cG9ydHMuc2F2ZUlkR2xvYmFsID0gc2F2ZUlkR2xvYmFsOwpleHBvcnRzLnNhdmVUcmVlTm9kZUlkID0gc2F2ZVRyZWVOb2RlSWQ7CnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3Qua2V5cy5qcyIpOwpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuanNvbi5zdHJpbmdpZnkuanMiKTsKdmFyIERSQVdJTkdfSVRFTVMgPSAnZHJhd2luZ0l0ZW1zJzsKdmFyIERSQVdJTkdfSVRFTVNfVkVSU0lPTiA9ICcxLjInOwp2YXIgRFJBV0lOR19JVEVNU19WRVJTSU9OX0tFWSA9ICdEUkFXSU5HX0lURU1TX1ZFUlNJT04nOwp2YXIgRFJBV0lOR19JRCA9ICdpZEdsb2JhbCc7CnZhciBUUkVFX05PREVfSUQgPSAndHJlZU5vZGVJZCc7CnZhciBGT1JNX0NPTkYgPSAnZm9ybUNvbmYnOwpmdW5jdGlvbiBnZXREcmF3aW5nTGlzdCgpIHsKICAvLyDliqDlhaXnvJPlrZjniYjmnKznmoTmpoLlv7XvvIzkv53or4HnvJPlrZjmlbDmja7kuI7nqIvluo/ljLnphY0KICB2YXIgdmVyc2lvbiA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKERSQVdJTkdfSVRFTVNfVkVSU0lPTl9LRVkpOwogIGlmICh2ZXJzaW9uICE9PSBEUkFXSU5HX0lURU1TX1ZFUlNJT04pIHsKICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKERSQVdJTkdfSVRFTVNfVkVSU0lPTl9LRVksIERSQVdJTkdfSVRFTVNfVkVSU0lPTik7CiAgICBzYXZlRHJhd2luZ0xpc3QoW10pOwogICAgcmV0dXJuIG51bGw7CiAgfQogIHZhciBzdHIgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShEUkFXSU5HX0lURU1TKTsKICBpZiAoc3RyKSByZXR1cm4gSlNPTi5wYXJzZShzdHIpOwogIHJldHVybiBudWxsOwp9CmZ1bmN0aW9uIHNhdmVEcmF3aW5nTGlzdChsaXN0KSB7CiAgaWYgKEpTT04uc3RyaW5naWZ5KGxpc3QpKSB7CiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShEUkFXSU5HX0lURU1TLCBKU09OLnN0cmluZ2lmeShsaXN0KSk7CiAgfSBlbHNlIHsKICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKERSQVdJTkdfSVRFTVMsICdbXScpOwogIH0KfQpmdW5jdGlvbiBnZXRJZEdsb2JhbCgpIHsKICB2YXIgc3RyID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oRFJBV0lOR19JRCk7CiAgaWYgKHN0cikgcmV0dXJuIHBhcnNlSW50KHN0ciwgMTApOwogIHJldHVybiAxMDA7Cn0KZnVuY3Rpb24gc2F2ZUlkR2xvYmFsKGlkKSB7CiAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oRFJBV0lOR19JRCwgIiIuY29uY2F0KGlkKSk7Cn0KZnVuY3Rpb24gZ2V0VHJlZU5vZGVJZCgpIHsKICB2YXIgc3RyID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oVFJFRV9OT0RFX0lEKTsKICBpZiAoc3RyKSByZXR1cm4gcGFyc2VJbnQoc3RyLCAxMCk7CiAgcmV0dXJuIDEwMDsKfQpmdW5jdGlvbiBzYXZlVHJlZU5vZGVJZChpZCkgewogIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFRSRUVfTk9ERV9JRCwgIiIuY29uY2F0KGlkKSk7Cn0KZnVuY3Rpb24gZ2V0Rm9ybUNvbmYoKSB7CiAgdmFyIHN0ciA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKEZPUk1fQ09ORik7CiAgaWYgKHN0cikgcmV0dXJuIEpTT04ucGFyc2Uoc3RyKTsKICByZXR1cm4gbnVsbDsKfQpmdW5jdGlvbiBzYXZlRm9ybUNvbmYob2JqKSB7CiAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oRk9STV9DT05GLCBKU09OLnN0cmluZ2lmeShvYmopKTsKfQ=="},{"version":3,"names":["DRAWING_ITEMS","DRAWING_ITEMS_VERSION","DRAWING_ITEMS_VERSION_KEY","DRAWING_ID","TREE_NODE_ID","FORM_CONF","getDrawingList","version","localStorage","getItem","setItem","saveDrawingList","str","JSON","parse","list","stringify","getIdGlobal","parseInt","saveIdGlobal","id","concat","getTreeNodeId","saveTreeNodeId","getFormConf","saveFormConf","obj"],"sources":["E:/qrhpro/cms-eam-ui/src/utils/db.js"],"sourcesContent":["const DRAWING_ITEMS = 'drawingItems'\r\nconst DRAWING_ITEMS_VERSION = '1.2'\r\nconst DRAWING_ITEMS_VERSION_KEY = 'DRAWING_ITEMS_VERSION'\r\nconst DRAWING_ID = 'idGlobal'\r\nconst TREE_NODE_ID = 'treeNodeId'\r\nconst FORM_CONF = 'formConf'\r\n\r\nexport function getDrawingList() {\r\n  // 加入缓存版本的概念，保证缓存数据与程序匹配\r\n  const version = localStorage.getItem(DRAWING_ITEMS_VERSION_KEY)\r\n  if (version !== DRAWING_ITEMS_VERSION) {\r\n    localStorage.setItem(DRAWING_ITEMS_VERSION_KEY, DRAWING_ITEMS_VERSION)\r\n    saveDrawingList([])\r\n    return null\r\n  }\r\n\r\n  const str = localStorage.getItem(DRAWING_ITEMS)\r\n  if (str) return JSON.parse(str)\r\n  return null\r\n}\r\n\r\nexport function saveDrawingList(list) {\r\n  if (JSON.stringify(list)){\r\n    localStorage.setItem(DRAWING_ITEMS, JSON.stringify(list))\r\n  }else {\r\n    localStorage.setItem(DRAWING_ITEMS, '[]')\r\n  }\r\n}\r\n\r\nexport function getIdGlobal() {\r\n  const str = localStorage.getItem(DRAWING_ID)\r\n  if (str) return parseInt(str, 10)\r\n  return 100\r\n}\r\n\r\nexport function saveIdGlobal(id) {\r\n  localStorage.setItem(DRAWING_ID, `${id}`)\r\n}\r\n\r\nexport function getTreeNodeId() {\r\n  const str = localStorage.getItem(TREE_NODE_ID)\r\n  if (str) return parseInt(str, 10)\r\n  return 100\r\n}\r\n\r\nexport function saveTreeNodeId(id) {\r\n  localStorage.setItem(TREE_NODE_ID, `${id}`)\r\n}\r\n\r\nexport function getFormConf() {\r\n  const str = localStorage.getItem(FORM_CONF)\r\n  if (str) return JSON.parse(str)\r\n  return null\r\n}\r\n\r\nexport function saveFormConf(obj) {\r\n  localStorage.setItem(FORM_CONF, JSON.stringify(obj))\r\n}\r\n"],"mappings":";;;;;;;;;;;;;;;AAAA,IAAMA,aAAa,GAAG,cAAc;AACpC,IAAMC,qBAAqB,GAAG,KAAK;AACnC,IAAMC,yBAAyB,GAAG,uBAAuB;AACzD,IAAMC,UAAU,GAAG,UAAU;AAC7B,IAAMC,YAAY,GAAG,YAAY;AACjC,IAAMC,SAAS,GAAG,UAAU;AAErB,SAASC,cAAcA,CAAA,EAAG;EAC/B;EACA,IAAMC,OAAO,GAAGC,YAAY,CAACC,OAAO,CAACP,yBAAyB,CAAC;EAC/D,IAAIK,OAAO,KAAKN,qBAAqB,EAAE;IACrCO,YAAY,CAACE,OAAO,CAACR,yBAAyB,EAAED,qBAAqB,CAAC;IACtEU,eAAe,CAAC,EAAE,CAAC;IACnB,OAAO,IAAI;EACb;EAEA,IAAMC,GAAG,GAAGJ,YAAY,CAACC,OAAO,CAACT,aAAa,CAAC;EAC/C,IAAIY,GAAG,EAAE,OAAOC,IAAI,CAACC,KAAK,CAACF,GAAG,CAAC;EAC/B,OAAO,IAAI;AACb;AAEO,SAASD,eAAeA,CAACI,IAAI,EAAE;EACpC,IAAIF,IAAI,CAACG,SAAS,CAACD,IAAI,CAAC,EAAC;IACvBP,YAAY,CAACE,OAAO,CAACV,aAAa,EAAEa,IAAI,CAACG,SAAS,CAACD,IAAI,CAAC,CAAC;EAC3D,CAAC,MAAK;IACJP,YAAY,CAACE,OAAO,CAACV,aAAa,EAAE,IAAI,CAAC;EAC3C;AACF;AAEO,SAASiB,WAAWA,CAAA,EAAG;EAC5B,IAAML,GAAG,GAAGJ,YAAY,CAACC,OAAO,CAACN,UAAU,CAAC;EAC5C,IAAIS,GAAG,EAAE,OAAOM,QAAQ,CAACN,GAAG,EAAE,EAAE,CAAC;EACjC,OAAO,GAAG;AACZ;AAEO,SAASO,YAAYA,CAACC,EAAE,EAAE;EAC/BZ,YAAY,CAACE,OAAO,CAACP,UAAU,KAAAkB,MAAA,CAAKD,EAAE,CAAE,CAAC;AAC3C;AAEO,SAASE,aAAaA,CAAA,EAAG;EAC9B,IAAMV,GAAG,GAAGJ,YAAY,CAACC,OAAO,CAACL,YAAY,CAAC;EAC9C,IAAIQ,GAAG,EAAE,OAAOM,QAAQ,CAACN,GAAG,EAAE,EAAE,CAAC;EACjC,OAAO,GAAG;AACZ;AAEO,SAASW,cAAcA,CAACH,EAAE,EAAE;EACjCZ,YAAY,CAACE,OAAO,CAACN,YAAY,KAAAiB,MAAA,CAAKD,EAAE,CAAE,CAAC;AAC7C;AAEO,SAASI,WAAWA,CAAA,EAAG;EAC5B,IAAMZ,GAAG,GAAGJ,YAAY,CAACC,OAAO,CAACJ,SAAS,CAAC;EAC3C,IAAIO,GAAG,EAAE,OAAOC,IAAI,CAACC,KAAK,CAACF,GAAG,CAAC;EAC/B,OAAO,IAAI;AACb;AAEO,SAASa,YAAYA,CAACC,GAAG,EAAE;EAChClB,YAAY,CAACE,OAAO,CAACL,SAAS,EAAEQ,IAAI,CAACG,SAAS,CAACU,GAAG,CAAC,CAAC;AACtD"}]}