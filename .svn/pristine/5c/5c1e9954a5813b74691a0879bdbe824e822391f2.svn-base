{"remainingRequest":"E:\\qrhpro\\cms-eam-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\qrhpro\\cms-eam-ui\\src\\views\\tool\\build\\TreeNodeDialog.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\qrhpro\\cms-eam-ui\\src\\views\\tool\\build\\TreeNodeDialog.vue","mtime":1693791860679},{"path":"E:\\qrhpro\\cms-eam-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1693791616229},{"path":"E:\\qrhpro\\cms-eam-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":1693791596985},{"path":"E:\\qrhpro\\cms-eam-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1693791616229},{"path":"E:\\qrhpro\\cms-eam-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":1693791844037}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBpc051bWJlclN0ciB9IGZyb20gJ0AvdXRpbHMnDQppbXBvcnQgeyBnZXRUcmVlTm9kZUlkLCBzYXZlVHJlZU5vZGVJZCB9IGZyb20gJ0AvdXRpbHMvZGInDQoNCmNvbnN0IGlkID0gZ2V0VHJlZU5vZGVJZCgpDQoNCmV4cG9ydCBkZWZhdWx0IHsNCiAgY29tcG9uZW50czoge30sDQogIGluaGVyaXRBdHRyczogZmFsc2UsDQogIHByb3BzOiBbXSwNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgaWQsDQogICAgICBmb3JtRGF0YTogew0KICAgICAgICBsYWJlbDogdW5kZWZpbmVkLA0KICAgICAgICB2YWx1ZTogdW5kZWZpbmVkDQogICAgICB9LA0KICAgICAgcnVsZXM6IHsNCiAgICAgICAgbGFiZWw6IFsNCiAgICAgICAgICB7DQogICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwNCiAgICAgICAgICAgIG1lc3NhZ2U6ICfor7fovpPlhaXpgInpobnlkI0nLA0KICAgICAgICAgICAgdHJpZ2dlcjogJ2JsdXInDQogICAgICAgICAgfQ0KICAgICAgICBdLA0KICAgICAgICB2YWx1ZTogWw0KICAgICAgICAgIHsNCiAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLA0KICAgICAgICAgICAgbWVzc2FnZTogJ+ivt+i+k+WFpemAiemhueWAvCcsDQogICAgICAgICAgICB0cmlnZ2VyOiAnYmx1cicNCiAgICAgICAgICB9DQogICAgICAgIF0NCiAgICAgIH0sDQogICAgICBkYXRhVHlwZTogJ3N0cmluZycsDQogICAgICBkYXRhVHlwZU9wdGlvbnM6IFsNCiAgICAgICAgew0KICAgICAgICAgIGxhYmVsOiAn5a2X56ym5LiyJywNCiAgICAgICAgICB2YWx1ZTogJ3N0cmluZycNCiAgICAgICAgfSwNCiAgICAgICAgew0KICAgICAgICAgIGxhYmVsOiAn5pWw5a2XJywNCiAgICAgICAgICB2YWx1ZTogJ251bWJlcicNCiAgICAgICAgfQ0KICAgICAgXQ0KICAgIH0NCiAgfSwNCiAgY29tcHV0ZWQ6IHt9LA0KICB3YXRjaDogew0KICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBmdW5jLW5hbWVzDQogICAgJ2Zvcm1EYXRhLnZhbHVlJzogZnVuY3Rpb24gKHZhbCkgew0KICAgICAgdGhpcy5kYXRhVHlwZSA9IGlzTnVtYmVyU3RyKHZhbCkgPyAnbnVtYmVyJyA6ICdzdHJpbmcnDQogICAgfSwNCiAgICBpZCh2YWwpIHsNCiAgICAgIHNhdmVUcmVlTm9kZUlkKHZhbCkNCiAgICB9DQogIH0sDQogIGNyZWF0ZWQoKSB7fSwNCiAgbW91bnRlZCgpIHt9LA0KICBtZXRob2RzOiB7DQogICAgb25PcGVuKCkgew0KICAgICAgdGhpcy5mb3JtRGF0YSA9IHsNCiAgICAgICAgbGFiZWw6IHVuZGVmaW5lZCwNCiAgICAgICAgdmFsdWU6IHVuZGVmaW5lZA0KICAgICAgfQ0KICAgIH0sDQogICAgb25DbG9zZSgpIHt9LA0KICAgIGNsb3NlKCkgew0KICAgICAgdGhpcy4kZW1pdCgndXBkYXRlOnZpc2libGUnLCBmYWxzZSkNCiAgICB9LA0KICAgIGhhbmRlbENvbmZpcm0oKSB7DQogICAgICB0aGlzLiRyZWZzLmVsRm9ybS52YWxpZGF0ZSh2YWxpZCA9PiB7DQogICAgICAgIGlmICghdmFsaWQpIHJldHVybg0KICAgICAgICBpZiAodGhpcy5kYXRhVHlwZSA9PT0gJ251bWJlcicpIHsNCiAgICAgICAgICB0aGlzLmZvcm1EYXRhLnZhbHVlID0gcGFyc2VGbG9hdCh0aGlzLmZvcm1EYXRhLnZhbHVlKQ0KICAgICAgICB9DQogICAgICAgIHRoaXMuZm9ybURhdGEuaWQgPSB0aGlzLmlkKysNCiAgICAgICAgdGhpcy4kZW1pdCgnY29tbWl0JywgdGhpcy5mb3JtRGF0YSkNCiAgICAgICAgdGhpcy5jbG9zZSgpDQogICAgICB9KQ0KICAgIH0NCiAgfQ0KfQ0K"},{"version":3,"sources":["TreeNodeDialog.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"TreeNodeDialog.vue","sourceRoot":"src/views/tool/build","sourcesContent":["<template>\r\n  <div>\r\n    <el-dialog\r\n      v-bind=\"$attrs\"\r\n      :close-on-click-modal=\"false\"\r\n      :modal-append-to-body=\"false\"\r\n      v-on=\"$listeners\"\r\n      @open=\"onOpen\"\r\n      @close=\"onClose\"\r\n    >\r\n      <el-row :gutter=\"0\">\r\n        <el-form\r\n          ref=\"elForm\"\r\n          :model=\"formData\"\r\n          :rules=\"rules\"\r\n          size=\"small\"\r\n          label-width=\"100px\"\r\n        >\r\n          <el-col :span=\"24\">\r\n            <el-form-item\r\n              label=\"选项名\"\r\n              prop=\"label\"\r\n            >\r\n              <el-input\r\n                v-model=\"formData.label\"\r\n                placeholder=\"请输入选项名\"\r\n                clearable\r\n              />\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col :span=\"24\">\r\n            <el-form-item\r\n              label=\"选项值\"\r\n              prop=\"value\"\r\n            >\r\n              <el-input\r\n                v-model=\"formData.value\"\r\n                placeholder=\"请输入选项值\"\r\n                clearable\r\n              >\r\n                <el-select\r\n                  slot=\"append\"\r\n                  v-model=\"dataType\"\r\n                  :style=\"{width: '100px'}\"\r\n                >\r\n                  <el-option\r\n                    v-for=\"(item, index) in dataTypeOptions\"\r\n                    :key=\"index\"\r\n                    :label=\"item.label\"\r\n                    :value=\"item.value\"\r\n                    :disabled=\"item.disabled\"\r\n                  />\r\n                </el-select>\r\n              </el-input>\r\n            </el-form-item>\r\n          </el-col>\r\n        </el-form>\r\n      </el-row>\r\n      <div slot=\"footer\">\r\n        <el-button\r\n          type=\"primary\"\r\n          @click=\"handelConfirm\"\r\n        >\r\n          确定\r\n        </el-button>\r\n        <el-button @click=\"close\">\r\n          取消\r\n        </el-button>\r\n      </div>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { isNumberStr } from '@/utils'\r\nimport { getTreeNodeId, saveTreeNodeId } from '@/utils/db'\r\n\r\nconst id = getTreeNodeId()\r\n\r\nexport default {\r\n  components: {},\r\n  inheritAttrs: false,\r\n  props: [],\r\n  data() {\r\n    return {\r\n      id,\r\n      formData: {\r\n        label: undefined,\r\n        value: undefined\r\n      },\r\n      rules: {\r\n        label: [\r\n          {\r\n            required: true,\r\n            message: '请输入选项名',\r\n            trigger: 'blur'\r\n          }\r\n        ],\r\n        value: [\r\n          {\r\n            required: true,\r\n            message: '请输入选项值',\r\n            trigger: 'blur'\r\n          }\r\n        ]\r\n      },\r\n      dataType: 'string',\r\n      dataTypeOptions: [\r\n        {\r\n          label: '字符串',\r\n          value: 'string'\r\n        },\r\n        {\r\n          label: '数字',\r\n          value: 'number'\r\n        }\r\n      ]\r\n    }\r\n  },\r\n  computed: {},\r\n  watch: {\r\n    // eslint-disable-next-line func-names\r\n    'formData.value': function (val) {\r\n      this.dataType = isNumberStr(val) ? 'number' : 'string'\r\n    },\r\n    id(val) {\r\n      saveTreeNodeId(val)\r\n    }\r\n  },\r\n  created() {},\r\n  mounted() {},\r\n  methods: {\r\n    onOpen() {\r\n      this.formData = {\r\n        label: undefined,\r\n        value: undefined\r\n      }\r\n    },\r\n    onClose() {},\r\n    close() {\r\n      this.$emit('update:visible', false)\r\n    },\r\n    handelConfirm() {\r\n      this.$refs.elForm.validate(valid => {\r\n        if (!valid) return\r\n        if (this.dataType === 'number') {\r\n          this.formData.value = parseFloat(this.formData.value)\r\n        }\r\n        this.formData.id = this.id++\r\n        this.$emit('commit', this.formData)\r\n        this.close()\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n</style>\r\n"]}]}