{"remainingRequest":"E:\\visual_code_work_space\\cms-eam-ui\\node_modules\\babel-loader\\lib\\index.js!E:\\visual_code_work_space\\cms-eam-ui\\node_modules\\eslint-loader\\index.js??ref--13-0!E:\\visual_code_work_space\\cms-eam-ui\\src\\views\\tool\\preview\\main.js","dependencies":[{"path":"E:\\visual_code_work_space\\cms-eam-ui\\src\\views\\tool\\preview\\main.js","mtime":1693557459697},{"path":"E:\\visual_code_work_space\\cms-eam-ui\\babel.config.js","mtime":1693557459543},{"path":"E:\\visual_code_work_space\\cms-eam-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\visual_code_work_space\\cms-eam-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"E:\\visual_code_work_space\\cms-eam-ui\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKdmFyIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQgPSByZXF1aXJlKCJFOi92aXN1YWxfY29kZV93b3JrX3NwYWNlL2Ntcy1lYW0tdWkvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvaW50ZXJvcFJlcXVpcmVEZWZhdWx0LmpzIikuZGVmYXVsdDsKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiKTsKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiKTsKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmNvbmNhdC5qcyIpOwp2YXIgX3Z1ZSA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgidnVlIikpOwp2YXIgX2xvYWRTY3JpcHQgPSByZXF1aXJlKCJAL3V0aWxzL2xvYWRTY3JpcHQiKTsKdmFyIF9heGlvcyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiYXhpb3MiKSk7CnZhciBfaW5kZXggPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoIkAvY29tcG9uZW50cy90aW55bWNlL2luZGV4LnZ1ZSIpKTsKX3Z1ZS5kZWZhdWx0LmNvbXBvbmVudCgndGlueW1jZScsIF9pbmRleC5kZWZhdWx0KTsKX3Z1ZS5kZWZhdWx0LnByb3RvdHlwZS4kYXhpb3MgPSBfYXhpb3MuZGVmYXVsdDsKdmFyICRwcmV2aWV3QXBwID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ByZXZpZXdBcHAnKTsKdmFyIGNoaWxkQXR0cnMgPSB7CiAgZmlsZTogJycsCiAgZGlhbG9nOiAnIHdpZHRoPSI2MDBweCIgY2xhc3M9ImRpYWxvZy13aWR0aCIgdi1pZj0idmlzaWJsZSIgOnZpc2libGUuc3luYz0idmlzaWJsZSIgOm1vZGFsLWFwcGVuZC10by1ib2R5PSJmYWxzZSIgJwp9Owp3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIGluaXQsIGZhbHNlKTsKZnVuY3Rpb24gYnVpbGRMaW5rcyhsaW5rcykgewogIHZhciBzdHJzID0gJyc7CiAgbGlua3MuZm9yRWFjaChmdW5jdGlvbiAodXJsKSB7CiAgICBzdHJzICs9ICI8bGluayBocmVmPVwiIi5jb25jYXQodXJsLCAiXCIgcmVsPVwic3R5bGVzaGVldFwiPiIpOwogIH0pOwogIHJldHVybiBzdHJzOwp9CmZ1bmN0aW9uIGluaXQoZXZlbnQpIHsKICBpZiAoZXZlbnQuZGF0YS50eXBlID09PSAncmVmcmVzaEZyYW1lJykgewogICAgdmFyIGNvZGUgPSBldmVudC5kYXRhLmRhdGE7CiAgICB2YXIgYXR0cnMgPSBjaGlsZEF0dHJzW2NvZGUuZ2VuZXJhdGVDb25mLnR5cGVdOwogICAgdmFyIGxpbmtzID0gJyc7CiAgICBpZiAoQXJyYXkuaXNBcnJheShjb2RlLmxpbmtzKSAmJiBjb2RlLmxpbmtzLmxlbmd0aCA+IDApIHsKICAgICAgbGlua3MgPSBidWlsZExpbmtzKGNvZGUubGlua3MpOwogICAgfQogICAgJHByZXZpZXdBcHAuaW5uZXJIVE1MID0gIiIuY29uY2F0KGxpbmtzLCAiPHN0eWxlPiIpLmNvbmNhdChjb2RlLmNzcywgIjwvc3R5bGU+PGRpdiBpZD1cImFwcFwiPjwvZGl2PiIpOwogICAgaWYgKEFycmF5LmlzQXJyYXkoY29kZS5zY3JpcHRzKSAmJiBjb2RlLnNjcmlwdHMubGVuZ3RoID4gMCkgewogICAgICAoMCwgX2xvYWRTY3JpcHQubG9hZFNjcmlwdFF1ZXVlKShjb2RlLnNjcmlwdHMsIGZ1bmN0aW9uICgpIHsKICAgICAgICBuZXdWdWUoYXR0cnMsIGNvZGUuanMsIGNvZGUuaHRtbCk7CiAgICAgIH0pOwogICAgfSBlbHNlIHsKICAgICAgbmV3VnVlKGF0dHJzLCBjb2RlLmpzLCBjb2RlLmh0bWwpOwogICAgfQogIH0KfQpmdW5jdGlvbiBuZXdWdWUoYXR0cnMsIG1haW4sIGh0bWwpIHsKICBtYWluID0gZXZhbCgiKCIuY29uY2F0KG1haW4sICIpIikpOwogIG1haW4udGVtcGxhdGUgPSAiPGRpdj4iLmNvbmNhdChodG1sLCAiPC9kaXY+Iik7CiAgbmV3IF92dWUuZGVmYXVsdCh7CiAgICBjb21wb25lbnRzOiB7CiAgICAgIGNoaWxkOiBtYWluCiAgICB9LAogICAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICB2aXNpYmxlOiB0cnVlCiAgICAgIH07CiAgICB9LAogICAgdGVtcGxhdGU6ICI8ZGl2PjxjaGlsZCAiLmNvbmNhdChhdHRycywgIi8+PC9kaXY+IikKICB9KS4kbW91bnQoJyNhcHAnKTsKfQ=="},{"version":3,"names":["_vue","_interopRequireDefault","require","_loadScript","_axios","_index","Vue","component","Tinymce","prototype","$axios","axios","$previewApp","document","getElementById","childAttrs","file","dialog","window","addEventListener","init","buildLinks","links","strs","forEach","url","concat","event","data","type","code","attrs","generateConf","Array","isArray","length","innerHTML","css","scripts","loadScriptQueue","newVue","js","html","main","eval","template","components","child","visible","$mount"],"sources":["E:/visual_code_work_space/cms-eam-ui/src/views/tool/preview/main.js"],"sourcesContent":["import Vue from 'vue'\r\nimport { loadScriptQueue } from '@/utils/loadScript'\r\nimport axios from 'axios'\r\nimport Tinymce from '@/components/tinymce/index.vue'\r\n\r\nVue.component('tinymce', Tinymce)\r\nVue.prototype.$axios = axios\r\n\r\nconst $previewApp = document.getElementById('previewApp')\r\nconst childAttrs = {\r\n  file: '',\r\n  dialog: ' width=\"600px\" class=\"dialog-width\" v-if=\"visible\" :visible.sync=\"visible\" :modal-append-to-body=\"false\" '\r\n}\r\n\r\nwindow.addEventListener('message', init, false)\r\n\r\nfunction buildLinks(links) {\r\n  let strs = ''\r\n  links.forEach(url => {\r\n    strs += `<link href=\"${url}\" rel=\"stylesheet\">`\r\n  })\r\n  return strs\r\n}\r\n\r\nfunction init(event) {\r\n  if (event.data.type === 'refreshFrame') {\r\n    const code = event.data.data\r\n    const attrs = childAttrs[code.generateConf.type]\r\n    let links = ''\r\n\r\n    if (Array.isArray(code.links) && code.links.length > 0) {\r\n      links = buildLinks(code.links)\r\n    }\r\n\r\n    $previewApp.innerHTML = `${links}<style>${code.css}</style><div id=\"app\"></div>`\r\n\r\n    if (Array.isArray(code.scripts) && code.scripts.length > 0) {\r\n      loadScriptQueue(code.scripts, () => {\r\n        newVue(attrs, code.js, code.html)\r\n      })\r\n    } else {\r\n      newVue(attrs, code.js, code.html)\r\n    }\r\n  }\r\n}\r\n\r\nfunction newVue(attrs, main, html) {\r\n  main = eval(`(${main})`)\r\n  main.template = `<div>${html}</div>`\r\n  new Vue({\r\n    components: {\r\n      child: main\r\n    },\r\n    data() {\r\n      return {\r\n        visible: true\r\n      }\r\n    },\r\n    template: `<div><child ${attrs}/></div>`\r\n  }).$mount('#app')\r\n}\r\n"],"mappings":";;;;;;AAAA,IAAAA,IAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,WAAA,GAAAD,OAAA;AACA,IAAAE,MAAA,GAAAH,sBAAA,CAAAC,OAAA;AACA,IAAAG,MAAA,GAAAJ,sBAAA,CAAAC,OAAA;AAEAI,YAAG,CAACC,SAAS,CAAC,SAAS,EAAEC,cAAO,CAAC;AACjCF,YAAG,CAACG,SAAS,CAACC,MAAM,GAAGC,cAAK;AAE5B,IAAMC,WAAW,GAAGC,QAAQ,CAACC,cAAc,CAAC,YAAY,CAAC;AACzD,IAAMC,UAAU,GAAG;EACjBC,IAAI,EAAE,EAAE;EACRC,MAAM,EAAE;AACV,CAAC;AAEDC,MAAM,CAACC,gBAAgB,CAAC,SAAS,EAAEC,IAAI,EAAE,KAAK,CAAC;AAE/C,SAASC,UAAUA,CAACC,KAAK,EAAE;EACzB,IAAIC,IAAI,GAAG,EAAE;EACbD,KAAK,CAACE,OAAO,CAAC,UAAAC,GAAG,EAAI;IACnBF,IAAI,oBAAAG,MAAA,CAAmBD,GAAG,2BAAqB;EACjD,CAAC,CAAC;EACF,OAAOF,IAAI;AACb;AAEA,SAASH,IAAIA,CAACO,KAAK,EAAE;EACnB,IAAIA,KAAK,CAACC,IAAI,CAACC,IAAI,KAAK,cAAc,EAAE;IACtC,IAAMC,IAAI,GAAGH,KAAK,CAACC,IAAI,CAACA,IAAI;IAC5B,IAAMG,KAAK,GAAGhB,UAAU,CAACe,IAAI,CAACE,YAAY,CAACH,IAAI,CAAC;IAChD,IAAIP,KAAK,GAAG,EAAE;IAEd,IAAIW,KAAK,CAACC,OAAO,CAACJ,IAAI,CAACR,KAAK,CAAC,IAAIQ,IAAI,CAACR,KAAK,CAACa,MAAM,GAAG,CAAC,EAAE;MACtDb,KAAK,GAAGD,UAAU,CAACS,IAAI,CAACR,KAAK,CAAC;IAChC;IAEAV,WAAW,CAACwB,SAAS,MAAAV,MAAA,CAAMJ,KAAK,aAAAI,MAAA,CAAUI,IAAI,CAACO,GAAG,mCAA8B;IAEhF,IAAIJ,KAAK,CAACC,OAAO,CAACJ,IAAI,CAACQ,OAAO,CAAC,IAAIR,IAAI,CAACQ,OAAO,CAACH,MAAM,GAAG,CAAC,EAAE;MAC1D,IAAAI,2BAAe,EAACT,IAAI,CAACQ,OAAO,EAAE,YAAM;QAClCE,MAAM,CAACT,KAAK,EAAED,IAAI,CAACW,EAAE,EAAEX,IAAI,CAACY,IAAI,CAAC;MACnC,CAAC,CAAC;IACJ,CAAC,MAAM;MACLF,MAAM,CAACT,KAAK,EAAED,IAAI,CAACW,EAAE,EAAEX,IAAI,CAACY,IAAI,CAAC;IACnC;EACF;AACF;AAEA,SAASF,MAAMA,CAACT,KAAK,EAAEY,IAAI,EAAED,IAAI,EAAE;EACjCC,IAAI,GAAGC,IAAI,KAAAlB,MAAA,CAAKiB,IAAI,MAAG,CAAC;EACxBA,IAAI,CAACE,QAAQ,WAAAnB,MAAA,CAAWgB,IAAI,WAAQ;EACpC,IAAIpC,YAAG,CAAC;IACNwC,UAAU,EAAE;MACVC,KAAK,EAAEJ;IACT,CAAC;IACDf,IAAI,WAAAA,KAAA,EAAG;MACL,OAAO;QACLoB,OAAO,EAAE;MACX,CAAC;IACH,CAAC;IACDH,QAAQ,iBAAAnB,MAAA,CAAiBK,KAAK;EAChC,CAAC,CAAC,CAACkB,MAAM,CAAC,MAAM,CAAC;AACnB"}]}