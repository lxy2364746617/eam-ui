{"remainingRequest":"E:\\visual_code_work_space\\cms-eam-ui\\node_modules\\babel-loader\\lib\\index.js!E:\\visual_code_work_space\\cms-eam-ui\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\visual_code_work_space\\cms-eam-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\visual_code_work_space\\cms-eam-ui\\src\\components\\Process\\PropertyPanel.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\visual_code_work_space\\cms-eam-ui\\src\\components\\Process\\PropertyPanel.vue","mtime":1693557459603},{"path":"E:\\visual_code_work_space\\cms-eam-ui\\babel.config.js","mtime":1693557459543},{"path":"E:\\visual_code_work_space\\cms-eam-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\visual_code_work_space\\cms-eam-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"E:\\visual_code_work_space\\cms-eam-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\visual_code_work_space\\cms-eam-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKdmFyIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQgPSByZXF1aXJlKCJFOi92aXN1YWxfY29kZV93b3JrX3NwYWNlL2Ntcy1lYW0tdWkvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvaW50ZXJvcFJlcXVpcmVEZWZhdWx0LmpzIikuZGVmYXVsdDsKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmRlZmF1bHQgPSB2b2lkIDA7CnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pbmNsdWRlcy5qcyIpOwp2YXIgX3Rhc2sgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoIi4vY29tcG9uZW50cy9ub2RlUGFuZWwvdGFzayIpKTsKdmFyIF9zdGFydEVuZCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiLi9jb21wb25lbnRzL25vZGVQYW5lbC9zdGFydEVuZCIpKTsKdmFyIF9wcm9jZXNzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCIuL2NvbXBvbmVudHMvbm9kZVBhbmVsL3Byb2Nlc3MiKSk7CnZhciBfc2VxdWVuY2VGbG93ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCIuL2NvbXBvbmVudHMvbm9kZVBhbmVsL3NlcXVlbmNlRmxvdyIpKTsKdmFyIF9nYXRld2F5ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCIuL2NvbXBvbmVudHMvbm9kZVBhbmVsL2dhdGV3YXkiKSk7CnZhciBfemggPSByZXF1aXJlKCIuL2xhbmcvemgiKTsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KdmFyIF9kZWZhdWx0MiA9IHsKICBuYW1lOiAnUHJvcGVydHlQYW5lbCcsCiAgY29tcG9uZW50czogewogICAgcHJvY2Vzc1BhbmVsOiBfcHJvY2Vzcy5kZWZhdWx0LAogICAgdGFza1BhbmVsOiBfdGFzay5kZWZhdWx0LAogICAgc3RhcnRFbmRQYW5lbDogX3N0YXJ0RW5kLmRlZmF1bHQsCiAgICBzZXF1ZW5jZUZsb3dQYW5lbDogX3NlcXVlbmNlRmxvdy5kZWZhdWx0LAogICAgZ2F0ZXdheVBhbmVsOiBfZ2F0ZXdheS5kZWZhdWx0CiAgfSwKICBwcm9wczogewogICAgdXNlcnM6IHsKICAgICAgdHlwZTogQXJyYXksCiAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICB9LAogICAgZ3JvdXBzOiB7CiAgICAgIHR5cGU6IEFycmF5LAogICAgICByZXF1aXJlZDogdHJ1ZQogICAgfSwKICAgIGNhdGVnb3J5czogewogICAgICB0eXBlOiBBcnJheSwKICAgICAgcmVxdWlyZWQ6IHRydWUKICAgIH0sCiAgICBleHBzOiB7CiAgICAgIHR5cGU6IEFycmF5LAogICAgICBkZWZhdWx0OiBmdW5jdGlvbiBfZGVmYXVsdCgpIHsKICAgICAgICByZXR1cm4gW107CiAgICAgIH0KICAgIH0sCiAgICBtb2RlbGVyOiB7CiAgICAgIHR5cGU6IE9iamVjdCwKICAgICAgcmVxdWlyZWQ6IHRydWUKICAgIH0KICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBlbGVtZW50OiBudWxsLAogICAgICBmb3JtOiB7CiAgICAgICAgaWQ6ICcnLAogICAgICAgIG5hbWU6ICcnLAogICAgICAgIGNvbG9yOiBudWxsCiAgICAgIH0KICAgIH07CiAgfSwKICBjb21wdXRlZDogewogICAgZ2V0Q29tcG9uZW50OiBmdW5jdGlvbiBnZXRDb21wb25lbnQoKSB7CiAgICAgIHZhciBfdGhpcyRlbGVtZW50OwogICAgICB2YXIgdHlwZSA9IChfdGhpcyRlbGVtZW50ID0gdGhpcy5lbGVtZW50KSA9PT0gbnVsbCB8fCBfdGhpcyRlbGVtZW50ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyRlbGVtZW50LnR5cGU7CiAgICAgIGlmIChbJ2JwbW46SW50ZXJtZWRpYXRlVGhyb3dFdmVudCcsICdicG1uOlN0YXJ0RXZlbnQnLCAnYnBtbjpFbmRFdmVudCddLmluY2x1ZGVzKHR5cGUpKSB7CiAgICAgICAgcmV0dXJuICdzdGFydEVuZFBhbmVsJzsKICAgICAgfQogICAgICBpZiAoWydicG1uOlVzZXJUYXNrJywgJ2JwbW46VGFzaycsICdicG1uOlNlbmRUYXNrJywgJ2JwbW46UmVjZWl2ZVRhc2snLCAnYnBtbjpNYW51YWxUYXNrJywgJ2JwbW46QnVzaW5lc3NSdWxlVGFzaycsICdicG1uOlNlcnZpY2VUYXNrJywgJ2JwbW46U2NyaXB0VGFzaycKICAgICAgLy8gJ2JwbW46Q2FsbEFjdGl2aXR5JywKICAgICAgLy8gJ2JwbW46U3ViUHJvY2VzcycKICAgICAgXS5pbmNsdWRlcyh0eXBlKSkgewogICAgICAgIHJldHVybiAndGFza1BhbmVsJzsKICAgICAgfQogICAgICBpZiAodHlwZSA9PT0gJ2JwbW46U2VxdWVuY2VGbG93JykgewogICAgICAgIHJldHVybiAnc2VxdWVuY2VGbG93UGFuZWwnOwogICAgICB9CiAgICAgIGlmIChbJ2JwbW46SW5jbHVzaXZlR2F0ZXdheScsICdicG1uOkV4Y2x1c2l2ZUdhdGV3YXknLCAnYnBtbjpQYXJhbGxlbEdhdGV3YXknLCAnYnBtbjpFdmVudEJhc2VkR2F0ZXdheSddLmluY2x1ZGVzKHR5cGUpKSB7CiAgICAgICAgcmV0dXJuICdnYXRld2F5UGFuZWwnOwogICAgICB9CiAgICAgIGlmICh0eXBlID09PSAnYnBtbjpQcm9jZXNzJykgewogICAgICAgIHJldHVybiAncHJvY2Vzc1BhbmVsJzsKICAgICAgfQogICAgICByZXR1cm4gbnVsbDsKICAgIH0sCiAgICBub2RlTmFtZTogZnVuY3Rpb24gbm9kZU5hbWUoKSB7CiAgICAgIGlmICh0aGlzLmVsZW1lbnQpIHsKICAgICAgICB2YXIgYml6T2JqID0gdGhpcy5lbGVtZW50LmJ1c2luZXNzT2JqZWN0OwogICAgICAgIHZhciB0eXBlID0gYml6T2JqICE9PSBudWxsICYmIGJpek9iaiAhPT0gdm9pZCAwICYmIGJpek9iai5ldmVudERlZmluaXRpb25zID8gYml6T2JqLmV2ZW50RGVmaW5pdGlvbnNbMF0uJHR5cGUgOiBiaXpPYmouJHR5cGU7CiAgICAgICAgcmV0dXJuIF96aC5Ob2RlTmFtZVt0eXBlXSB8fCB0eXBlOwogICAgICB9CiAgICAgIHJldHVybiAnJzsKICAgIH0KICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB0aGlzLmhhbmRsZU1vZGVsZXIoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGhhbmRsZU1vZGVsZXI6IGZ1bmN0aW9uIGhhbmRsZU1vZGVsZXIoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIHRoaXMubW9kZWxlci5vbigncm9vdC5hZGRlZCcsIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgaWYgKGUuZWxlbWVudC50eXBlID09PSAnYnBtbjpQcm9jZXNzJykgewogICAgICAgICAgX3RoaXMuZWxlbWVudCA9IG51bGw7CiAgICAgICAgICBfdGhpcy4kbmV4dFRpY2soKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgX3RoaXMuZWxlbWVudCA9IGUuZWxlbWVudDsKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIHRoaXMubW9kZWxlci5vbignZWxlbWVudC5jbGljaycsIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgdmFyIGVsZW1lbnQgPSBlLmVsZW1lbnQ7CiAgICAgICAgaWYgKGVsZW1lbnQudHlwZSA9PT0gJ2JwbW46UHJvY2VzcycgfHwgZWxlbWVudC50eXBlID09PSAnYnBtbjpTZXF1ZW5jZUZsb3cnIHx8IGVsZW1lbnQudHlwZSA9PT0gJ2JwbW46RW5kRXZlbnQnKSB7CiAgICAgICAgICBfdGhpcy5lbGVtZW50ID0gZWxlbWVudDsKICAgICAgICB9CiAgICAgIH0pOwogICAgICB0aGlzLm1vZGVsZXIub24oJ3NlbGVjdGlvbi5jaGFuZ2VkJywgZnVuY3Rpb24gKGUpIHsKICAgICAgICAvLyBoYWNrIOWQjOexu+Wei+mdouadv+S4jeWIt+aWsAogICAgICAgIF90aGlzLmVsZW1lbnQgPSBudWxsOwogICAgICAgIHZhciBlbGVtZW50ID0gZS5uZXdTZWxlY3Rpb25bMF07CiAgICAgICAgaWYgKGVsZW1lbnQpIHsKICAgICAgICAgIF90aGlzLiRuZXh0VGljaygpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgICBfdGhpcy5lbGVtZW50ID0gZWxlbWVudDsKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgfQp9OwpleHBvcnRzLmRlZmF1bHQgPSBfZGVmYXVsdDI7"},{"version":3,"names":["_task","_interopRequireDefault","require","_startEnd","_process","_sequenceFlow","_gateway","_zh","name","components","processPanel","taskPanel","startEndPanel","sequenceFlowPanel","gatewayPanel","props","users","type","Array","required","groups","categorys","exps","default","_default","modeler","Object","data","element","form","id","color","computed","getComponent","_this$element","includes","nodeName","bizObj","businessObject","eventDefinitions","$type","NodeName","mounted","handleModeler","methods","_this","on","e","$nextTick","then","newSelection","exports","_default2"],"sources":["src/components/Process/PropertyPanel.vue"],"sourcesContent":["<template>\r\n  <div ref=\"propertyPanel\" class=\"property-panel\">\r\n    <div v-if=\"nodeName\" class=\"node-name\">{{ nodeName }}</div>\r\n    <component\r\n      :is=\"getComponent\"\r\n      v-if=\"element\"\r\n      :element=\"element\"\r\n      :modeler=\"modeler\"\r\n      :users=\"users\"\r\n      :groups=\"groups\"\r\n      :exps=\"exps\"\r\n      :categorys=\"categorys\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport taskPanel from './components/nodePanel/task'\r\nimport startEndPanel from './components/nodePanel/startEnd'\r\nimport processPanel from './components/nodePanel/process'\r\nimport sequenceFlowPanel from './components/nodePanel/sequenceFlow'\r\nimport gatewayPanel from './components/nodePanel/gateway'\r\nimport { NodeName } from './lang/zh'\r\n\r\nexport default {\r\n  name: 'PropertyPanel',\r\n  components: { processPanel, taskPanel, startEndPanel, sequenceFlowPanel, gatewayPanel },\r\n  props: {\r\n    users: {\r\n      type: Array,\r\n      required: true\r\n    },\r\n    groups: {\r\n      type: Array,\r\n      required: true\r\n    },\r\n    categorys: {\r\n      type: Array,\r\n      required: true\r\n    },\r\n    exps: {\r\n      type: Array,\r\n      default: () => []\r\n    },\r\n    modeler: {\r\n      type: Object,\r\n      required: true\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      element: null,\r\n      form: {\r\n        id: '',\r\n        name: '',\r\n        color: null\r\n      },\r\n    }\r\n  },\r\n  computed: {\r\n    getComponent() {\r\n      const type = this.element?.type\r\n      if (['bpmn:IntermediateThrowEvent', 'bpmn:StartEvent', 'bpmn:EndEvent'].includes(type)) {\r\n        return 'startEndPanel'\r\n      }\r\n      if ([\r\n        'bpmn:UserTask',\r\n        'bpmn:Task',\r\n        'bpmn:SendTask',\r\n        'bpmn:ReceiveTask',\r\n        'bpmn:ManualTask',\r\n        'bpmn:BusinessRuleTask',\r\n        'bpmn:ServiceTask',\r\n        'bpmn:ScriptTask'\r\n        // 'bpmn:CallActivity',\r\n        // 'bpmn:SubProcess'\r\n      ].includes(type)) {\r\n        return 'taskPanel'\r\n      }\r\n      if (type === 'bpmn:SequenceFlow') {\r\n        return 'sequenceFlowPanel'\r\n      }\r\n      if ([\r\n        'bpmn:InclusiveGateway',\r\n        'bpmn:ExclusiveGateway',\r\n        'bpmn:ParallelGateway',\r\n        'bpmn:EventBasedGateway'\r\n      ].includes(type)) {\r\n        return 'gatewayPanel'\r\n      }\r\n      if (type === 'bpmn:Process') {\r\n        return 'processPanel'\r\n      }\r\n      return null\r\n    },\r\n    nodeName() {\r\n      if (this.element) {\r\n        const bizObj = this.element.businessObject\r\n        const type = bizObj?.eventDefinitions\r\n          ? bizObj.eventDefinitions[0].$type\r\n          : bizObj.$type\r\n        return NodeName[type] || type\r\n      }\r\n      return ''\r\n    }\r\n  },\r\n  mounted() {\r\n    this.handleModeler()\r\n  },\r\n  methods: {\r\n    handleModeler() {\r\n      this.modeler.on('root.added', e => {\r\n        if (e.element.type === 'bpmn:Process') {\r\n          this.element = null\r\n          this.$nextTick().then(() => {\r\n            this.element = e.element\r\n          })\r\n        }\r\n      })\r\n      this.modeler.on('element.click', e => {\r\n        const { element } = e\r\n        if (element.type === 'bpmn:Process'\r\n          || element.type === 'bpmn:SequenceFlow'\r\n          || element.type === 'bpmn:EndEvent' ) {\r\n          this.element = element\r\n        }\r\n      })\r\n      this.modeler.on('selection.changed', e => {\r\n        // hack 同类型面板不刷新\r\n        this.element = null\r\n        const element = e.newSelection[0]\r\n        if (element) {\r\n          this.$nextTick().then(() => {\r\n            this.element = element\r\n          })\r\n        }\r\n      })\r\n    },\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n.property-panel {\r\n  padding: 20px 20px;\r\n  // reset element css\r\n  .el-form--label-top .el-form-item__label {\r\n    padding: 0;\r\n  }\r\n  // 设置设计器右侧表单高度\r\n  .el-form-item {\r\n    margin-bottom: 6px;\r\n  }\r\n  .tab-table .el-form-item {\r\n    margin-bottom: 16px;\r\n  }\r\n  .node-name{\r\n    border-bottom: 1px solid #ccc;\r\n    padding: 0 0 10px 20px;\r\n    margin-bottom: 10px;\r\n    font-size: 16px;\r\n    font-weight: bold;\r\n    color: #444;\r\n  }\r\n}\r\n</style>\r\n"],"mappings":"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"}]}