{"remainingRequest":"E:\\qrhpro\\cms-eam-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\qrhpro\\cms-eam-ui\\src\\components\\Process\\components\\nodePanel\\property\\executionListener.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\qrhpro\\cms-eam-ui\\src\\components\\Process\\components\\nodePanel\\property\\executionListener.vue","mtime":1693791859048},{"path":"E:\\qrhpro\\cms-eam-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1693791616229},{"path":"E:\\qrhpro\\cms-eam-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":1693791596985},{"path":"E:\\qrhpro\\cms-eam-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1693791616229},{"path":"E:\\qrhpro\\cms-eam-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":1693791844037}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgbWl4aW5QYW5lbCBmcm9tICcuLi8uLi8uLi9jb21tb24vbWl4aW5QYW5lbCcNCmltcG9ydCBsaXN0ZW5lclBhcmFtIGZyb20gJy4vbGlzdGVuZXJQYXJhbScNCmltcG9ydCBGbG93TGlzdGVuZXIgZnJvbSAnQC9jb21wb25lbnRzL2Zsb3cvTGlzdGVuZXInDQppbXBvcnQgTGlzdGVuZXJMaXN0IGZyb20gJ0AvY29tcG9uZW50cy9Qcm9jZXNzL2NvbXBvbmVudHMvbm9kZVBhbmVsL3Byb3BlcnR5L2xpc3RlbmVyTGlzdCcNCmV4cG9ydCBkZWZhdWx0IHsNCiAgY29tcG9uZW50czogeyBMaXN0ZW5lckxpc3QsIGxpc3RlbmVyUGFyYW0sIEZsb3dMaXN0ZW5lciB9LA0KICBtaXhpbnM6IFttaXhpblBhbmVsXSwNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgZGlhbG9nVmlzaWJsZTogdHJ1ZSwNCiAgICAgIGxpc3RlbmVyRGlhbG9nVmlzaWJsZTogZmFsc2UsDQogICAgICBzaG93UGFyYW1EaWFsb2c6IGZhbHNlLA0KICAgICAgbm93SW5kZXg6IG51bGwsDQogICAgICBmb3JtRGF0YTogew0KICAgICAgICBleGVjdXRpb25MaXN0ZW5lcjogW10NCiAgICAgIH0NCiAgICB9DQogIH0sDQogIGNvbXB1dGVkOiB7DQogICAgZm9ybUNvbmZpZygpIHsNCiAgICAgIC8vICAgY29uc3QgX3RoaXMgPSB0aGlzDQogICAgICByZXR1cm4gew0KICAgICAgICBpbmxpbmU6IGZhbHNlLA0KICAgICAgICBpdGVtOiBbDQogICAgICAgICAgew0KICAgICAgICAgICAgeFR5cGU6ICd0YWJzJywNCiAgICAgICAgICAgIHRhYnM6IFsNCiAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIGxhYmVsOiAn5omn6KGM55uR5ZCs5ZmoJywNCiAgICAgICAgICAgICAgICBuYW1lOiAnZXhlY3V0aW9uTGlzdGVuZXInLA0KICAgICAgICAgICAgICAgIGNvbHVtbjogWw0KICAgICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICBsYWJlbDogJ+S6i+S7ticsDQogICAgICAgICAgICAgICAgICAgIG5hbWU6ICdldmVudCcsDQogICAgICAgICAgICAgICAgICAgIHdpZHRoOiAxODAsDQogICAgICAgICAgICAgICAgICAgIHJ1bGVzOiBbeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+mAieaLqScsIHRyaWdnZXI6IFsnYmx1cicsICdjaGFuZ2UnXSB9XSwNCiAgICAgICAgICAgICAgICAgICAgeFR5cGU6ICdzZWxlY3QnLA0KICAgICAgICAgICAgICAgICAgICBkaWM6IFsNCiAgICAgICAgICAgICAgICAgICAgICB7IGxhYmVsOiAnc3RhcnQnLCB2YWx1ZTogJ3N0YXJ0JyB9LA0KICAgICAgICAgICAgICAgICAgICAgIHsgbGFiZWw6ICdlbmQnLCB2YWx1ZTogJ2VuZCcgfSwNCiAgICAgICAgICAgICAgICAgICAgICB7IGxhYmVsOiAndGFrZScsIHZhbHVlOiAndGFrZScgfQ0KICAgICAgICAgICAgICAgICAgICBdDQogICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICBsYWJlbDogJ+exu+WeiycsDQogICAgICAgICAgICAgICAgICAgIG5hbWU6ICd0eXBlJywNCiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDE4MCwNCiAgICAgICAgICAgICAgICAgICAgcnVsZXM6IFt7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn6K+36YCJ5oupJywgdHJpZ2dlcjogWydibHVyJywgJ2NoYW5nZSddIH1dLA0KICAgICAgICAgICAgICAgICAgICB4VHlwZTogJ3NlbGVjdCcsDQogICAgICAgICAgICAgICAgICAgIGRpYzogWw0KICAgICAgICAgICAgICAgICAgICAgIHsgbGFiZWw6ICfnsbsnLCB2YWx1ZTogJ2NsYXNzJyB9LA0KICAgICAgICAgICAgICAgICAgICAgIHsgbGFiZWw6ICfooajovr7lvI8nLCB2YWx1ZTogJ2V4cHJlc3Npb24nIH0sDQogICAgICAgICAgICAgICAgICAgICAgeyBsYWJlbDogJ+WnlOaJmOihqOi+vuW8jycsIHZhbHVlOiAnZGVsZWdhdGVFeHByZXNzaW9uJyB9DQogICAgICAgICAgICAgICAgICAgIF0sDQogICAgICAgICAgICAgICAgICAgIHRvb2x0aXA6IGDnsbvvvJrnpLrkvosgY29tLmNvbXBhbnkuTXlDdXN0b21MaXN0ZW5lcu+8jOiHquWumuS5ieexu+W/hemhu+WunueOsCBvcmcuZmxvd2FibGUuZW5naW5lLmRlbGVnYXRlLkV4ZWN1dGlvbkxpc3RlbmVyIOaOpeWPoyA8YnIgLz4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIOihqOi+vuW8j++8muekuuS+iyBcJHtteU9iamVjdC5jYWxsTWV0aG9kKHRhc2ssIHRhc2suZXZlbnROYW1lKX0gPGJyIC8+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICDlp5TmiZjooajovr7lvI/vvJrnpLrkvosgXCR7bXlMaXN0ZW5lclNwcmluZ0JlYW59IO+8jOivpSBzcHJpbmdCZWFuIOmcgOimgeWunueOsCBvcmcuZmxvd2FibGUuZW5naW5lLmRlbGVnYXRlLkV4ZWN1dGlvbkxpc3RlbmVyIOaOpeWPow0KICAgICAgICAgICAgICAgICAgICBgDQogICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICBsYWJlbDogJ+WAvCcsDQogICAgICAgICAgICAgICAgICAgIG5hbWU6ICdjbGFzc05hbWUnLA0KICAgICAgICAgICAgICAgICAgICB4VHlwZTogJ2lucHV0JywNCiAgICAgICAgICAgICAgICAgICAgcnVsZXM6IFt7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn6K+36L6T5YWlJywgdHJpZ2dlcjogWydibHVyJywgJ2NoYW5nZSddIH1dDQogICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICB4VHlwZTogJ3Nsb3QnLA0KICAgICAgICAgICAgICAgICAgICBsYWJlbDogJ+WPguaVsCcsDQogICAgICAgICAgICAgICAgICAgIHdpZHRoOiAxMjAsDQogICAgICAgICAgICAgICAgICAgIHNsb3Q6IHRydWUsDQogICAgICAgICAgICAgICAgICAgIG5hbWU6ICdwYXJhbXMnDQogICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgXQ0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICBdDQogICAgICAgICAgfQ0KICAgICAgICBdDQogICAgICB9DQogICAgfQ0KICB9LA0KICBtb3VudGVkKCkgew0KICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHRoaXMuYWRkQnV0dG9uKCkpDQogICAgdGhpcy5mb3JtRGF0YS5leGVjdXRpb25MaXN0ZW5lciA9IHRoaXMuZWxlbWVudC5idXNpbmVzc09iamVjdC5leHRlbnNpb25FbGVtZW50cz8udmFsdWVzDQogICAgICAuZmlsdGVyKGl0ZW0gPT4gaXRlbS4kdHlwZSA9PT0gJ2Zsb3dhYmxlOkV4ZWN1dGlvbkxpc3RlbmVyJykNCiAgICAgIC5tYXAoaXRlbSA9PiB7DQogICAgICAgIGxldCB0eXBlDQogICAgICAgIGlmICgnY2xhc3MnIGluIGl0ZW0pIHR5cGUgPSAnY2xhc3MnDQogICAgICAgIGlmICgnZXhwcmVzc2lvbicgaW4gaXRlbSkgdHlwZSA9ICdleHByZXNzaW9uJw0KICAgICAgICBpZiAoJ2RlbGVnYXRlRXhwcmVzc2lvbicgaW4gaXRlbSkgdHlwZSA9ICdkZWxlZ2F0ZUV4cHJlc3Npb24nDQogICAgICAgIHJldHVybiB7DQogICAgICAgICAgZXZlbnQ6IGl0ZW0uZXZlbnQsDQogICAgICAgICAgdHlwZTogdHlwZSwNCiAgICAgICAgICBjbGFzc05hbWU6IGl0ZW1bdHlwZV0sDQogICAgICAgICAgcGFyYW1zOiBpdGVtLmZpZWxkcz8ubWFwKGZpZWxkID0+IHsNCiAgICAgICAgICAgIGxldCBmaWVsZFR5cGUNCiAgICAgICAgICAgIGlmICgnc3RyaW5nVmFsdWUnIGluIGZpZWxkKSBmaWVsZFR5cGUgPSAnc3RyaW5nVmFsdWUnDQogICAgICAgICAgICBpZiAoJ2V4cHJlc3Npb24nIGluIGZpZWxkKSBmaWVsZFR5cGUgPSAnZXhwcmVzc2lvbicNCiAgICAgICAgICAgIHJldHVybiB7DQogICAgICAgICAgICAgIG5hbWU6IGZpZWxkLm5hbWUsDQogICAgICAgICAgICAgIHR5cGU6IGZpZWxkVHlwZSwNCiAgICAgICAgICAgICAgdmFsdWU6IGZpZWxkW2ZpZWxkVHlwZV0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9KSA/PyBbXQ0KICAgICAgICB9DQogICAgICB9KSA/PyBbXQ0KICB9LA0KICBtZXRob2RzOiB7DQogICAgYWRkQnV0dG9uKCkgew0KICAgICAgY29uc3QgYnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJykNCiAgICAgIGJ1dHRvbi5pbm5lclRleHQgPSAn5YaF572u55uR5ZCs5ZmoJw0KICAgICAgYnV0dG9uLnNldEF0dHJpYnV0ZSgndHlwZScsICdidXR0b24nKQ0KICAgICAgYnV0dG9uLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAnZWwtYnV0dG9uIGVsLWJ1dHRvbi0tcHJpbWFyeSBlbC1idXR0b24tLW1pbmknKQ0KICAgICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5saXN0ZW5lckRpYWxvZ1Zpc2libGUgPSB0cnVlKQ0KICAgICAgY29uc3QgZGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BhbmUtZXhlY3V0aW9uTGlzdGVuZXInKQ0KICAgICAgY29uc3QgdGFibGUgPSBkaXYuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnZWwtdGFibGUnKVswXQ0KICAgICAgZGl2Lmluc2VydEJlZm9yZShidXR0b24sIHRhYmxlKQ0KICAgIH0sDQogICAgY29uZmlnUGFyYW0oaW5kZXgpIHsNCiAgICAgIHRoaXMubm93SW5kZXggPSBpbmRleA0KICAgICAgY29uc3Qgbm93T2JqID0gdGhpcy5mb3JtRGF0YS5leGVjdXRpb25MaXN0ZW5lcltpbmRleF0NCiAgICAgIGlmICghbm93T2JqLnBhcmFtcykgew0KICAgICAgICBub3dPYmoucGFyYW1zID0gW10NCiAgICAgIH0NCiAgICAgIHRoaXMuc2hvd1BhcmFtRGlhbG9nID0gdHJ1ZQ0KICAgIH0sDQogICAgZmluaXNoQ29uZmlnUGFyYW0ocGFyYW0pIHsNCiAgICAgIHRoaXMuc2hvd1BhcmFtRGlhbG9nID0gZmFsc2UNCiAgICAgIC8vIGhhY2sg5pWw6YeP5LiN5pu05paw6Zeu6aKYDQogICAgICBjb25zdCBjYWNoZSA9IHRoaXMuZm9ybURhdGEuZXhlY3V0aW9uTGlzdGVuZXJbdGhpcy5ub3dJbmRleF0NCiAgICAgIGNhY2hlLnBhcmFtcyA9IHBhcmFtDQogICAgICB0aGlzLiRzZXQodGhpcy5mb3JtRGF0YS5leGVjdXRpb25MaXN0ZW5lclt0aGlzLm5vd0luZGV4XSwgdGhpcy5ub3dJbmRleCwgY2FjaGUpDQogICAgICB0aGlzLm5vd0luZGV4ID0gbnVsbA0KICAgIH0sDQogICAgdXBkYXRlRWxlbWVudCgpIHsNCiAgICAgIGlmICh0aGlzLmZvcm1EYXRhLmV4ZWN1dGlvbkxpc3RlbmVyPy5sZW5ndGgpIHsNCiAgICAgICAgbGV0IGV4dGVuc2lvbkVsZW1lbnRzID0gdGhpcy5lbGVtZW50LmJ1c2luZXNzT2JqZWN0LmdldCgnZXh0ZW5zaW9uRWxlbWVudHMnKQ0KICAgICAgICBpZiAoIWV4dGVuc2lvbkVsZW1lbnRzKSB7DQogICAgICAgICAgZXh0ZW5zaW9uRWxlbWVudHMgPSB0aGlzLm1vZGVsZXIuZ2V0KCdtb2RkbGUnKS5jcmVhdGUoJ2JwbW46RXh0ZW5zaW9uRWxlbWVudHMnKQ0KICAgICAgICB9DQogICAgICAgIC8vIOa4hemZpOaXp+WAvA0KICAgICAgICBleHRlbnNpb25FbGVtZW50cy52YWx1ZXMgPSBleHRlbnNpb25FbGVtZW50cy52YWx1ZXM/LmZpbHRlcihpdGVtID0+IGl0ZW0uJHR5cGUgIT09ICdmbG93YWJsZTpFeGVjdXRpb25MaXN0ZW5lcicpID8/IFtdDQogICAgICAgIHRoaXMuZm9ybURhdGEuZXhlY3V0aW9uTGlzdGVuZXIuZm9yRWFjaChpdGVtID0+IHsNCiAgICAgICAgICBjb25zdCBleGVjdXRpb25MaXN0ZW5lciA9IHRoaXMubW9kZWxlci5nZXQoJ21vZGRsZScpLmNyZWF0ZSgnZmxvd2FibGU6RXhlY3V0aW9uTGlzdGVuZXInKQ0KICAgICAgICAgIGV4ZWN1dGlvbkxpc3RlbmVyWydldmVudCddID0gaXRlbS5ldmVudA0KICAgICAgICAgIGV4ZWN1dGlvbkxpc3RlbmVyW2l0ZW0udHlwZV0gPSBpdGVtLmNsYXNzTmFtZQ0KICAgICAgICAgIGlmIChpdGVtLnBhcmFtcyAmJiBpdGVtLnBhcmFtcy5sZW5ndGgpIHsNCiAgICAgICAgICAgIGl0ZW0ucGFyYW1zLmZvckVhY2goZmllbGQgPT4gew0KICAgICAgICAgICAgICBjb25zdCBmaWVsZEVsZW1lbnQgPSB0aGlzLm1vZGVsZXIuZ2V0KCdtb2RkbGUnKS5jcmVhdGUoJ2Zsb3dhYmxlOkZpZWxkJykNCiAgICAgICAgICAgICAgZmllbGRFbGVtZW50WyduYW1lJ10gPSBmaWVsZC5uYW1lDQogICAgICAgICAgICAgIGZpZWxkRWxlbWVudFtmaWVsZC50eXBlXSA9IGZpZWxkLnZhbHVlDQogICAgICAgICAgICAgIC8vIOazqOaEj++8mmZsb3dhYmxlLmpzb24g5Lit5a6a5LmJ55qEc3RyaW5n5ZKMZXhwcmVzc2lvbuexu+S4uuWwj+WGme+8jOS4jeeEtuS8muWSjOWOn+eUn+eahFN0cmluZ+exu+WGsueqge+8jOatpOWkhOS4umhhY2sNCiAgICAgICAgICAgICAgLy8gY29uc3QgdmFsdWVFbGVtZW50ID0gdGhpcy5tb2RlbGVyLmdldCgnbW9kZGxlJykuY3JlYXRlKGBmbG93YWJsZToke2ZpZWxkLnR5cGV9YCwgeyBib2R5OiBmaWVsZC52YWx1ZSB9KQ0KICAgICAgICAgICAgICAvLyBmaWVsZEVsZW1lbnRbZmllbGQudHlwZV0gPSB2YWx1ZUVsZW1lbnQNCiAgICAgICAgICAgICAgZXhlY3V0aW9uTGlzdGVuZXIuZ2V0KCdmaWVsZHMnKS5wdXNoKGZpZWxkRWxlbWVudCkNCiAgICAgICAgICAgIH0pDQogICAgICAgICAgfQ0KICAgICAgICAgIGV4dGVuc2lvbkVsZW1lbnRzLmdldCgndmFsdWVzJykucHVzaChleGVjdXRpb25MaXN0ZW5lcikNCiAgICAgICAgfSkNCiAgICAgICAgdGhpcy51cGRhdGVQcm9wZXJ0aWVzKHsgZXh0ZW5zaW9uRWxlbWVudHM6IGV4dGVuc2lvbkVsZW1lbnRzIH0pDQogICAgICB9IGVsc2Ugew0KICAgICAgICBjb25zdCBleHRlbnNpb25FbGVtZW50cyA9IHRoaXMuZWxlbWVudC5idXNpbmVzc09iamVjdFtgZXh0ZW5zaW9uRWxlbWVudHNgXQ0KICAgICAgICBpZiAoZXh0ZW5zaW9uRWxlbWVudHMpIHsNCiAgICAgICAgICBleHRlbnNpb25FbGVtZW50cy52YWx1ZXMgPSBleHRlbnNpb25FbGVtZW50cy52YWx1ZXM/LmZpbHRlcihpdGVtID0+IGl0ZW0uJHR5cGUgIT09ICdmbG93YWJsZTpFeGVjdXRpb25MaXN0ZW5lcicpID8/IFtdDQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9LA0KICAgIGNsb3NlRGlhbG9nKCkgew0KICAgICAgY29uc29sZS5sb2codGhpcy5mb3JtRGF0YSkNCiAgICAgIHRoaXMuJHJlZnMueEZvcm0udmFsaWRhdGUoKS50aGVuKCgpID0+IHsNCiAgICAgICAgdGhpcy51cGRhdGVFbGVtZW50KCkNCiAgICAgICAgdGhpcy5kaWFsb2dWaXNpYmxlID0gZmFsc2UNCiAgICAgIH0pLmNhdGNoKGUgPT4gY29uc29sZS5lcnJvcihlKSkNCiAgICB9LA0KICAgIGFkZExpc3RlbmVyKGRhdGEpIHsNCiAgICAgIHRoaXMuZm9ybURhdGEuZXhlY3V0aW9uTGlzdGVuZXIgPSB0aGlzLmZvcm1EYXRhLmV4ZWN1dGlvbkxpc3RlbmVyLmNvbmNhdChkYXRhKQ0KICAgIH0NCiAgfQ0KfQ0K"},{"version":3,"sources":["executionListener.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"executionListener.vue","sourceRoot":"src/components/Process/components/nodePanel/property","sourcesContent":["<template>\r\n  <div>\r\n    <el-dialog\r\n      title=\"执行监听器\"\r\n      :visible.sync=\"dialogVisible\"\r\n      width=\"900px\"\r\n      :close-on-click-modal=\"false\"\r\n      :close-on-press-escape=\"false\"\r\n      :show-close=\"false\"\r\n      @closed=\"$emit('close')\"\r\n    >\r\n      <x-form ref=\"xForm\" v-model=\"formData\" :config=\"formConfig\">\r\n        <template #params=\"scope\">\r\n          <el-badge :value=\"scope.row.params ? scope.row.params.length : 0\" type=\"primary\">\r\n            <el-button size=\"small\" @click=\"configParam(scope.$index)\">配置</el-button>\r\n          </el-badge>\r\n        </template>\r\n      </x-form>\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button type=\"primary\" size=\"medium\" @click=\"closeDialog\">确 定</el-button>\r\n      </span>\r\n      <listener-list\r\n        :visible=\"listenerDialogVisible\"\r\n        @close=\"() => this.listenerDialogVisible = false\"\r\n        @submit=\"addListener\"\r\n      />\r\n    </el-dialog>\r\n    <listenerParam v-if=\"showParamDialog\" :value=\"formData.executionListener[nowIndex].params\" @close=\"finishConfigParam\" />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport mixinPanel from '../../../common/mixinPanel'\r\nimport listenerParam from './listenerParam'\r\nimport FlowListener from '@/components/flow/Listener'\r\nimport ListenerList from '@/components/Process/components/nodePanel/property/listenerList'\r\nexport default {\r\n  components: { ListenerList, listenerParam, FlowListener },\r\n  mixins: [mixinPanel],\r\n  data() {\r\n    return {\r\n      dialogVisible: true,\r\n      listenerDialogVisible: false,\r\n      showParamDialog: false,\r\n      nowIndex: null,\r\n      formData: {\r\n        executionListener: []\r\n      }\r\n    }\r\n  },\r\n  computed: {\r\n    formConfig() {\r\n      //   const _this = this\r\n      return {\r\n        inline: false,\r\n        item: [\r\n          {\r\n            xType: 'tabs',\r\n            tabs: [\r\n              {\r\n                label: '执行监听器',\r\n                name: 'executionListener',\r\n                column: [\r\n                  {\r\n                    label: '事件',\r\n                    name: 'event',\r\n                    width: 180,\r\n                    rules: [{ required: true, message: '请选择', trigger: ['blur', 'change'] }],\r\n                    xType: 'select',\r\n                    dic: [\r\n                      { label: 'start', value: 'start' },\r\n                      { label: 'end', value: 'end' },\r\n                      { label: 'take', value: 'take' }\r\n                    ]\r\n                  },\r\n                  {\r\n                    label: '类型',\r\n                    name: 'type',\r\n                    width: 180,\r\n                    rules: [{ required: true, message: '请选择', trigger: ['blur', 'change'] }],\r\n                    xType: 'select',\r\n                    dic: [\r\n                      { label: '类', value: 'class' },\r\n                      { label: '表达式', value: 'expression' },\r\n                      { label: '委托表达式', value: 'delegateExpression' }\r\n                    ],\r\n                    tooltip: `类：示例 com.company.MyCustomListener，自定义类必须实现 org.flowable.engine.delegate.ExecutionListener 接口 <br />\r\n                              表达式：示例 \\${myObject.callMethod(task, task.eventName)} <br />\r\n                              委托表达式：示例 \\${myListenerSpringBean} ，该 springBean 需要实现 org.flowable.engine.delegate.ExecutionListener 接口\r\n                    `\r\n                  },\r\n                  {\r\n                    label: '值',\r\n                    name: 'className',\r\n                    xType: 'input',\r\n                    rules: [{ required: true, message: '请输入', trigger: ['blur', 'change'] }]\r\n                  },\r\n                  {\r\n                    xType: 'slot',\r\n                    label: '参数',\r\n                    width: 120,\r\n                    slot: true,\r\n                    name: 'params'\r\n                  }\r\n                ]\r\n              }\r\n            ]\r\n          }\r\n        ]\r\n      }\r\n    }\r\n  },\r\n  mounted() {\r\n    this.$nextTick(() => this.addButton())\r\n    this.formData.executionListener = this.element.businessObject.extensionElements?.values\r\n      .filter(item => item.$type === 'flowable:ExecutionListener')\r\n      .map(item => {\r\n        let type\r\n        if ('class' in item) type = 'class'\r\n        if ('expression' in item) type = 'expression'\r\n        if ('delegateExpression' in item) type = 'delegateExpression'\r\n        return {\r\n          event: item.event,\r\n          type: type,\r\n          className: item[type],\r\n          params: item.fields?.map(field => {\r\n            let fieldType\r\n            if ('stringValue' in field) fieldType = 'stringValue'\r\n            if ('expression' in field) fieldType = 'expression'\r\n            return {\r\n              name: field.name,\r\n              type: fieldType,\r\n              value: field[fieldType]\r\n            }\r\n          }) ?? []\r\n        }\r\n      }) ?? []\r\n  },\r\n  methods: {\r\n    addButton() {\r\n      const button = document.createElement('button')\r\n      button.innerText = '内置监听器'\r\n      button.setAttribute('type', 'button')\r\n      button.setAttribute('class', 'el-button el-button--primary el-button--mini')\r\n      button.addEventListener('click', () => this.listenerDialogVisible = true)\r\n      const div = document.getElementById('pane-executionListener')\r\n      const table = div.getElementsByClassName('el-table')[0]\r\n      div.insertBefore(button, table)\r\n    },\r\n    configParam(index) {\r\n      this.nowIndex = index\r\n      const nowObj = this.formData.executionListener[index]\r\n      if (!nowObj.params) {\r\n        nowObj.params = []\r\n      }\r\n      this.showParamDialog = true\r\n    },\r\n    finishConfigParam(param) {\r\n      this.showParamDialog = false\r\n      // hack 数量不更新问题\r\n      const cache = this.formData.executionListener[this.nowIndex]\r\n      cache.params = param\r\n      this.$set(this.formData.executionListener[this.nowIndex], this.nowIndex, cache)\r\n      this.nowIndex = null\r\n    },\r\n    updateElement() {\r\n      if (this.formData.executionListener?.length) {\r\n        let extensionElements = this.element.businessObject.get('extensionElements')\r\n        if (!extensionElements) {\r\n          extensionElements = this.modeler.get('moddle').create('bpmn:ExtensionElements')\r\n        }\r\n        // 清除旧值\r\n        extensionElements.values = extensionElements.values?.filter(item => item.$type !== 'flowable:ExecutionListener') ?? []\r\n        this.formData.executionListener.forEach(item => {\r\n          const executionListener = this.modeler.get('moddle').create('flowable:ExecutionListener')\r\n          executionListener['event'] = item.event\r\n          executionListener[item.type] = item.className\r\n          if (item.params && item.params.length) {\r\n            item.params.forEach(field => {\r\n              const fieldElement = this.modeler.get('moddle').create('flowable:Field')\r\n              fieldElement['name'] = field.name\r\n              fieldElement[field.type] = field.value\r\n              // 注意：flowable.json 中定义的string和expression类为小写，不然会和原生的String类冲突，此处为hack\r\n              // const valueElement = this.modeler.get('moddle').create(`flowable:${field.type}`, { body: field.value })\r\n              // fieldElement[field.type] = valueElement\r\n              executionListener.get('fields').push(fieldElement)\r\n            })\r\n          }\r\n          extensionElements.get('values').push(executionListener)\r\n        })\r\n        this.updateProperties({ extensionElements: extensionElements })\r\n      } else {\r\n        const extensionElements = this.element.businessObject[`extensionElements`]\r\n        if (extensionElements) {\r\n          extensionElements.values = extensionElements.values?.filter(item => item.$type !== 'flowable:ExecutionListener') ?? []\r\n        }\r\n      }\r\n    },\r\n    closeDialog() {\r\n      console.log(this.formData)\r\n      this.$refs.xForm.validate().then(() => {\r\n        this.updateElement()\r\n        this.dialogVisible = false\r\n      }).catch(e => console.error(e))\r\n    },\r\n    addListener(data) {\r\n      this.formData.executionListener = this.formData.executionListener.concat(data)\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n.flow-containers  .el-badge__content.is-fixed {\r\n  top: 18px;\r\n}\r\n</style>\r\n"]}]}