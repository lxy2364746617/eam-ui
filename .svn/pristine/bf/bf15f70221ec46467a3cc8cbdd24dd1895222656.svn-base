{"remainingRequest":"E:\\visual_code_work_space\\ruoyi-ui\\node_modules\\babel-loader\\lib\\index.js!E:\\visual_code_work_space\\ruoyi-ui\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\visual_code_work_space\\ruoyi-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\visual_code_work_space\\ruoyi-ui\\src\\components\\Process\\PropertyPanel.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\visual_code_work_space\\ruoyi-ui\\src\\components\\Process\\PropertyPanel.vue","mtime":1693557459603},{"path":"E:\\visual_code_work_space\\ruoyi-ui\\babel.config.js","mtime":1693557459543},{"path":"E:\\visual_code_work_space\\ruoyi-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\visual_code_work_space\\ruoyi-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"E:\\visual_code_work_space\\ruoyi-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\visual_code_work_space\\ruoyi-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKdmFyIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQgPSByZXF1aXJlKCJFOi92aXN1YWxfY29kZV93b3JrX3NwYWNlL3J1b3lpLXVpL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2ludGVyb3BSZXF1aXJlRGVmYXVsdC5qcyIpLmRlZmF1bHQ7Ck9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICB2YWx1ZTogdHJ1ZQp9KTsKZXhwb3J0cy5kZWZhdWx0ID0gdm9pZCAwOwpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5jbHVkZXMuanMiKTsKdmFyIF90YXNrID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCIuL2NvbXBvbmVudHMvbm9kZVBhbmVsL3Rhc2siKSk7CnZhciBfc3RhcnRFbmQgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoIi4vY29tcG9uZW50cy9ub2RlUGFuZWwvc3RhcnRFbmQiKSk7CnZhciBfcHJvY2VzcyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiLi9jb21wb25lbnRzL25vZGVQYW5lbC9wcm9jZXNzIikpOwp2YXIgX3NlcXVlbmNlRmxvdyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiLi9jb21wb25lbnRzL25vZGVQYW5lbC9zZXF1ZW5jZUZsb3ciKSk7CnZhciBfZ2F0ZXdheSA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiLi9jb21wb25lbnRzL25vZGVQYW5lbC9nYXRld2F5IikpOwp2YXIgX3poID0gcmVxdWlyZSgiLi9sYW5nL3poIik7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCnZhciBfZGVmYXVsdDIgPSB7CiAgbmFtZTogJ1Byb3BlcnR5UGFuZWwnLAogIGNvbXBvbmVudHM6IHsKICAgIHByb2Nlc3NQYW5lbDogX3Byb2Nlc3MuZGVmYXVsdCwKICAgIHRhc2tQYW5lbDogX3Rhc2suZGVmYXVsdCwKICAgIHN0YXJ0RW5kUGFuZWw6IF9zdGFydEVuZC5kZWZhdWx0LAogICAgc2VxdWVuY2VGbG93UGFuZWw6IF9zZXF1ZW5jZUZsb3cuZGVmYXVsdCwKICAgIGdhdGV3YXlQYW5lbDogX2dhdGV3YXkuZGVmYXVsdAogIH0sCiAgcHJvcHM6IHsKICAgIHVzZXJzOiB7CiAgICAgIHR5cGU6IEFycmF5LAogICAgICByZXF1aXJlZDogdHJ1ZQogICAgfSwKICAgIGdyb3VwczogewogICAgICB0eXBlOiBBcnJheSwKICAgICAgcmVxdWlyZWQ6IHRydWUKICAgIH0sCiAgICBjYXRlZ29yeXM6IHsKICAgICAgdHlwZTogQXJyYXksCiAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICB9LAogICAgZXhwczogewogICAgICB0eXBlOiBBcnJheSwKICAgICAgZGVmYXVsdDogZnVuY3Rpb24gX2RlZmF1bHQoKSB7CiAgICAgICAgcmV0dXJuIFtdOwogICAgICB9CiAgICB9LAogICAgbW9kZWxlcjogewogICAgICB0eXBlOiBPYmplY3QsCiAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICB9CiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZWxlbWVudDogbnVsbCwKICAgICAgZm9ybTogewogICAgICAgIGlkOiAnJywKICAgICAgICBuYW1lOiAnJywKICAgICAgICBjb2xvcjogbnVsbAogICAgICB9CiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGdldENvbXBvbmVudDogZnVuY3Rpb24gZ2V0Q29tcG9uZW50KCkgewogICAgICB2YXIgX3RoaXMkZWxlbWVudDsKICAgICAgdmFyIHR5cGUgPSAoX3RoaXMkZWxlbWVudCA9IHRoaXMuZWxlbWVudCkgPT09IG51bGwgfHwgX3RoaXMkZWxlbWVudCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkZWxlbWVudC50eXBlOwogICAgICBpZiAoWydicG1uOkludGVybWVkaWF0ZVRocm93RXZlbnQnLCAnYnBtbjpTdGFydEV2ZW50JywgJ2JwbW46RW5kRXZlbnQnXS5pbmNsdWRlcyh0eXBlKSkgewogICAgICAgIHJldHVybiAnc3RhcnRFbmRQYW5lbCc7CiAgICAgIH0KICAgICAgaWYgKFsnYnBtbjpVc2VyVGFzaycsICdicG1uOlRhc2snLCAnYnBtbjpTZW5kVGFzaycsICdicG1uOlJlY2VpdmVUYXNrJywgJ2JwbW46TWFudWFsVGFzaycsICdicG1uOkJ1c2luZXNzUnVsZVRhc2snLCAnYnBtbjpTZXJ2aWNlVGFzaycsICdicG1uOlNjcmlwdFRhc2snCiAgICAgIC8vICdicG1uOkNhbGxBY3Rpdml0eScsCiAgICAgIC8vICdicG1uOlN1YlByb2Nlc3MnCiAgICAgIF0uaW5jbHVkZXModHlwZSkpIHsKICAgICAgICByZXR1cm4gJ3Rhc2tQYW5lbCc7CiAgICAgIH0KICAgICAgaWYgKHR5cGUgPT09ICdicG1uOlNlcXVlbmNlRmxvdycpIHsKICAgICAgICByZXR1cm4gJ3NlcXVlbmNlRmxvd1BhbmVsJzsKICAgICAgfQogICAgICBpZiAoWydicG1uOkluY2x1c2l2ZUdhdGV3YXknLCAnYnBtbjpFeGNsdXNpdmVHYXRld2F5JywgJ2JwbW46UGFyYWxsZWxHYXRld2F5JywgJ2JwbW46RXZlbnRCYXNlZEdhdGV3YXknXS5pbmNsdWRlcyh0eXBlKSkgewogICAgICAgIHJldHVybiAnZ2F0ZXdheVBhbmVsJzsKICAgICAgfQogICAgICBpZiAodHlwZSA9PT0gJ2JwbW46UHJvY2VzcycpIHsKICAgICAgICByZXR1cm4gJ3Byb2Nlc3NQYW5lbCc7CiAgICAgIH0KICAgICAgcmV0dXJuIG51bGw7CiAgICB9LAogICAgbm9kZU5hbWU6IGZ1bmN0aW9uIG5vZGVOYW1lKCkgewogICAgICBpZiAodGhpcy5lbGVtZW50KSB7CiAgICAgICAgdmFyIGJpek9iaiA9IHRoaXMuZWxlbWVudC5idXNpbmVzc09iamVjdDsKICAgICAgICB2YXIgdHlwZSA9IGJpek9iaiAhPT0gbnVsbCAmJiBiaXpPYmogIT09IHZvaWQgMCAmJiBiaXpPYmouZXZlbnREZWZpbml0aW9ucyA/IGJpek9iai5ldmVudERlZmluaXRpb25zWzBdLiR0eXBlIDogYml6T2JqLiR0eXBlOwogICAgICAgIHJldHVybiBfemguTm9kZU5hbWVbdHlwZV0gfHwgdHlwZTsKICAgICAgfQogICAgICByZXR1cm4gJyc7CiAgICB9CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdGhpcy5oYW5kbGVNb2RlbGVyKCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBoYW5kbGVNb2RlbGVyOiBmdW5jdGlvbiBoYW5kbGVNb2RlbGVyKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICB0aGlzLm1vZGVsZXIub24oJ3Jvb3QuYWRkZWQnLCBmdW5jdGlvbiAoZSkgewogICAgICAgIGlmIChlLmVsZW1lbnQudHlwZSA9PT0gJ2JwbW46UHJvY2VzcycpIHsKICAgICAgICAgIF90aGlzLmVsZW1lbnQgPSBudWxsOwogICAgICAgICAgX3RoaXMuJG5leHRUaWNrKCkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIF90aGlzLmVsZW1lbnQgPSBlLmVsZW1lbnQ7CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0pOwogICAgICB0aGlzLm1vZGVsZXIub24oJ2VsZW1lbnQuY2xpY2snLCBmdW5jdGlvbiAoZSkgewogICAgICAgIHZhciBlbGVtZW50ID0gZS5lbGVtZW50OwogICAgICAgIGlmIChlbGVtZW50LnR5cGUgPT09ICdicG1uOlByb2Nlc3MnIHx8IGVsZW1lbnQudHlwZSA9PT0gJ2JwbW46U2VxdWVuY2VGbG93JyB8fCBlbGVtZW50LnR5cGUgPT09ICdicG1uOkVuZEV2ZW50JykgewogICAgICAgICAgX3RoaXMuZWxlbWVudCA9IGVsZW1lbnQ7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgdGhpcy5tb2RlbGVyLm9uKCdzZWxlY3Rpb24uY2hhbmdlZCcsIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgLy8gaGFjayDlkIznsbvlnovpnaLmnb/kuI3liLfmlrAKICAgICAgICBfdGhpcy5lbGVtZW50ID0gbnVsbDsKICAgICAgICB2YXIgZWxlbWVudCA9IGUubmV3U2VsZWN0aW9uWzBdOwogICAgICAgIGlmIChlbGVtZW50KSB7CiAgICAgICAgICBfdGhpcy4kbmV4dFRpY2soKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgX3RoaXMuZWxlbWVudCA9IGVsZW1lbnQ7CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfQogIH0KfTsKZXhwb3J0cy5kZWZhdWx0ID0gX2RlZmF1bHQyOw=="},{"version":3,"names":["_task","_interopRequireDefault","require","_startEnd","_process","_sequenceFlow","_gateway","_zh","name","components","processPanel","taskPanel","startEndPanel","sequenceFlowPanel","gatewayPanel","props","users","type","Array","required","groups","categorys","exps","default","_default","modeler","Object","data","element","form","id","color","computed","getComponent","_this$element","includes","nodeName","bizObj","businessObject","eventDefinitions","$type","NodeName","mounted","handleModeler","methods","_this","on","e","$nextTick","then","newSelection","exports","_default2"],"sources":["src/components/Process/PropertyPanel.vue"],"sourcesContent":["<template>\r\n  <div ref=\"propertyPanel\" class=\"property-panel\">\r\n    <div v-if=\"nodeName\" class=\"node-name\">{{ nodeName }}</div>\r\n    <component\r\n      :is=\"getComponent\"\r\n      v-if=\"element\"\r\n      :element=\"element\"\r\n      :modeler=\"modeler\"\r\n      :users=\"users\"\r\n      :groups=\"groups\"\r\n      :exps=\"exps\"\r\n      :categorys=\"categorys\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport taskPanel from './components/nodePanel/task'\r\nimport startEndPanel from './components/nodePanel/startEnd'\r\nimport processPanel from './components/nodePanel/process'\r\nimport sequenceFlowPanel from './components/nodePanel/sequenceFlow'\r\nimport gatewayPanel from './components/nodePanel/gateway'\r\nimport { NodeName } from './lang/zh'\r\n\r\nexport default {\r\n  name: 'PropertyPanel',\r\n  components: { processPanel, taskPanel, startEndPanel, sequenceFlowPanel, gatewayPanel },\r\n  props: {\r\n    users: {\r\n      type: Array,\r\n      required: true\r\n    },\r\n    groups: {\r\n      type: Array,\r\n      required: true\r\n    },\r\n    categorys: {\r\n      type: Array,\r\n      required: true\r\n    },\r\n    exps: {\r\n      type: Array,\r\n      default: () => []\r\n    },\r\n    modeler: {\r\n      type: Object,\r\n      required: true\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      element: null,\r\n      form: {\r\n        id: '',\r\n        name: '',\r\n        color: null\r\n      },\r\n    }\r\n  },\r\n  computed: {\r\n    getComponent() {\r\n      const type = this.element?.type\r\n      if (['bpmn:IntermediateThrowEvent', 'bpmn:StartEvent', 'bpmn:EndEvent'].includes(type)) {\r\n        return 'startEndPanel'\r\n      }\r\n      if ([\r\n        'bpmn:UserTask',\r\n        'bpmn:Task',\r\n        'bpmn:SendTask',\r\n        'bpmn:ReceiveTask',\r\n        'bpmn:ManualTask',\r\n        'bpmn:BusinessRuleTask',\r\n        'bpmn:ServiceTask',\r\n        'bpmn:ScriptTask'\r\n        // 'bpmn:CallActivity',\r\n        // 'bpmn:SubProcess'\r\n      ].includes(type)) {\r\n        return 'taskPanel'\r\n      }\r\n      if (type === 'bpmn:SequenceFlow') {\r\n        return 'sequenceFlowPanel'\r\n      }\r\n      if ([\r\n        'bpmn:InclusiveGateway',\r\n        'bpmn:ExclusiveGateway',\r\n        'bpmn:ParallelGateway',\r\n        'bpmn:EventBasedGateway'\r\n      ].includes(type)) {\r\n        return 'gatewayPanel'\r\n      }\r\n      if (type === 'bpmn:Process') {\r\n        return 'processPanel'\r\n      }\r\n      return null\r\n    },\r\n    nodeName() {\r\n      if (this.element) {\r\n        const bizObj = this.element.businessObject\r\n        const type = bizObj?.eventDefinitions\r\n          ? bizObj.eventDefinitions[0].$type\r\n          : bizObj.$type\r\n        return NodeName[type] || type\r\n      }\r\n      return ''\r\n    }\r\n  },\r\n  mounted() {\r\n    this.handleModeler()\r\n  },\r\n  methods: {\r\n    handleModeler() {\r\n      this.modeler.on('root.added', e => {\r\n        if (e.element.type === 'bpmn:Process') {\r\n          this.element = null\r\n          this.$nextTick().then(() => {\r\n            this.element = e.element\r\n          })\r\n        }\r\n      })\r\n      this.modeler.on('element.click', e => {\r\n        const { element } = e\r\n        if (element.type === 'bpmn:Process'\r\n          || element.type === 'bpmn:SequenceFlow'\r\n          || element.type === 'bpmn:EndEvent' ) {\r\n          this.element = element\r\n        }\r\n      })\r\n      this.modeler.on('selection.changed', e => {\r\n        // hack 同类型面板不刷新\r\n        this.element = null\r\n        const element = e.newSelection[0]\r\n        if (element) {\r\n          this.$nextTick().then(() => {\r\n            this.element = element\r\n          })\r\n        }\r\n      })\r\n    },\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n.property-panel {\r\n  padding: 20px 20px;\r\n  // reset element css\r\n  .el-form--label-top .el-form-item__label {\r\n    padding: 0;\r\n  }\r\n  // 设置设计器右侧表单高度\r\n  .el-form-item {\r\n    margin-bottom: 6px;\r\n  }\r\n  .tab-table .el-form-item {\r\n    margin-bottom: 16px;\r\n  }\r\n  .node-name{\r\n    border-bottom: 1px solid #ccc;\r\n    padding: 0 0 10px 20px;\r\n    margin-bottom: 10px;\r\n    font-size: 16px;\r\n    font-weight: bold;\r\n    color: #444;\r\n  }\r\n}\r\n</style>\r\n"],"mappings":"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"}]}