{"remainingRequest":"E:\\visual_code_work_space\\cms-eam-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\visual_code_work_space\\cms-eam-ui\\src\\views\\flowable\\task\\todo\\detail\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\visual_code_work_space\\cms-eam-ui\\src\\views\\flowable\\task\\todo\\detail\\index.vue","mtime":1693557459678},{"path":"E:\\visual_code_work_space\\cms-eam-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\visual_code_work_space\\cms-eam-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"E:\\visual_code_work_space\\cms-eam-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\visual_code_work_space\\cms-eam-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQge2Zsb3dSZWNvcmR9IGZyb20gIkAvYXBpL2Zsb3dhYmxlL2ZpbmlzaGVkIjsNCmltcG9ydCBGbG93VXNlciBmcm9tICdAL2NvbXBvbmVudHMvZmxvdy9Vc2VyJw0KaW1wb3J0IEZsb3dSb2xlIGZyb20gJ0AvY29tcG9uZW50cy9mbG93L1JvbGUnDQppbXBvcnQgUGFyc2VyIGZyb20gJ0AvY29tcG9uZW50cy9wYXJzZXIvUGFyc2VyJw0KaW1wb3J0IHtnZXRQcm9jZXNzVmFyaWFibGVzLCBmbG93WG1sQW5kTm9kZSwgZGVmaW5pdGlvblN0YXJ0fSBmcm9tICJAL2FwaS9mbG93YWJsZS9kZWZpbml0aW9uIjsNCmltcG9ydCB7DQogIGNvbXBsZXRlLA0KICByZWplY3RUYXNrLA0KICByZXR1cm5MaXN0LA0KICByZXR1cm5UYXNrLA0KICBnZXROZXh0Rmxvd05vZGUsDQogIGRlbGVnYXRlLA0KICBmbG93VGFza0Zvcm0sDQp9IGZyb20gIkAvYXBpL2Zsb3dhYmxlL3RvZG8iOw0KaW1wb3J0IGZsb3cgZnJvbSAnQC92aWV3cy9mbG93YWJsZS90YXNrL3RvZG8vZGV0YWlsL2Zsb3cnDQppbXBvcnQgIkByaW9waGFlL3Z1ZS10cmVlc2VsZWN0L2Rpc3QvdnVlLXRyZWVzZWxlY3QuY3NzIjsNCmltcG9ydCB7bGlzdFVzZXJ9IGZyb20gIkAvYXBpL3N5c3RlbS91c2VyIjsNCg0KZXhwb3J0IGRlZmF1bHQgew0KICBuYW1lOiAiUmVjb3JkIiwNCiAgY29tcG9uZW50czogew0KICAgIFBhcnNlciwNCiAgICBmbG93LA0KICAgIEZsb3dVc2VyLA0KICAgIEZsb3dSb2xlLA0KICB9LA0KICBwcm9wczoge30sDQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIC8vIOaooeWei3htbOaVsOaNrg0KICAgICAgeG1sRGF0YTogIiIsDQogICAgICBmbG93RGF0YToge30sDQogICAgICBhY3RpdmVOYW1lOiAnMScsDQogICAgICAvLyDpg6jpl6jlkI3np7ANCiAgICAgIGRlcHROYW1lOiB1bmRlZmluZWQsDQogICAgICAvLyDpg6jpl6jmoJHpgInpobkNCiAgICAgIC8vIOeUqOaIt+ihqOagvOaVsOaNrg0KICAgICAgdXNlckxpc3Q6IG51bGwsDQogICAgICBkZWZhdWx0UHJvcHM6IHsNCiAgICAgICAgY2hpbGRyZW46ICJjaGlsZHJlbiIsDQogICAgICAgIGxhYmVsOiAibGFiZWwiDQogICAgICB9LA0KICAgICAgLy8g5p+l6K+i5Y+C5pWwDQogICAgICBxdWVyeVBhcmFtczogew0KICAgICAgICBkZXB0SWQ6IHVuZGVmaW5lZA0KICAgICAgfSwNCiAgICAgIC8vIOmBrue9qeWxgg0KICAgICAgbG9hZGluZzogdHJ1ZSwNCiAgICAgIGZsb3dSZWNvcmRMaXN0OiBbXSwgLy8g5rWB56iL5rWB6L2s5pWw5o2uDQogICAgICBmb3JtQ29uZkNvcHk6IHt9LA0KICAgICAgc3JjOiBudWxsLA0KICAgICAgcnVsZXM6IHt9LCAvLyDooajljZXmoKHpqowNCiAgICAgIHZhcmlhYmxlc0Zvcm06IHt9LCAvLyDmtYHnqIvlj5jph4/mlbDmja4NCiAgICAgIHRhc2tGb3JtOiB7DQogICAgICAgIHJldHVyblRhc2tTaG93OiBmYWxzZSwgLy8g5piv5ZCm5bGV56S65Zue6YCA6KGo5Y2VDQogICAgICAgIGRlbGVnYXRlVGFza1Nob3c6IGZhbHNlLCAvLyDmmK/lkKblsZXnpLrlm57pgIDooajljZUNCiAgICAgICAgZGVmYXVsdFRhc2tTaG93OiB0cnVlLCAvLyDpu5jorqTlpITnkIYNCiAgICAgICAgY29tbWVudDogIiIsIC8vIOaEj+ingeWGheWuuQ0KICAgICAgICBwcm9jSW5zSWQ6ICIiLCAvLyDmtYHnqIvlrp7kvovnvJblj7cNCiAgICAgICAgaW5zdGFuY2VJZDogIiIsIC8vIOa1geeoi+WunuS+i+e8luWPtw0KICAgICAgICBkZXBsb3lJZDogIiIsICAvLyDmtYHnqIvlrprkuYnnvJblj7cNCiAgICAgICAgdGFza0lkOiAiIiwvLyDmtYHnqIvku7vliqHnvJblj7cNCiAgICAgICAgcHJvY0RlZklkOiAiIiwgIC8vIOa1geeoi+e8luWPtw0KICAgICAgICB0YXJnZXRLZXk6ICIiLA0KICAgICAgICB2YXJpYWJsZXM6IHsNCiAgICAgICAgICB2YXJpYWJsZXM6IHt9DQogICAgICAgIH0sDQogICAgICB9LA0KICAgICAgYXNzaWduZWU6IG51bGwsDQogICAgICBmb3JtQ29uZjoge30sIC8vIOm7mOiupOihqOWNleaVsOaNrg0KICAgICAgdmFyaWFibGVzOiBbXSwgLy8g5rWB56iL5Y+Y6YeP5pWw5o2uDQogICAgICB2YXJpYWJsZXNEYXRhOiB7fSwgLy8g5rWB56iL5Y+Y6YeP5pWw5o2uDQogICAgICByZXR1cm5UYXNrTGlzdDogW10sICAvLyDlm57pgIDliJfooajmlbDmja4NCiAgICAgIGNvbXBsZXRlVGl0bGU6IG51bGwsDQogICAgICBjb21wbGV0ZU9wZW46IGZhbHNlLA0KICAgICAgcmV0dXJuVGl0bGU6IG51bGwsDQogICAgICByZXR1cm5PcGVuOiBmYWxzZSwNCiAgICAgIHJlamVjdE9wZW46IGZhbHNlLA0KICAgICAgcmVqZWN0VGl0bGU6IG51bGwsDQogICAgICB1c2VyRGF0YTogW10sDQogICAgICBjaGVja1NlbmRVc2VyOiBmYWxzZSwgLy8g5piv5ZCm5bGV56S65Lq65ZGY6YCJ5oup5qih5Z2XDQogICAgICBjaGVja1NlbmRSb2xlOiBmYWxzZSwvLyDmmK/lkKblsZXnpLrop5LoibLpgInmi6nmqKHlnZcNCiAgICAgIGNoZWNrVHlwZTogJ3NpbmdsZScsIC8vIOmAieaLqeexu+Weiw0KICAgICAgdGFza05hbWU6IG51bGwsIC8vIOS7u+WKoeiKgueCuQ0KICAgICAgc3RhcnRVc2VyOiBudWxsLCAvLyDlj5Hotbfkurrkv6Hmga8sDQogICAgICBtdWx0aUluc3RhbmNlVmFyczogJycsIC8vIOS8muetvuiKgueCuQ0KICAgICAgZm9ybUtleUV4aXN0OiBmYWxzZSwgLy8g5b2T5YmN6IqC54K55piv5ZCm5a2Y5Zyo6KGo5Y2VDQogICAgfTsNCiAgfSwNCiAgY3JlYXRlZCgpIHsNCiAgICBpZiAodGhpcy4kcm91dGUucXVlcnkpIHsNCiAgICAgIHRoaXMudGFza05hbWUgPSB0aGlzLiRyb3V0ZS5xdWVyeS50YXNrTmFtZTsNCiAgICAgIHRoaXMuc3RhcnRVc2VyID0gdGhpcy4kcm91dGUucXVlcnkuc3RhcnRVc2VyOw0KICAgICAgdGhpcy50YXNrRm9ybS5kZXBsb3lJZCA9IHRoaXMuJHJvdXRlLnF1ZXJ5LmRlcGxveUlkOw0KICAgICAgdGhpcy50YXNrRm9ybS50YXNrSWQgPSB0aGlzLiRyb3V0ZS5xdWVyeS50YXNrSWQ7DQogICAgICB0aGlzLnRhc2tGb3JtLnByb2NJbnNJZCA9IHRoaXMuJHJvdXRlLnF1ZXJ5LnByb2NJbnNJZDsNCiAgICAgIHRoaXMudGFza0Zvcm0uZXhlY3V0aW9uSWQgPSB0aGlzLiRyb3V0ZS5xdWVyeS5leGVjdXRpb25JZDsNCiAgICAgIHRoaXMudGFza0Zvcm0uaW5zdGFuY2VJZCA9IHRoaXMuJHJvdXRlLnF1ZXJ5LnByb2NJbnNJZDsNCiAgICAgIC8vIOa1geeoi+S7u+WKoeiOt+WPluWPmOmHj+S/oeaBrw0KICAgICAgaWYgKHRoaXMudGFza0Zvcm0udGFza0lkKSB7DQogICAgICAgIHRoaXMucHJvY2Vzc1ZhcmlhYmxlcyh0aGlzLnRhc2tGb3JtLnRhc2tJZCkNCiAgICAgICAgdGhpcy5nZXRGbG93VGFza0Zvcm0odGhpcy50YXNrRm9ybS50YXNrSWQpDQogICAgICB9DQogICAgICB0aGlzLmdldEZsb3dSZWNvcmRMaXN0KHRoaXMudGFza0Zvcm0ucHJvY0luc0lkLCB0aGlzLnRhc2tGb3JtLmRlcGxveUlkKTsNCiAgICB9DQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICBoYW5kbGVDbGljayh0YWIsIGV2ZW50KSB7DQogICAgICBpZiAodGFiLm5hbWUgPT09ICczJykgew0KICAgICAgICBmbG93WG1sQW5kTm9kZSh7cHJvY0luc0lkOiB0aGlzLnRhc2tGb3JtLnByb2NJbnNJZCwgZGVwbG95SWQ6IHRoaXMudGFza0Zvcm0uZGVwbG95SWR9KS50aGVuKHJlcyA9PiB7DQogICAgICAgICAgdGhpcy5mbG93RGF0YSA9IHJlcy5kYXRhOw0KICAgICAgICB9KQ0KICAgICAgfQ0KICAgIH0sDQogICAgc2V0SWNvbih2YWwpIHsNCiAgICAgIGlmICh2YWwpIHsNCiAgICAgICAgcmV0dXJuICJlbC1pY29uLWNoZWNrIjsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHJldHVybiAiZWwtaWNvbi10aW1lIjsNCiAgICAgIH0NCiAgICB9LA0KICAgIHNldENvbG9yKHZhbCkgew0KICAgICAgaWYgKHZhbCkgew0KICAgICAgICByZXR1cm4gIiMyYmM0MTgiOw0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgcmV0dXJuICIjYjNiZGJiIjsNCiAgICAgIH0NCiAgICB9LA0KICAgIC8vIOeUqOaIt+S/oeaBr+mAieS4reaVsOaNrg0KICAgIGhhbmRsZVVzZXJTZWxlY3Qoc2VsZWN0aW9uKSB7DQogICAgICBpZiAoc2VsZWN0aW9uKSB7DQogICAgICAgIGlmIChzZWxlY3Rpb24gaW5zdGFuY2VvZiBBcnJheSkgew0KICAgICAgICAgIGNvbnN0IHNlbGVjdFZhbCA9IHNlbGVjdGlvbi5tYXAoaXRlbSA9PiBpdGVtLnVzZXJJZCk7DQogICAgICAgICAgaWYgKHRoaXMubXVsdGlJbnN0YW5jZVZhcnMpIHsNCiAgICAgICAgICAgIHRoaXMuJHNldCh0aGlzLnRhc2tGb3JtLnZhcmlhYmxlcywgdGhpcy5tdWx0aUluc3RhbmNlVmFycywgc2VsZWN0VmFsKTsNCiAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgdGhpcy4kc2V0KHRoaXMudGFza0Zvcm0udmFyaWFibGVzLCAiYXBwcm92YWwiLCBzZWxlY3RWYWwuam9pbignLCcpKTsNCiAgICAgICAgICB9DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgdGhpcy4kc2V0KHRoaXMudGFza0Zvcm0udmFyaWFibGVzLCAiYXBwcm92YWwiLCBzZWxlY3Rpb24udXNlcklkLnRvU3RyaW5nKCkpOw0KICAgICAgICB9DQogICAgICB9DQogICAgfSwNCiAgICAvLyDop5LoibLkv6Hmga/pgInkuK3mlbDmja4NCiAgICBoYW5kbGVSb2xlU2VsZWN0KHNlbGVjdGlvbikgew0KICAgICAgaWYgKHNlbGVjdGlvbikgew0KICAgICAgICBpZiAoc2VsZWN0aW9uIGluc3RhbmNlb2YgQXJyYXkpIHsNCiAgICAgICAgICBjb25zdCBzZWxlY3RWYWwgPSBzZWxlY3Rpb24ubWFwKGl0ZW0gPT4gaXRlbS5yb2xlSWQpOw0KICAgICAgICAgIHRoaXMuJHNldCh0aGlzLnRhc2tGb3JtLnZhcmlhYmxlcywgImFwcHJvdmFsIiwgc2VsZWN0VmFsLmpvaW4oJywnKSk7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgdGhpcy4kc2V0KHRoaXMudGFza0Zvcm0udmFyaWFibGVzLCAiYXBwcm92YWwiLCBzZWxlY3Rpb24pOw0KICAgICAgICB9DQogICAgICB9DQogICAgfSwNCiAgICAvKiog5rWB56iL5rWB6L2s6K6w5b2VICovDQogICAgZ2V0Rmxvd1JlY29yZExpc3QocHJvY0luc0lkLCBkZXBsb3lJZCkgew0KICAgICAgY29uc3QgdGhhdCA9IHRoaXMNCiAgICAgIGNvbnN0IHBhcmFtcyA9IHtwcm9jSW5zSWQ6IHByb2NJbnNJZCwgZGVwbG95SWQ6IGRlcGxveUlkfQ0KICAgICAgZmxvd1JlY29yZChwYXJhbXMpLnRoZW4ocmVzID0+IHsNCiAgICAgICAgdGhhdC5mbG93UmVjb3JkTGlzdCA9IHJlcy5kYXRhLmZsb3dMaXN0Ow0KICAgICAgfSkuY2F0Y2gocmVzID0+IHsNCiAgICAgICAgdGhpcy5nb0JhY2soKTsNCiAgICAgIH0pDQogICAgfSwNCiAgICBmaWxsRm9ybURhdGEoZm9ybSwgZGF0YSkgew0KICAgICAgZm9ybS5maWVsZHMuZm9yRWFjaChpdGVtID0+IHsNCiAgICAgICAgY29uc3QgdmFsID0gZGF0YVtpdGVtLl9fdk1vZGVsX19dDQogICAgICAgIGlmICh2YWwpIHsNCiAgICAgICAgICBpdGVtLl9fY29uZmlnX18uZGVmYXVsdFZhbHVlID0gdmFsDQogICAgICAgIH0NCiAgICAgIH0pDQogICAgfSwNCiAgICAvKiog6I635Y+W5rWB56iL5Y+Y6YeP5YaF5a65ICovDQogICAgcHJvY2Vzc1ZhcmlhYmxlcyh0YXNrSWQpIHsNCiAgICAgIGlmICh0YXNrSWQpIHsNCiAgICAgICAgLy8g5o+Q5Lqk5rWB56iL55Sz6K+35pe25aGr5YaZ55qE6KGo5Y2V5a2Y5YWl5LqG5rWB56iL5Y+Y6YeP5Lit5ZCO57ut5Lu75Yqh5aSE55CG5pe26ZyA6KaB5bGV56S6DQogICAgICAgIGdldFByb2Nlc3NWYXJpYWJsZXModGFza0lkKS50aGVuKHJlcyA9PiB7DQogICAgICAgICAgLy8gdGhpcy52YXJpYWJsZXNEYXRhID0gcmVzLmRhdGEudmFyaWFibGVzOw0KICAgICAgICB9KTsNCiAgICAgIH0NCiAgICB9LA0KICAgIC8qKiDmtYHnqIvoioLngrnooajljZUgKi8NCiAgICBnZXRGbG93VGFza0Zvcm0odGFza0lkKSB7DQogICAgICBpZiAodGFza0lkKSB7DQogICAgICAgIC8vIOaPkOS6pOa1geeoi+eUs+ivt+aXtuWhq+WGmeeahOihqOWNleWtmOWFpeS6hua1geeoi+WPmOmHj+S4reWQjue7reS7u+WKoeWkhOeQhuaXtumcgOimgeWxleekug0KICAgICAgICBmbG93VGFza0Zvcm0oe3Rhc2tJZDogdGFza0lkfSkudGhlbihyZXMgPT4gew0KICAgICAgICAgIHRoaXMudmFyaWFibGVzRGF0YSA9IHJlcy5kYXRhLmZvcm1EYXRhOw0KICAgICAgICAgIHRoaXMudGFza0Zvcm0udmFyaWFibGVzID0gcmVzLmRhdGEuZm9ybURhdGE7DQogICAgICAgICAgdGhpcy5mb3JtS2V5RXhpc3QgPSByZXMuZGF0YS5mb3JtS2V5RXhpc3Q7DQogICAgICAgIH0pOw0KICAgICAgfQ0KICAgIH0sDQogICAgLyoqIOWKoOi9veWuoeaJueS7u+WKoeW8ueahhiAqLw0KICAgIGhhbmRsZUNvbXBsZXRlKCkgew0KICAgICAgLy8gdGhpcy5jb21wbGV0ZU9wZW4gPSB0cnVlOw0KICAgICAgLy8gdGhpcy5jb21wbGV0ZVRpdGxlID0gIua1geeoi+WuoeaJuSI7DQogICAgICB0aGlzLnN1Ym1pdEZvcm0obnVsbCk7DQogICAgfSwNCiAgICAvKiog55So5oi35a6h5om55Lu75YqhICovDQogICAgdGFza0NvbXBsZXRlKCkgew0KICAgICAgaWYgKCF0aGlzLnRhc2tGb3JtLnZhcmlhYmxlcyAmJiB0aGlzLmNoZWNrU2VuZFVzZXIpIHsNCiAgICAgICAgdGhpcy4kbW9kYWwubXNnRXJyb3IoIuivt+mAieaLqea1geeoi+aOpeaUtuS6uuWRmCEiKTsNCiAgICAgICAgcmV0dXJuOw0KICAgICAgfQ0KICAgICAgaWYgKCF0aGlzLnRhc2tGb3JtLnZhcmlhYmxlcyAmJiB0aGlzLmNoZWNrU2VuZFJvbGUpIHsNCiAgICAgICAgdGhpcy4kbW9kYWwubXNnRXJyb3IoIuivt+mAieaLqea1geeoi+aOpeaUtuinkuiJsue7hCEiKTsNCiAgICAgICAgcmV0dXJuOw0KICAgICAgfQ0KICAgICAgaWYgKCF0aGlzLnRhc2tGb3JtLmNvbW1lbnQpIHsNCiAgICAgICAgdGhpcy4kbW9kYWwubXNnRXJyb3IoIuivt+i+k+WFpeWuoeaJueaEj+ingSEiKTsNCiAgICAgICAgcmV0dXJuOw0KICAgICAgfQ0KICAgICAgaWYgKHRoaXMudGFza0Zvcm0gJiYgdGhpcy5mb3JtS2V5RXhpc3QpIHsNCiAgICAgICAgLy8g6KGo5Y2V5piv5ZCm56aB55SoDQogICAgICAgIHRoaXMudGFza0Zvcm0uZm9ybURhdGEuZm9ybURhdGEuZGlzYWJsZWQgPSB0cnVlOw0KICAgICAgICAvLyDmmK/lkKbmmL7npLrmjInpkq4NCiAgICAgICAgdGhpcy50YXNrRm9ybS5mb3JtRGF0YS5mb3JtRGF0YS5mb3JtQnRucyA9IGZhbHNlOw0KICAgICAgICB0aGlzLnRhc2tGb3JtLnZhcmlhYmxlcyA9IE9iamVjdC5hc3NpZ24oe30sIHRoaXMudGFza0Zvcm0udmFyaWFibGVzLCB0aGlzLnRhc2tGb3JtLmZvcm1EYXRhLnZhbERhdGEpOw0KICAgICAgICB0aGlzLnRhc2tGb3JtLnZhcmlhYmxlcy52YXJpYWJsZXMgPSB0aGlzLnRhc2tGb3JtLmZvcm1EYXRhLmZvcm1EYXRhOw0KICAgICAgICBjb21wbGV0ZSh0aGlzLnRhc2tGb3JtKS50aGVuKHJlc3BvbnNlID0+IHsNCiAgICAgICAgICB0aGlzLiRtb2RhbC5tc2dTdWNjZXNzKHJlc3BvbnNlLm1zZyk7DQogICAgICAgICAgdGhpcy5nb0JhY2soKTsNCiAgICAgICAgfSk7DQogICAgICB9IGVsc2Ugew0KICAgICAgICAvLyDmtYHnqIvorr7orqHkurrlkZjnsbvlnovphY3nva7kuLrlm7rlrprkurrlkZjmjqXmlLbku7vliqHml7Ys55u05o6l5o+Q5Lqk5Lu75Yqh5Yiw5LiL5LiA5q2lDQogICAgICAgIGNvbXBsZXRlKHRoaXMudGFza0Zvcm0pLnRoZW4ocmVzcG9uc2UgPT4gew0KICAgICAgICAgIHRoaXMuJG1vZGFsLm1zZ1N1Y2Nlc3MocmVzcG9uc2UubXNnKTsNCiAgICAgICAgICB0aGlzLmdvQmFjaygpOw0KICAgICAgICB9KTsNCiAgICAgIH0NCiAgICB9LA0KICAgIC8qKiDlp5TmtL7ku7vliqEgKi8NCiAgICBoYW5kbGVEZWxlZ2F0ZSgpIHsNCiAgICAgIHRoaXMudGFza0Zvcm0uZGVsZWdhdGVUYXNrU2hvdyA9IHRydWU7DQogICAgICB0aGlzLnRhc2tGb3JtLmRlZmF1bHRUYXNrU2hvdyA9IGZhbHNlOw0KICAgIH0sDQogICAgaGFuZGxlQXNzaWduKCkgew0KDQogICAgfSwNCiAgICAvKiog6L+U5Zue6aG16Z2iICovDQogICAgZ29CYWNrKCkgew0KICAgICAgLy8g5YWz6Zet5b2T5YmN5qCH562+6aG15bm26L+U5Zue5LiK5Liq6aG16Z2iDQogICAgICBjb25zdCBvYmogPSB7IHBhdGg6ICIvdGFzay90b2RvIiwgcXVlcnk6IHsgdDogRGF0ZS5ub3coKX0gfTsNCiAgICAgIHRoaXMuJHRhYi5jbG9zZU9wZW5QYWdlKG9iaik7DQogICAgfSwNCiAgICAvKiog6amz5Zue5Lu75YqhICovDQogICAgaGFuZGxlUmVqZWN0KCkgew0KICAgICAgdGhpcy5yZWplY3RPcGVuID0gdHJ1ZTsNCiAgICAgIHRoaXMucmVqZWN0VGl0bGUgPSAi6amz5Zue5rWB56iLIjsNCiAgICB9LA0KICAgIC8qKiDpqbPlm57ku7vliqEgKi8NCiAgICB0YXNrUmVqZWN0KCkgew0KICAgICAgdGhpcy4kcmVmc1sidGFza0Zvcm0iXS52YWxpZGF0ZSh2YWxpZCA9PiB7DQogICAgICAgIGlmICh2YWxpZCkgew0KICAgICAgICAgIHJlamVjdFRhc2sodGhpcy50YXNrRm9ybSkudGhlbihyZXMgPT4gew0KICAgICAgICAgICAgdGhpcy4kbW9kYWwubXNnU3VjY2VzcyhyZXMubXNnKTsNCiAgICAgICAgICAgIHRoaXMuZ29CYWNrKCk7DQogICAgICAgICAgfSk7DQogICAgICAgIH0NCiAgICAgIH0pOw0KICAgIH0sDQogICAgLyoqIOWPr+mAgOWbnuS7u+WKoeWIl+ihqCAqLw0KICAgIGhhbmRsZVJldHVybigpIHsNCiAgICAgIHRoaXMucmV0dXJuT3BlbiA9IHRydWU7DQogICAgICB0aGlzLnJldHVyblRpdGxlID0gIumAgOWbnua1geeoiyI7DQogICAgICByZXR1cm5MaXN0KHRoaXMudGFza0Zvcm0pLnRoZW4ocmVzID0+IHsNCiAgICAgICAgdGhpcy5yZXR1cm5UYXNrTGlzdCA9IHJlcy5kYXRhOw0KICAgICAgICB0aGlzLnRhc2tGb3JtLnZhcmlhYmxlcyA9IG51bGw7DQogICAgICB9KQ0KICAgIH0sDQogICAgLyoqIOaPkOS6pOmAgOWbnuS7u+WKoSAqLw0KICAgIHRhc2tSZXR1cm4oKSB7DQogICAgICB0aGlzLiRyZWZzWyJ0YXNrRm9ybSJdLnZhbGlkYXRlKHZhbGlkID0+IHsNCiAgICAgICAgaWYgKHZhbGlkKSB7DQogICAgICAgICAgcmV0dXJuVGFzayh0aGlzLnRhc2tGb3JtKS50aGVuKHJlcyA9PiB7DQogICAgICAgICAgICB0aGlzLiRtb2RhbC5tc2dTdWNjZXNzKHJlcy5tc2cpOw0KICAgICAgICAgICAgdGhpcy5nb0JhY2soKQ0KICAgICAgICAgIH0pOw0KICAgICAgICB9DQogICAgICB9KTsNCiAgICB9LA0KICAgIC8qKiDlj5bmtojlm57pgIDku7vliqHmjInpkq4gKi8NCiAgICBjYW5jZWxUYXNrKCkgew0KICAgICAgdGhpcy50YXNrRm9ybS5yZXR1cm5UYXNrU2hvdyA9IGZhbHNlOw0KICAgICAgdGhpcy50YXNrRm9ybS5kZWZhdWx0VGFza1Nob3cgPSB0cnVlOw0KICAgICAgdGhpcy5yZXR1cm5UYXNrTGlzdCA9IFtdOw0KICAgIH0sDQogICAgLyoqIOWnlOa0vuS7u+WKoSAqLw0KICAgIHN1Ym1pdERlbGV0ZVRhc2soKSB7DQogICAgICB0aGlzLiRyZWZzWyJ0YXNrRm9ybSJdLnZhbGlkYXRlKHZhbGlkID0+IHsNCiAgICAgICAgaWYgKHZhbGlkKSB7DQogICAgICAgICAgZGVsZWdhdGUodGhpcy50YXNrRm9ybSkudGhlbihyZXNwb25zZSA9PiB7DQogICAgICAgICAgICB0aGlzLiRtb2RhbC5tc2dTdWNjZXNzKHJlc3BvbnNlLm1zZyk7DQogICAgICAgICAgICB0aGlzLmdvQmFjaygpOw0KICAgICAgICAgIH0pOw0KICAgICAgICB9DQogICAgICB9KTsNCiAgICB9LA0KICAgIC8qKiDlj5bmtojlm57pgIDku7vliqHmjInpkq4gKi8NCiAgICBjYW5jZWxEZWxlZ2F0ZVRhc2soKSB7DQogICAgICB0aGlzLnRhc2tGb3JtLmRlbGVnYXRlVGFza1Nob3cgPSBmYWxzZTsNCiAgICAgIHRoaXMudGFza0Zvcm0uZGVmYXVsdFRhc2tTaG93ID0gdHJ1ZTsNCiAgICAgIHRoaXMucmV0dXJuVGFza0xpc3QgPSBbXTsNCiAgICB9LA0KICAgIC8qKiDnlLPor7fmtYHnqIvooajljZXmlbDmja7mj5DkuqQgKi8NCiAgICBzdWJtaXRGb3JtKGZvcm1EYXRhKSB7DQogICAgICAvLyDmoLnmja7lvZPliY3ku7vliqHmiJbogIXmtYHnqIvorr7orqHphY3nva7nmoTkuIvkuIDmraXoioLngrkgdG9kbyDmmoLml7bmnKrmtonlj4rliLDogIPomZHnvZHlhbPjgIHooajovr7lvI/lkozlpJroioLngrnmg4XlhrUNCiAgICAgIGNvbnN0IHBhcmFtcyA9IHt0YXNrSWQ6IHRoaXMudGFza0Zvcm0udGFza0lkfQ0KICAgICAgZ2V0TmV4dEZsb3dOb2RlKHBhcmFtcykudGhlbihyZXMgPT4gew0KICAgICAgICBjb25zdCBkYXRhID0gcmVzLmRhdGE7DQogICAgICAgIHRoaXMudGFza0Zvcm0uZm9ybURhdGEgPSBmb3JtRGF0YTsNCiAgICAgICAgaWYgKGRhdGEpIHsNCiAgICAgICAgICBpZiAoZGF0YS5kYXRhVHlwZSA9PT0gJ2R5bmFtaWMnKSB7DQogICAgICAgICAgICBpZiAoZGF0YS50eXBlID09PSAnYXNzaWduZWUnKSB7IC8vIOaMh+WumuS6uuWRmA0KICAgICAgICAgICAgICB0aGlzLmNoZWNrU2VuZFVzZXIgPSB0cnVlOw0KICAgICAgICAgICAgICB0aGlzLmNoZWNrVHlwZSA9ICJzaW5nbGUiOw0KICAgICAgICAgICAgfSBlbHNlIGlmIChkYXRhLnR5cGUgPT09ICdjYW5kaWRhdGVVc2VycycpIHsgIC8vIOWAmemAieS6uuWRmCjlpJrkuKopDQogICAgICAgICAgICAgIHRoaXMuY2hlY2tTZW5kVXNlciA9IHRydWU7DQogICAgICAgICAgICAgIHRoaXMuY2hlY2tUeXBlID0gIm11bHRpcGxlIjsNCiAgICAgICAgICAgIH0gZWxzZSBpZiAoZGF0YS50eXBlID09PSAnY2FuZGlkYXRlR3JvdXBzJykgeyAvLyDmjIflrprnu4Qo5omA5bGe6KeS6Imy5o6l5pS25Lu75YqhKQ0KICAgICAgICAgICAgICB0aGlzLmNoZWNrU2VuZFJvbGUgPSB0cnVlOw0KICAgICAgICAgICAgfSBlbHNlIHsgLy8g5Lya562+DQogICAgICAgICAgICAgIC8vIOa1geeoi+iuvuiuoeaMh+WumueahCBlbGVtZW50VmFyaWFibGUg5L2c5Li65Lya562+5Lq65ZGY5YiX6KGoDQogICAgICAgICAgICAgIHRoaXMubXVsdGlJbnN0YW5jZVZhcnMgPSBkYXRhLnZhcnM7DQogICAgICAgICAgICAgIHRoaXMuY2hlY2tTZW5kVXNlciA9IHRydWU7DQogICAgICAgICAgICAgIHRoaXMuY2hlY2tUeXBlID0gIm11bHRpcGxlIjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgdGhpcy5jb21wbGV0ZU9wZW4gPSB0cnVlOw0KICAgICAgICB0aGlzLmNvbXBsZXRlVGl0bGUgPSAi5rWB56iL5a6h5om5IjsNCiAgICAgIH0pDQogICAgfSwNCiAgfSwNCn07DQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/flowable/task/todo/detail","sourcesContent":["<template>\r\n  <div class=\"app-container\">\r\n    <el-card class=\"box-card\">\r\n      <div slot=\"header\" class=\"clearfix\">\r\n        <span class=\"el-icon-document\">待办任务</span>\r\n        <el-tag style=\"margin-left:10px\">发起人:{{ startUser }}</el-tag>\r\n        <el-tag>任务节点:{{ taskName }}</el-tag>\r\n        <el-button style=\"float: right;\" size=\"mini\" type=\"danger\" @click=\"goBack\">关闭</el-button>\r\n      </div>\r\n      <el-tabs tab-position=\"top\" v-model=\"activeName\" @tab-click=\"handleClick\">\r\n        <!--表单信息-->\r\n        <el-tab-pane label=\"表单信息\" name=\"1\">\r\n          <el-col :span=\"16\" :offset=\"4\">\r\n            <div class=\"test-form\">\r\n              <!--              <parser :key=\"new Date().getTime()\" :form-conf=\"variablesData\"/>-->\r\n              <parser :key=\"new Date().getTime()\" :form-conf=\"variablesData\" @submit=\"submitForm\" ref=\"parser\"/>\r\n\r\n            </div>\r\n            <div style=\"margin-left:15%;margin-bottom: 20px;font-size: 14px;\">\r\n              <el-button v-if=\"!formKeyExist\" icon=\"el-icon-edit-outline\" type=\"success\" size=\"mini\"\r\n                         @click=\"handleComplete\">审批\r\n              </el-button>\r\n              <!--                <el-button  icon=\"el-icon-edit-outline\" type=\"primary\" size=\"mini\" @click=\"handleDelegate\">委派</el-button>-->\r\n              <!--                <el-button  icon=\"el-icon-edit-outline\" type=\"primary\" size=\"mini\" @click=\"handleAssign\">转办</el-button>-->\r\n              <!--                <el-button  icon=\"el-icon-edit-outline\" type=\"primary\" size=\"mini\" @click=\"handleDelegate\">签收</el-button>-->\r\n              <!--              <el-button icon=\"el-icon-refresh-left\" type=\"warning\" size=\"mini\" @click=\"handleReturn\">退回</el-button>-->\r\n              <!--              <el-button icon=\"el-icon-circle-close\" type=\"danger\" size=\"mini\" @click=\"handleReject\">驳回</el-button>-->\r\n            </div>\r\n          </el-col>\r\n        </el-tab-pane>\r\n        <!--流程流转记录-->\r\n        <el-tab-pane label=\"流转记录\" name=\"2\">\r\n          <!--flowRecordList-->\r\n          <el-col :span=\"16\" :offset=\"4\">\r\n            <div class=\"block\">\r\n              <el-timeline>\r\n                <el-timeline-item\r\n                  v-for=\"(item,index ) in flowRecordList\"\r\n                  :key=\"index\"\r\n                  :icon=\"setIcon(item.finishTime)\"\r\n                  :color=\"setColor(item.finishTime)\"\r\n                >\r\n                  <p style=\"font-weight: 700\">{{ item.taskName }}</p>\r\n                  <el-card :body-style=\"{ padding: '10px' }\">\r\n                    <el-descriptions class=\"margin-top\" :column=\"1\" size=\"small\" border>\r\n                      <el-descriptions-item v-if=\"item.assigneeName\" label-class-name=\"my-label\">\r\n                        <template slot=\"label\"><i class=\"el-icon-user\"></i>办理人</template>\r\n                        {{ item.assigneeName }}\r\n                        <el-tag type=\"info\" size=\"mini\">{{ item.deptName }}</el-tag>\r\n                      </el-descriptions-item>\r\n                      <el-descriptions-item v-if=\"item.candidate\" label-class-name=\"my-label\">\r\n                        <template slot=\"label\"><i class=\"el-icon-user\"></i>候选办理</template>\r\n                        {{ item.candidate }}\r\n                      </el-descriptions-item>\r\n                      <el-descriptions-item label-class-name=\"my-label\">\r\n                        <template slot=\"label\"><i class=\"el-icon-date\"></i>接收时间</template>\r\n                        {{ item.createTime }}\r\n                      </el-descriptions-item>\r\n                      <el-descriptions-item v-if=\"item.finishTime\" label-class-name=\"my-label\">\r\n                        <template slot=\"label\"><i class=\"el-icon-date\"></i>处理时间</template>\r\n                        {{ item.finishTime }}\r\n                      </el-descriptions-item>\r\n                      <el-descriptions-item v-if=\"item.duration\" label-class-name=\"my-label\">\r\n                        <template slot=\"label\"><i class=\"el-icon-time\"></i>耗时</template>\r\n                        {{ item.duration }}\r\n                      </el-descriptions-item>\r\n                      <el-descriptions-item v-if=\"item.comment\" label-class-name=\"my-label\">\r\n                        <template slot=\"label\"><i class=\"el-icon-tickets\"></i>处理意见</template>\r\n                        {{ item.comment.comment }}\r\n                      </el-descriptions-item>\r\n                    </el-descriptions>\r\n                  </el-card>\r\n                </el-timeline-item>\r\n              </el-timeline>\r\n            </div>\r\n          </el-col>\r\n        </el-tab-pane>\r\n        <!--流程图-->\r\n        <el-tab-pane label=\"流程图\" name=\"3\">\r\n          <flow :flowData=\"flowData\"/>\r\n        </el-tab-pane>\r\n      </el-tabs>\r\n      <!--审批任务-->\r\n      <el-dialog :title=\"completeTitle\" :visible.sync=\"completeOpen\" width=\"60%\" append-to-body>\r\n        <el-form ref=\"taskForm\" :model=\"taskForm\">\r\n          <el-form-item prop=\"targetKey\">\r\n            <flow-user v-if=\"checkSendUser\" :checkType=\"checkType\" @handleUserSelect=\"handleUserSelect\"></flow-user>\r\n            <flow-role v-if=\"checkSendRole\" @handleRoleSelect=\"handleRoleSelect\"></flow-role>\r\n          </el-form-item>\r\n          <el-form-item label=\"处理意见\" label-width=\"80px\" prop=\"comment\"\r\n                        :rules=\"[{ required: true, message: '请输入处理意见', trigger: 'blur' }]\">\r\n            <el-input type=\"textarea\" v-model=\"taskForm.comment\" placeholder=\"请输入处理意见\"/>\r\n          </el-form-item>\r\n        </el-form>\r\n        <span slot=\"footer\" class=\"dialog-footer\">\r\n          <el-button @click=\"completeOpen = false\">取 消</el-button>\r\n          <el-button type=\"primary\" @click=\"taskComplete\">确 定</el-button>\r\n        </span>\r\n      </el-dialog>\r\n      <!--退回流程-->\r\n      <el-dialog :title=\"returnTitle\" :visible.sync=\"returnOpen\" width=\"40%\" append-to-body>\r\n        <el-form ref=\"taskForm\" :model=\"taskForm\" label-width=\"80px\">\r\n          <el-form-item label=\"退回节点\" prop=\"targetKey\">\r\n            <el-radio-group v-model=\"taskForm.targetKey\">\r\n              <el-radio-button\r\n                v-for=\"item in returnTaskList\"\r\n                :key=\"item.id\"\r\n                :label=\"item.id\"\r\n              >{{ item.name }}\r\n              </el-radio-button>\r\n            </el-radio-group>\r\n          </el-form-item>\r\n          <el-form-item label=\"退回意见\" prop=\"comment\"\r\n                        :rules=\"[{ required: true, message: '请输入意见', trigger: 'blur' }]\">\r\n            <el-input style=\"width: 50%\" type=\"textarea\" v-model=\"taskForm.comment\" placeholder=\"请输入意见\"/>\r\n          </el-form-item>\r\n        </el-form>\r\n        <span slot=\"footer\" class=\"dialog-footer\">\r\n              <el-button @click=\"returnOpen = false\">取 消</el-button>\r\n              <el-button type=\"primary\" @click=\"taskReturn\">确 定</el-button>\r\n          </span>\r\n      </el-dialog>\r\n      <!--驳回流程-->\r\n      <el-dialog :title=\"rejectTitle\" :visible.sync=\"rejectOpen\" width=\"40%\" append-to-body>\r\n        <el-form ref=\"taskForm\" :model=\"taskForm\" label-width=\"80px\">\r\n          <el-form-item label=\"驳回意见\" prop=\"comment\"\r\n                        :rules=\"[{ required: true, message: '请输入意见', trigger: 'blur' }]\">\r\n            <el-input style=\"width: 50%\" type=\"textarea\" v-model=\"taskForm.comment\" placeholder=\"请输入意见\"/>\r\n          </el-form-item>\r\n        </el-form>\r\n        <span slot=\"footer\" class=\"dialog-footer\">\r\n            <el-button @click=\"rejectOpen = false\">取 消</el-button>\r\n            <el-button type=\"primary\" @click=\"taskReject\">确 定</el-button>\r\n          </span>\r\n      </el-dialog>\r\n    </el-card>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {flowRecord} from \"@/api/flowable/finished\";\r\nimport FlowUser from '@/components/flow/User'\r\nimport FlowRole from '@/components/flow/Role'\r\nimport Parser from '@/components/parser/Parser'\r\nimport {getProcessVariables, flowXmlAndNode, definitionStart} from \"@/api/flowable/definition\";\r\nimport {\r\n  complete,\r\n  rejectTask,\r\n  returnList,\r\n  returnTask,\r\n  getNextFlowNode,\r\n  delegate,\r\n  flowTaskForm,\r\n} from \"@/api/flowable/todo\";\r\nimport flow from '@/views/flowable/task/todo/detail/flow'\r\nimport \"@riophae/vue-treeselect/dist/vue-treeselect.css\";\r\nimport {listUser} from \"@/api/system/user\";\r\n\r\nexport default {\r\n  name: \"Record\",\r\n  components: {\r\n    Parser,\r\n    flow,\r\n    FlowUser,\r\n    FlowRole,\r\n  },\r\n  props: {},\r\n  data() {\r\n    return {\r\n      // 模型xml数据\r\n      xmlData: \"\",\r\n      flowData: {},\r\n      activeName: '1',\r\n      // 部门名称\r\n      deptName: undefined,\r\n      // 部门树选项\r\n      // 用户表格数据\r\n      userList: null,\r\n      defaultProps: {\r\n        children: \"children\",\r\n        label: \"label\"\r\n      },\r\n      // 查询参数\r\n      queryParams: {\r\n        deptId: undefined\r\n      },\r\n      // 遮罩层\r\n      loading: true,\r\n      flowRecordList: [], // 流程流转数据\r\n      formConfCopy: {},\r\n      src: null,\r\n      rules: {}, // 表单校验\r\n      variablesForm: {}, // 流程变量数据\r\n      taskForm: {\r\n        returnTaskShow: false, // 是否展示回退表单\r\n        delegateTaskShow: false, // 是否展示回退表单\r\n        defaultTaskShow: true, // 默认处理\r\n        comment: \"\", // 意见内容\r\n        procInsId: \"\", // 流程实例编号\r\n        instanceId: \"\", // 流程实例编号\r\n        deployId: \"\",  // 流程定义编号\r\n        taskId: \"\",// 流程任务编号\r\n        procDefId: \"\",  // 流程编号\r\n        targetKey: \"\",\r\n        variables: {\r\n          variables: {}\r\n        },\r\n      },\r\n      assignee: null,\r\n      formConf: {}, // 默认表单数据\r\n      variables: [], // 流程变量数据\r\n      variablesData: {}, // 流程变量数据\r\n      returnTaskList: [],  // 回退列表数据\r\n      completeTitle: null,\r\n      completeOpen: false,\r\n      returnTitle: null,\r\n      returnOpen: false,\r\n      rejectOpen: false,\r\n      rejectTitle: null,\r\n      userData: [],\r\n      checkSendUser: false, // 是否展示人员选择模块\r\n      checkSendRole: false,// 是否展示角色选择模块\r\n      checkType: 'single', // 选择类型\r\n      taskName: null, // 任务节点\r\n      startUser: null, // 发起人信息,\r\n      multiInstanceVars: '', // 会签节点\r\n      formKeyExist: false, // 当前节点是否存在表单\r\n    };\r\n  },\r\n  created() {\r\n    if (this.$route.query) {\r\n      this.taskName = this.$route.query.taskName;\r\n      this.startUser = this.$route.query.startUser;\r\n      this.taskForm.deployId = this.$route.query.deployId;\r\n      this.taskForm.taskId = this.$route.query.taskId;\r\n      this.taskForm.procInsId = this.$route.query.procInsId;\r\n      this.taskForm.executionId = this.$route.query.executionId;\r\n      this.taskForm.instanceId = this.$route.query.procInsId;\r\n      // 流程任务获取变量信息\r\n      if (this.taskForm.taskId) {\r\n        this.processVariables(this.taskForm.taskId)\r\n        this.getFlowTaskForm(this.taskForm.taskId)\r\n      }\r\n      this.getFlowRecordList(this.taskForm.procInsId, this.taskForm.deployId);\r\n    }\r\n  },\r\n  methods: {\r\n    handleClick(tab, event) {\r\n      if (tab.name === '3') {\r\n        flowXmlAndNode({procInsId: this.taskForm.procInsId, deployId: this.taskForm.deployId}).then(res => {\r\n          this.flowData = res.data;\r\n        })\r\n      }\r\n    },\r\n    setIcon(val) {\r\n      if (val) {\r\n        return \"el-icon-check\";\r\n      } else {\r\n        return \"el-icon-time\";\r\n      }\r\n    },\r\n    setColor(val) {\r\n      if (val) {\r\n        return \"#2bc418\";\r\n      } else {\r\n        return \"#b3bdbb\";\r\n      }\r\n    },\r\n    // 用户信息选中数据\r\n    handleUserSelect(selection) {\r\n      if (selection) {\r\n        if (selection instanceof Array) {\r\n          const selectVal = selection.map(item => item.userId);\r\n          if (this.multiInstanceVars) {\r\n            this.$set(this.taskForm.variables, this.multiInstanceVars, selectVal);\r\n          } else {\r\n            this.$set(this.taskForm.variables, \"approval\", selectVal.join(','));\r\n          }\r\n        } else {\r\n          this.$set(this.taskForm.variables, \"approval\", selection.userId.toString());\r\n        }\r\n      }\r\n    },\r\n    // 角色信息选中数据\r\n    handleRoleSelect(selection) {\r\n      if (selection) {\r\n        if (selection instanceof Array) {\r\n          const selectVal = selection.map(item => item.roleId);\r\n          this.$set(this.taskForm.variables, \"approval\", selectVal.join(','));\r\n        } else {\r\n          this.$set(this.taskForm.variables, \"approval\", selection);\r\n        }\r\n      }\r\n    },\r\n    /** 流程流转记录 */\r\n    getFlowRecordList(procInsId, deployId) {\r\n      const that = this\r\n      const params = {procInsId: procInsId, deployId: deployId}\r\n      flowRecord(params).then(res => {\r\n        that.flowRecordList = res.data.flowList;\r\n      }).catch(res => {\r\n        this.goBack();\r\n      })\r\n    },\r\n    fillFormData(form, data) {\r\n      form.fields.forEach(item => {\r\n        const val = data[item.__vModel__]\r\n        if (val) {\r\n          item.__config__.defaultValue = val\r\n        }\r\n      })\r\n    },\r\n    /** 获取流程变量内容 */\r\n    processVariables(taskId) {\r\n      if (taskId) {\r\n        // 提交流程申请时填写的表单存入了流程变量中后续任务处理时需要展示\r\n        getProcessVariables(taskId).then(res => {\r\n          // this.variablesData = res.data.variables;\r\n        });\r\n      }\r\n    },\r\n    /** 流程节点表单 */\r\n    getFlowTaskForm(taskId) {\r\n      if (taskId) {\r\n        // 提交流程申请时填写的表单存入了流程变量中后续任务处理时需要展示\r\n        flowTaskForm({taskId: taskId}).then(res => {\r\n          this.variablesData = res.data.formData;\r\n          this.taskForm.variables = res.data.formData;\r\n          this.formKeyExist = res.data.formKeyExist;\r\n        });\r\n      }\r\n    },\r\n    /** 加载审批任务弹框 */\r\n    handleComplete() {\r\n      // this.completeOpen = true;\r\n      // this.completeTitle = \"流程审批\";\r\n      this.submitForm(null);\r\n    },\r\n    /** 用户审批任务 */\r\n    taskComplete() {\r\n      if (!this.taskForm.variables && this.checkSendUser) {\r\n        this.$modal.msgError(\"请选择流程接收人员!\");\r\n        return;\r\n      }\r\n      if (!this.taskForm.variables && this.checkSendRole) {\r\n        this.$modal.msgError(\"请选择流程接收角色组!\");\r\n        return;\r\n      }\r\n      if (!this.taskForm.comment) {\r\n        this.$modal.msgError(\"请输入审批意见!\");\r\n        return;\r\n      }\r\n      if (this.taskForm && this.formKeyExist) {\r\n        // 表单是否禁用\r\n        this.taskForm.formData.formData.disabled = true;\r\n        // 是否显示按钮\r\n        this.taskForm.formData.formData.formBtns = false;\r\n        this.taskForm.variables = Object.assign({}, this.taskForm.variables, this.taskForm.formData.valData);\r\n        this.taskForm.variables.variables = this.taskForm.formData.formData;\r\n        complete(this.taskForm).then(response => {\r\n          this.$modal.msgSuccess(response.msg);\r\n          this.goBack();\r\n        });\r\n      } else {\r\n        // 流程设计人员类型配置为固定人员接收任务时,直接提交任务到下一步\r\n        complete(this.taskForm).then(response => {\r\n          this.$modal.msgSuccess(response.msg);\r\n          this.goBack();\r\n        });\r\n      }\r\n    },\r\n    /** 委派任务 */\r\n    handleDelegate() {\r\n      this.taskForm.delegateTaskShow = true;\r\n      this.taskForm.defaultTaskShow = false;\r\n    },\r\n    handleAssign() {\r\n\r\n    },\r\n    /** 返回页面 */\r\n    goBack() {\r\n      // 关闭当前标签页并返回上个页面\r\n      const obj = { path: \"/task/todo\", query: { t: Date.now()} };\r\n      this.$tab.closeOpenPage(obj);\r\n    },\r\n    /** 驳回任务 */\r\n    handleReject() {\r\n      this.rejectOpen = true;\r\n      this.rejectTitle = \"驳回流程\";\r\n    },\r\n    /** 驳回任务 */\r\n    taskReject() {\r\n      this.$refs[\"taskForm\"].validate(valid => {\r\n        if (valid) {\r\n          rejectTask(this.taskForm).then(res => {\r\n            this.$modal.msgSuccess(res.msg);\r\n            this.goBack();\r\n          });\r\n        }\r\n      });\r\n    },\r\n    /** 可退回任务列表 */\r\n    handleReturn() {\r\n      this.returnOpen = true;\r\n      this.returnTitle = \"退回流程\";\r\n      returnList(this.taskForm).then(res => {\r\n        this.returnTaskList = res.data;\r\n        this.taskForm.variables = null;\r\n      })\r\n    },\r\n    /** 提交退回任务 */\r\n    taskReturn() {\r\n      this.$refs[\"taskForm\"].validate(valid => {\r\n        if (valid) {\r\n          returnTask(this.taskForm).then(res => {\r\n            this.$modal.msgSuccess(res.msg);\r\n            this.goBack()\r\n          });\r\n        }\r\n      });\r\n    },\r\n    /** 取消回退任务按钮 */\r\n    cancelTask() {\r\n      this.taskForm.returnTaskShow = false;\r\n      this.taskForm.defaultTaskShow = true;\r\n      this.returnTaskList = [];\r\n    },\r\n    /** 委派任务 */\r\n    submitDeleteTask() {\r\n      this.$refs[\"taskForm\"].validate(valid => {\r\n        if (valid) {\r\n          delegate(this.taskForm).then(response => {\r\n            this.$modal.msgSuccess(response.msg);\r\n            this.goBack();\r\n          });\r\n        }\r\n      });\r\n    },\r\n    /** 取消回退任务按钮 */\r\n    cancelDelegateTask() {\r\n      this.taskForm.delegateTaskShow = false;\r\n      this.taskForm.defaultTaskShow = true;\r\n      this.returnTaskList = [];\r\n    },\r\n    /** 申请流程表单数据提交 */\r\n    submitForm(formData) {\r\n      // 根据当前任务或者流程设计配置的下一步节点 todo 暂时未涉及到考虑网关、表达式和多节点情况\r\n      const params = {taskId: this.taskForm.taskId}\r\n      getNextFlowNode(params).then(res => {\r\n        const data = res.data;\r\n        this.taskForm.formData = formData;\r\n        if (data) {\r\n          if (data.dataType === 'dynamic') {\r\n            if (data.type === 'assignee') { // 指定人员\r\n              this.checkSendUser = true;\r\n              this.checkType = \"single\";\r\n            } else if (data.type === 'candidateUsers') {  // 候选人员(多个)\r\n              this.checkSendUser = true;\r\n              this.checkType = \"multiple\";\r\n            } else if (data.type === 'candidateGroups') { // 指定组(所属角色接收任务)\r\n              this.checkSendRole = true;\r\n            } else { // 会签\r\n              // 流程设计指定的 elementVariable 作为会签人员列表\r\n              this.multiInstanceVars = data.vars;\r\n              this.checkSendUser = true;\r\n              this.checkType = \"multiple\";\r\n            }\r\n          }\r\n        }\r\n        this.completeOpen = true;\r\n        this.completeTitle = \"流程审批\";\r\n      })\r\n    },\r\n  },\r\n};\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.test-form {\r\n  margin: 15px auto;\r\n  width: 800px;\r\n  padding: 15px;\r\n}\r\n\r\n.clearfix:before,\r\n.clearfix:after {\r\n  display: table;\r\n  content: \"\";\r\n}\r\n\r\n.clearfix:after {\r\n  clear: both\r\n}\r\n\r\n.box-card {\r\n  width: 100%;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.el-tag + .el-tag {\r\n  margin-left: 10px;\r\n}\r\n\r\n.my-label {\r\n  background: #E1F3D8;\r\n}\r\n</style>\r\n"]}]}