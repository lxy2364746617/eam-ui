{"remainingRequest":"E:\\visual_code_work_space\\cms-eam-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\visual_code_work_space\\cms-eam-ui\\src\\components\\Process\\components\\nodePanel\\property\\taskListener.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\visual_code_work_space\\cms-eam-ui\\src\\components\\Process\\components\\nodePanel\\property\\taskListener.vue","mtime":1693557459613},{"path":"E:\\visual_code_work_space\\cms-eam-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\visual_code_work_space\\cms-eam-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"E:\\visual_code_work_space\\cms-eam-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\visual_code_work_space\\cms-eam-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgbWl4aW5QYW5lbCBmcm9tICcuLi8uLi8uLi9jb21tb24vbWl4aW5QYW5lbCcNCmltcG9ydCBsaXN0ZW5lclBhcmFtIGZyb20gJy4vbGlzdGVuZXJQYXJhbScNCmltcG9ydCBMaXN0ZW5lckxpc3QgZnJvbSAnQC9jb21wb25lbnRzL1Byb2Nlc3MvY29tcG9uZW50cy9ub2RlUGFuZWwvcHJvcGVydHkvbGlzdGVuZXJMaXN0Jw0KZXhwb3J0IGRlZmF1bHQgew0KICBjb21wb25lbnRzOiB7IGxpc3RlbmVyUGFyYW0sIExpc3RlbmVyTGlzdCB9LA0KICBtaXhpbnM6IFttaXhpblBhbmVsXSwNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgZGlhbG9nVmlzaWJsZTogdHJ1ZSwNCiAgICAgIGxpc3RlbmVyRGlhbG9nVmlzaWJsZTogZmFsc2UsDQogICAgICBzaG93UGFyYW1EaWFsb2c6IGZhbHNlLA0KICAgICAgbm93SW5kZXg6IG51bGwsDQogICAgICBmb3JtRGF0YTogew0KICAgICAgICB0YXNrTGlzdGVuZXI6IFtdDQogICAgICB9DQogICAgfQ0KICB9LA0KICBjb21wdXRlZDogew0KICAgIGZvcm1Db25maWcoKSB7DQogICAgICAvLyAgIGNvbnN0IF90aGlzID0gdGhpcw0KICAgICAgcmV0dXJuIHsNCiAgICAgICAgaW5saW5lOiBmYWxzZSwNCiAgICAgICAgaXRlbTogWw0KICAgICAgICAgIHsNCiAgICAgICAgICAgIHhUeXBlOiAndGFicycsDQogICAgICAgICAgICB0YWJzOiBbDQogICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBsYWJlbDogJ+S7u+WKoeebkeWQrOWZqCcsDQogICAgICAgICAgICAgICAgbmFtZTogJ3Rhc2tMaXN0ZW5lcicsDQogICAgICAgICAgICAgICAgY29sdW1uOiBbDQogICAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgIGxhYmVsOiAn5LqL5Lu2JywNCiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ2V2ZW50JywNCiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDE4MCwNCiAgICAgICAgICAgICAgICAgICAgcnVsZXM6IFt7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn6K+36YCJ5oupJywgdHJpZ2dlcjogWydibHVyJywgJ2NoYW5nZSddIH1dLA0KICAgICAgICAgICAgICAgICAgICB4VHlwZTogJ3NlbGVjdCcsDQogICAgICAgICAgICAgICAgICAgIGRpYzogWw0KICAgICAgICAgICAgICAgICAgICAgIHsgbGFiZWw6ICdjcmVhdGUnLCB2YWx1ZTogJ2NyZWF0ZScgfSwNCiAgICAgICAgICAgICAgICAgICAgICB7IGxhYmVsOiAnYXNzaWdubWVudCcsIHZhbHVlOiAnYXNzaWdubWVudCcgfSwNCiAgICAgICAgICAgICAgICAgICAgICB7IGxhYmVsOiAnY29tcGxldGUnLCB2YWx1ZTogJ2NvbXBsZXRlJyB9LA0KICAgICAgICAgICAgICAgICAgICAgIHsgbGFiZWw6ICdkZWxldGUnLCB2YWx1ZTogJ2RlbGV0ZScgfQ0KICAgICAgICAgICAgICAgICAgICBdLA0KICAgICAgICAgICAgICAgICAgICB0b29sdGlwOiBgY3JlYXRl77yI5Yib5bu677yJ77ya5b2T5Lu75Yqh5bey57uP5Yib5bu677yM5bm25LiU5omA5pyJ5Lu75Yqh5Y+C5pWw6YO95bey57uP6K6+572u5pe26Kem5Y+R44CCPGJyIC8+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3NpZ25tZW5077yI5oyH5rS+77yJ77ya5b2T5Lu75Yqh5bey57uP5oyH5rS+57uZ5p+Q5Lq65pe26Kem5Y+R44CC6K+35rOo5oSP77ya5b2T5rWB56iL5omn6KGM5Yiw6L6+55So5oi35Lu75Yqh5pe277yM5Zyo6Kem5Y+RY3JlYXRl5LqL5Lu25LmL5YmN77yM5Lya6aaW5YWI6Kem5Y+RYXNzaWdubWVudOS6i+S7tuOAgjxiciAvPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcGxldGXvvIjlrozmiJDvvInvvJrlvZPku7vliqHlt7Lnu4/lrozmiJDvvIzku47ov5DooYzml7bmlbDmja7kuK3liKDpmaTliY3op6blj5HjgII8YnIgLz4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0Ze+8iOWIoOmZpO+8ie+8muWcqOS7u+WKoeWNs+Wwhuiiq+WIoOmZpOWJjeinpuWPkeOAguivt+azqOaEj+S7u+WKoeeUsWNvbXBsZXRlVGFza+ato+W4uOWujOaIkOaXtuS5n+S8muinpuWPkeOAgg0KICAgICAgICAgICAgICAgICAgICBgDQogICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICBsYWJlbDogJ+exu+WeiycsDQogICAgICAgICAgICAgICAgICAgIG5hbWU6ICd0eXBlJywNCiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDE4MCwNCiAgICAgICAgICAgICAgICAgICAgcnVsZXM6IFt7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn6K+36YCJ5oupJywgdHJpZ2dlcjogWydibHVyJywgJ2NoYW5nZSddIH1dLA0KICAgICAgICAgICAgICAgICAgICB4VHlwZTogJ3NlbGVjdCcsDQogICAgICAgICAgICAgICAgICAgIGRpYzogWw0KICAgICAgICAgICAgICAgICAgICAgIHsgbGFiZWw6ICfnsbsnLCB2YWx1ZTogJ2NsYXNzJyB9LA0KICAgICAgICAgICAgICAgICAgICAgIHsgbGFiZWw6ICfooajovr7lvI8nLCB2YWx1ZTogJ2V4cHJlc3Npb24nIH0sDQogICAgICAgICAgICAgICAgICAgICAgeyBsYWJlbDogJ+WnlOaJmOihqOi+vuW8jycsIHZhbHVlOiAnZGVsZWdhdGVFeHByZXNzaW9uJyB9DQogICAgICAgICAgICAgICAgICAgIF0sDQogICAgICAgICAgICAgICAgICAgIHRvb2x0aXA6IGDnsbvvvJrnpLrkvosgY29tLmNvbXBhbnkuTXlDdXN0b21MaXN0ZW5lcu+8jOiHquWumuS5ieexu+W/hemhu+WunueOsCBvcmcuZmxvd2FibGUuZW5naW5lLmRlbGVnYXRlLlRhc2tMaXN0ZW5lciDmjqXlj6MgPGJyIC8+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICDooajovr7lvI/vvJrnpLrkvosgXCR7bXlPYmplY3QuY2FsbE1ldGhvZCh0YXNrLCB0YXNrLmV2ZW50TmFtZSl9IDxiciAvPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg5aeU5omY6KGo6L6+5byP77ya56S65L6LIFwke215TGlzdGVuZXJTcHJpbmdCZWFufSDvvIzor6Ugc3ByaW5nQmVhbiDpnIDopoHlrp7njrAgb3JnLmZsb3dhYmxlLmVuZ2luZS5kZWxlZ2F0ZS5UYXNrTGlzdGVuZXIg5o6l5Y+jDQogICAgICAgICAgICAgICAgICAgIGANCiAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgIGxhYmVsOiAn5YC8JywNCiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ2NsYXNzTmFtZScsDQogICAgICAgICAgICAgICAgICAgIHhUeXBlOiAnaW5wdXQnLA0KICAgICAgICAgICAgICAgICAgICBydWxlczogW3sgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfor7fovpPlhaUnLCB0cmlnZ2VyOiBbJ2JsdXInLCAnY2hhbmdlJ10gfV0NCiAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgICAvLyB7DQogICAgICAgICAgICAgICAgICAvLyAgIHhUeXBlOiAnc2xvdCcsDQogICAgICAgICAgICAgICAgICAvLyAgIGxhYmVsOiAn5Y+C5pWwJywNCiAgICAgICAgICAgICAgICAgIC8vICAgd2lkdGg6IDEyMCwNCiAgICAgICAgICAgICAgICAgIC8vICAgc2xvdDogdHJ1ZSwNCiAgICAgICAgICAgICAgICAgIC8vICAgbmFtZTogJ3BhcmFtcycNCiAgICAgICAgICAgICAgICAgIC8vIH0NCiAgICAgICAgICAgICAgICBdDQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIF0NCiAgICAgICAgICB9DQogICAgICAgIF0NCiAgICAgIH0NCiAgICB9DQogIH0sDQogIG1vdW50ZWQoKSB7DQogICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gdGhpcy5hZGRCdXR0b24oKSkNCiAgICB0aGlzLmZvcm1EYXRhLnRhc2tMaXN0ZW5lciA9IHRoaXMuZWxlbWVudC5idXNpbmVzc09iamVjdC5leHRlbnNpb25FbGVtZW50cz8udmFsdWVzDQogICAgICAuZmlsdGVyKGl0ZW0gPT4gaXRlbS4kdHlwZSA9PT0gJ2Zsb3dhYmxlOlRhc2tMaXN0ZW5lcicpDQogICAgICAubWFwKGl0ZW0gPT4gew0KICAgICAgICBsZXQgdHlwZQ0KICAgICAgICBpZiAoJ2NsYXNzJyBpbiBpdGVtKSB0eXBlID0gJ2NsYXNzJw0KICAgICAgICBpZiAoJ2V4cHJlc3Npb24nIGluIGl0ZW0pIHR5cGUgPSAnZXhwcmVzc2lvbicNCiAgICAgICAgaWYgKCdkZWxlZ2F0ZUV4cHJlc3Npb24nIGluIGl0ZW0pIHR5cGUgPSAnZGVsZWdhdGVFeHByZXNzaW9uJw0KICAgICAgICByZXR1cm4gew0KICAgICAgICAgIGV2ZW50OiBpdGVtLmV2ZW50LA0KICAgICAgICAgIHR5cGU6IHR5cGUsDQogICAgICAgICAgY2xhc3NOYW1lOiBpdGVtW3R5cGVdLA0KICAgICAgICAgIHBhcmFtczogaXRlbS5maWVsZHM/Lm1hcChmaWVsZCA9PiB7DQogICAgICAgICAgICBsZXQgZmllbGRUeXBlDQogICAgICAgICAgICBpZiAoJ3N0cmluZ1ZhbHVlJyBpbiBmaWVsZCkgZmllbGRUeXBlID0gJ3N0cmluZ1ZhbHVlJw0KICAgICAgICAgICAgaWYgKCdleHByZXNzaW9uJyBpbiBmaWVsZCkgZmllbGRUeXBlID0gJ2V4cHJlc3Npb24nDQogICAgICAgICAgICByZXR1cm4gew0KICAgICAgICAgICAgICBuYW1lOiBmaWVsZC5uYW1lLA0KICAgICAgICAgICAgICB0eXBlOiBmaWVsZFR5cGUsDQogICAgICAgICAgICAgIHZhbHVlOiBmaWVsZFtmaWVsZFR5cGVdDQogICAgICAgICAgICB9DQogICAgICAgICAgfSkgPz8gW10NCiAgICAgICAgfQ0KICAgICAgfSkgPz8gW10NCiAgfSwNCiAgbWV0aG9kczogew0KICAgIGFkZEJ1dHRvbigpIHsNCiAgICAgIGNvbnN0IGJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpDQogICAgICBidXR0b24uaW5uZXJUZXh0ID0gJ+WGhee9ruebkeWQrOWZqCcNCiAgICAgIGJ1dHRvbi5zZXRBdHRyaWJ1dGUoJ3R5cGUnLCAnYnV0dG9uJykNCiAgICAgIGJ1dHRvbi5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ2VsLWJ1dHRvbiBlbC1idXR0b24tLXByaW1hcnkgZWwtYnV0dG9uLS1taW5pJykNCiAgICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMubGlzdGVuZXJEaWFsb2dWaXNpYmxlID0gdHJ1ZSkNCiAgICAgIGNvbnN0IGRpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwYW5lLXRhc2tMaXN0ZW5lcicpDQogICAgICBjb25zdCB0YWJsZSA9IGRpdi5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdlbC10YWJsZScpWzBdDQogICAgICBkaXYuaW5zZXJ0QmVmb3JlKGJ1dHRvbiwgdGFibGUpDQogICAgfSwNCiAgICBjb25maWdQYXJhbShpbmRleCkgew0KICAgICAgdGhpcy5ub3dJbmRleCA9IGluZGV4DQogICAgICBjb25zdCBub3dPYmogPSB0aGlzLmZvcm1EYXRhLnRhc2tMaXN0ZW5lcltpbmRleF0NCiAgICAgIGlmICghbm93T2JqLnBhcmFtcykgew0KICAgICAgICBub3dPYmoucGFyYW1zID0gW10NCiAgICAgIH0NCiAgICAgIHRoaXMuc2hvd1BhcmFtRGlhbG9nID0gdHJ1ZQ0KICAgIH0sDQogICAgZmluaXNoQ29uZmlnUGFyYW0ocGFyYW0pIHsNCiAgICAgIHRoaXMuc2hvd1BhcmFtRGlhbG9nID0gZmFsc2UNCiAgICAgIC8vIGhhY2sg5pWw6YeP5LiN5pu05paw6Zeu6aKYDQogICAgICBjb25zdCBjYWNoZSA9IHRoaXMuZm9ybURhdGEudGFza0xpc3RlbmVyW3RoaXMubm93SW5kZXhdDQogICAgICBjYWNoZS5wYXJhbXMgPSBwYXJhbQ0KICAgICAgdGhpcy4kc2V0KHRoaXMuZm9ybURhdGEudGFza0xpc3RlbmVyW3RoaXMubm93SW5kZXhdLCB0aGlzLm5vd0luZGV4LCBjYWNoZSkNCiAgICAgIHRoaXMubm93SW5kZXggPSBudWxsDQogICAgfSwNCiAgICB1cGRhdGVFbGVtZW50KCkgew0KICAgICAgaWYgKHRoaXMuZm9ybURhdGEudGFza0xpc3RlbmVyPy5sZW5ndGgpIHsNCiAgICAgICAgbGV0IGV4dGVuc2lvbkVsZW1lbnRzID0gdGhpcy5lbGVtZW50LmJ1c2luZXNzT2JqZWN0LmdldCgnZXh0ZW5zaW9uRWxlbWVudHMnKQ0KICAgICAgICBpZiAoIWV4dGVuc2lvbkVsZW1lbnRzKSB7DQogICAgICAgICAgZXh0ZW5zaW9uRWxlbWVudHMgPSB0aGlzLm1vZGVsZXIuZ2V0KCdtb2RkbGUnKS5jcmVhdGUoJ2JwbW46RXh0ZW5zaW9uRWxlbWVudHMnKQ0KICAgICAgICB9DQogICAgICAgIC8vIOa4hemZpOaXp+WAvA0KICAgICAgICBleHRlbnNpb25FbGVtZW50cy52YWx1ZXMgPSBleHRlbnNpb25FbGVtZW50cy52YWx1ZXM/LmZpbHRlcihpdGVtID0+IGl0ZW0uJHR5cGUgIT09ICdmbG93YWJsZTpUYXNrTGlzdGVuZXInKSA/PyBbXQ0KICAgICAgICB0aGlzLmZvcm1EYXRhLnRhc2tMaXN0ZW5lci5mb3JFYWNoKGl0ZW0gPT4gew0KICAgICAgICAgIGNvbnN0IHRhc2tMaXN0ZW5lciA9IHRoaXMubW9kZWxlci5nZXQoJ21vZGRsZScpLmNyZWF0ZSgnZmxvd2FibGU6VGFza0xpc3RlbmVyJykNCiAgICAgICAgICB0YXNrTGlzdGVuZXJbJ2V2ZW50J10gPSBpdGVtLmV2ZW50DQogICAgICAgICAgdGFza0xpc3RlbmVyW2l0ZW0udHlwZV0gPSBpdGVtLmNsYXNzTmFtZQ0KICAgICAgICAgIGlmIChpdGVtLnBhcmFtcyAmJiBpdGVtLnBhcmFtcy5sZW5ndGgpIHsNCiAgICAgICAgICAgIGl0ZW0ucGFyYW1zLmZvckVhY2goZmllbGQgPT4gew0KICAgICAgICAgICAgICBjb25zdCBmaWVsZEVsZW1lbnQgPSB0aGlzLm1vZGVsZXIuZ2V0KCdtb2RkbGUnKS5jcmVhdGUoJ2Zsb3dhYmxlOkZpZWxkJykNCiAgICAgICAgICAgICAgZmllbGRFbGVtZW50WyduYW1lJ10gPSBmaWVsZC5uYW1lDQogICAgICAgICAgICAgIGZpZWxkRWxlbWVudFtmaWVsZC50eXBlXSA9IGZpZWxkLnZhbHVlDQogICAgICAgICAgICAgIC8vIOazqOaEj++8mmZsb3dhYmxlLmpzb24g5Lit5a6a5LmJ55qEc3RyaW5n5ZKMZXhwcmVzc2lvbuexu+S4uuWwj+WGme+8jOS4jeeEtuS8muWSjOWOn+eUn+eahFN0cmluZ+exu+WGsueqge+8jOatpOWkhOS4umhhY2sNCiAgICAgICAgICAgICAgLy8gY29uc3QgdmFsdWVFbGVtZW50ID0gdGhpcy5tb2RlbGVyLmdldCgnbW9kZGxlJykuY3JlYXRlKGBmbG93YWJsZToke2ZpZWxkLnR5cGV9YCwgeyBib2R5OiBmaWVsZC52YWx1ZSB9KQ0KICAgICAgICAgICAgICAvLyBmaWVsZEVsZW1lbnRbZmllbGQudHlwZV0gPSB2YWx1ZUVsZW1lbnQNCiAgICAgICAgICAgICAgdGFza0xpc3RlbmVyLmdldCgnZmllbGRzJykucHVzaChmaWVsZEVsZW1lbnQpDQogICAgICAgICAgICB9KQ0KICAgICAgICAgIH0NCiAgICAgICAgICBleHRlbnNpb25FbGVtZW50cy5nZXQoJ3ZhbHVlcycpLnB1c2godGFza0xpc3RlbmVyKQ0KICAgICAgICB9KQ0KICAgICAgICB0aGlzLnVwZGF0ZVByb3BlcnRpZXMoeyBleHRlbnNpb25FbGVtZW50czogZXh0ZW5zaW9uRWxlbWVudHMgfSkNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIGNvbnN0IGV4dGVuc2lvbkVsZW1lbnRzID0gdGhpcy5lbGVtZW50LmJ1c2luZXNzT2JqZWN0W2BleHRlbnNpb25FbGVtZW50c2BdDQogICAgICAgIGlmIChleHRlbnNpb25FbGVtZW50cykgew0KICAgICAgICAgIGV4dGVuc2lvbkVsZW1lbnRzLnZhbHVlcyA9IGV4dGVuc2lvbkVsZW1lbnRzLnZhbHVlcz8uZmlsdGVyKGl0ZW0gPT4gaXRlbS4kdHlwZSAhPT0gJ2Zsb3dhYmxlOlRhc2tMaXN0ZW5lcicpID8/IFtdDQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9LA0KICAgIGNsb3NlRGlhbG9nKCkgew0KICAgICAgdGhpcy4kcmVmcy54Rm9ybS52YWxpZGF0ZSgpLnRoZW4oKCkgPT4gew0KICAgICAgICB0aGlzLnVwZGF0ZUVsZW1lbnQoKQ0KICAgICAgICB0aGlzLmRpYWxvZ1Zpc2libGUgPSBmYWxzZQ0KICAgICAgfSkuY2F0Y2goZSA9PiBjb25zb2xlLmVycm9yKGUpKQ0KICAgIH0sDQogICAgYWRkTGlzdGVuZXIoZGF0YSkgew0KICAgICAgdGhpcy5mb3JtRGF0YS50YXNrTGlzdGVuZXIgPSB0aGlzLmZvcm1EYXRhLnRhc2tMaXN0ZW5lci5jb25jYXQoZGF0YSkNCiAgICB9DQogIH0NCn0NCg=="},{"version":3,"sources":["taskListener.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"taskListener.vue","sourceRoot":"src/components/Process/components/nodePanel/property","sourcesContent":["<template>\r\n  <div>\r\n    <el-dialog\r\n      title=\"任务监听器\"\r\n      :visible.sync=\"dialogVisible\"\r\n      width=\"900px\"\r\n      :close-on-click-modal=\"false\"\r\n      :close-on-press-escape=\"false\"\r\n      :show-close=\"false\"\r\n      @closed=\"$emit('close')\"\r\n    >\r\n      <x-form ref=\"xForm\" v-model=\"formData\" :config=\"formConfig\">\r\n        <template #params=\"scope\">\r\n          <el-badge :value=\"scope.row.params ? scope.row.params.length : 0\" type=\"primary\">\r\n            <el-button size=\"small\" @click=\"configParam(scope.$index)\">配置</el-button>\r\n          </el-badge>\r\n        </template>\r\n      </x-form>\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button type=\"primary\" size=\"medium\" @click=\"closeDialog\">确 定</el-button>\r\n      </span>\r\n      <listener-list\r\n        :visible=\"listenerDialogVisible\"\r\n        @close=\"() => this.listenerDialogVisible = false\"\r\n        @submit=\"addListener\"\r\n      />\r\n    </el-dialog>\r\n    <listenerParam v-if=\"showParamDialog\" :value=\"formData.taskListener[nowIndex].params\" @close=\"finishConfigParam\" />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport mixinPanel from '../../../common/mixinPanel'\r\nimport listenerParam from './listenerParam'\r\nimport ListenerList from '@/components/Process/components/nodePanel/property/listenerList'\r\nexport default {\r\n  components: { listenerParam, ListenerList },\r\n  mixins: [mixinPanel],\r\n  data() {\r\n    return {\r\n      dialogVisible: true,\r\n      listenerDialogVisible: false,\r\n      showParamDialog: false,\r\n      nowIndex: null,\r\n      formData: {\r\n        taskListener: []\r\n      }\r\n    }\r\n  },\r\n  computed: {\r\n    formConfig() {\r\n      //   const _this = this\r\n      return {\r\n        inline: false,\r\n        item: [\r\n          {\r\n            xType: 'tabs',\r\n            tabs: [\r\n              {\r\n                label: '任务监听器',\r\n                name: 'taskListener',\r\n                column: [\r\n                  {\r\n                    label: '事件',\r\n                    name: 'event',\r\n                    width: 180,\r\n                    rules: [{ required: true, message: '请选择', trigger: ['blur', 'change'] }],\r\n                    xType: 'select',\r\n                    dic: [\r\n                      { label: 'create', value: 'create' },\r\n                      { label: 'assignment', value: 'assignment' },\r\n                      { label: 'complete', value: 'complete' },\r\n                      { label: 'delete', value: 'delete' }\r\n                    ],\r\n                    tooltip: `create（创建）：当任务已经创建，并且所有任务参数都已经设置时触发。<br />\r\n                              assignment（指派）：当任务已经指派给某人时触发。请注意：当流程执行到达用户任务时，在触发create事件之前，会首先触发assignment事件。<br />\r\n                              complete（完成）：当任务已经完成，从运行时数据中删除前触发。<br />\r\n                              delete（删除）：在任务即将被删除前触发。请注意任务由completeTask正常完成时也会触发。\r\n                    `\r\n                  },\r\n                  {\r\n                    label: '类型',\r\n                    name: 'type',\r\n                    width: 180,\r\n                    rules: [{ required: true, message: '请选择', trigger: ['blur', 'change'] }],\r\n                    xType: 'select',\r\n                    dic: [\r\n                      { label: '类', value: 'class' },\r\n                      { label: '表达式', value: 'expression' },\r\n                      { label: '委托表达式', value: 'delegateExpression' }\r\n                    ],\r\n                    tooltip: `类：示例 com.company.MyCustomListener，自定义类必须实现 org.flowable.engine.delegate.TaskListener 接口 <br />\r\n                              表达式：示例 \\${myObject.callMethod(task, task.eventName)} <br />\r\n                              委托表达式：示例 \\${myListenerSpringBean} ，该 springBean 需要实现 org.flowable.engine.delegate.TaskListener 接口\r\n                    `\r\n                  },\r\n                  {\r\n                    label: '值',\r\n                    name: 'className',\r\n                    xType: 'input',\r\n                    rules: [{ required: true, message: '请输入', trigger: ['blur', 'change'] }]\r\n                  },\r\n                  // {\r\n                  //   xType: 'slot',\r\n                  //   label: '参数',\r\n                  //   width: 120,\r\n                  //   slot: true,\r\n                  //   name: 'params'\r\n                  // }\r\n                ]\r\n              }\r\n            ]\r\n          }\r\n        ]\r\n      }\r\n    }\r\n  },\r\n  mounted() {\r\n    this.$nextTick(() => this.addButton())\r\n    this.formData.taskListener = this.element.businessObject.extensionElements?.values\r\n      .filter(item => item.$type === 'flowable:TaskListener')\r\n      .map(item => {\r\n        let type\r\n        if ('class' in item) type = 'class'\r\n        if ('expression' in item) type = 'expression'\r\n        if ('delegateExpression' in item) type = 'delegateExpression'\r\n        return {\r\n          event: item.event,\r\n          type: type,\r\n          className: item[type],\r\n          params: item.fields?.map(field => {\r\n            let fieldType\r\n            if ('stringValue' in field) fieldType = 'stringValue'\r\n            if ('expression' in field) fieldType = 'expression'\r\n            return {\r\n              name: field.name,\r\n              type: fieldType,\r\n              value: field[fieldType]\r\n            }\r\n          }) ?? []\r\n        }\r\n      }) ?? []\r\n  },\r\n  methods: {\r\n    addButton() {\r\n      const button = document.createElement('button')\r\n      button.innerText = '内置监听器'\r\n      button.setAttribute('type', 'button')\r\n      button.setAttribute('class', 'el-button el-button--primary el-button--mini')\r\n      button.addEventListener('click', () => this.listenerDialogVisible = true)\r\n      const div = document.getElementById('pane-taskListener')\r\n      const table = div.getElementsByClassName('el-table')[0]\r\n      div.insertBefore(button, table)\r\n    },\r\n    configParam(index) {\r\n      this.nowIndex = index\r\n      const nowObj = this.formData.taskListener[index]\r\n      if (!nowObj.params) {\r\n        nowObj.params = []\r\n      }\r\n      this.showParamDialog = true\r\n    },\r\n    finishConfigParam(param) {\r\n      this.showParamDialog = false\r\n      // hack 数量不更新问题\r\n      const cache = this.formData.taskListener[this.nowIndex]\r\n      cache.params = param\r\n      this.$set(this.formData.taskListener[this.nowIndex], this.nowIndex, cache)\r\n      this.nowIndex = null\r\n    },\r\n    updateElement() {\r\n      if (this.formData.taskListener?.length) {\r\n        let extensionElements = this.element.businessObject.get('extensionElements')\r\n        if (!extensionElements) {\r\n          extensionElements = this.modeler.get('moddle').create('bpmn:ExtensionElements')\r\n        }\r\n        // 清除旧值\r\n        extensionElements.values = extensionElements.values?.filter(item => item.$type !== 'flowable:TaskListener') ?? []\r\n        this.formData.taskListener.forEach(item => {\r\n          const taskListener = this.modeler.get('moddle').create('flowable:TaskListener')\r\n          taskListener['event'] = item.event\r\n          taskListener[item.type] = item.className\r\n          if (item.params && item.params.length) {\r\n            item.params.forEach(field => {\r\n              const fieldElement = this.modeler.get('moddle').create('flowable:Field')\r\n              fieldElement['name'] = field.name\r\n              fieldElement[field.type] = field.value\r\n              // 注意：flowable.json 中定义的string和expression类为小写，不然会和原生的String类冲突，此处为hack\r\n              // const valueElement = this.modeler.get('moddle').create(`flowable:${field.type}`, { body: field.value })\r\n              // fieldElement[field.type] = valueElement\r\n              taskListener.get('fields').push(fieldElement)\r\n            })\r\n          }\r\n          extensionElements.get('values').push(taskListener)\r\n        })\r\n        this.updateProperties({ extensionElements: extensionElements })\r\n      } else {\r\n        const extensionElements = this.element.businessObject[`extensionElements`]\r\n        if (extensionElements) {\r\n          extensionElements.values = extensionElements.values?.filter(item => item.$type !== 'flowable:TaskListener') ?? []\r\n        }\r\n      }\r\n    },\r\n    closeDialog() {\r\n      this.$refs.xForm.validate().then(() => {\r\n        this.updateElement()\r\n        this.dialogVisible = false\r\n      }).catch(e => console.error(e))\r\n    },\r\n    addListener(data) {\r\n      this.formData.taskListener = this.formData.taskListener.concat(data)\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n.flow-containers  .el-badge__content.is-fixed {\r\n  top: 18px;\r\n}\r\n</style>\r\n"]}]}