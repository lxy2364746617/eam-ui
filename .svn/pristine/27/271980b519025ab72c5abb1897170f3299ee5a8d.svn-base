{"remainingRequest":"E:\\visual_code_work_space\\cms-eam-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\visual_code_work_space\\cms-eam-ui\\src\\components\\Process\\components\\nodePanel\\task.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\visual_code_work_space\\cms-eam-ui\\src\\components\\Process\\components\\nodePanel\\task.vue","mtime":1693557459616},{"path":"E:\\visual_code_work_space\\cms-eam-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\visual_code_work_space\\cms-eam-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"E:\\visual_code_work_space\\cms-eam-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\visual_code_work_space\\cms-eam-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgbWl4aW5QYW5lbCBmcm9tICcuLi8uLi9jb21tb24vbWl4aW5QYW5lbCcNCmltcG9ydCBleGVjdXRpb25MaXN0ZW5lckRpYWxvZyBmcm9tICcuL3Byb3BlcnR5L2V4ZWN1dGlvbkxpc3RlbmVyJw0KaW1wb3J0IHRhc2tMaXN0ZW5lckRpYWxvZyBmcm9tICcuL3Byb3BlcnR5L3Rhc2tMaXN0ZW5lcicNCmltcG9ydCBtdWx0aUluc3RhbmNlRGlhbG9nIGZyb20gJy4vcHJvcGVydHkvbXVsdGlJbnN0YW5jZScNCmltcG9ydCB7IGNvbW1vblBhcnNlLCB1c2VyVGFza1BhcnNlIH0gZnJvbSAnLi4vLi4vY29tbW9uL3BhcnNlRWxlbWVudCcNCmltcG9ydCB7U3RyVXRpbH0gZnJvbSAnQC91dGlscy9TdHJVdGlsJw0KaW1wb3J0IEZsb3dVc2VyIGZyb20gJ0AvY29tcG9uZW50cy9mbG93L1VzZXInDQppbXBvcnQgRmxvd1JvbGUgZnJvbSAnQC9jb21wb25lbnRzL2Zsb3cvUm9sZScNCmltcG9ydCBGbG93RXhwIGZyb20gJ0AvY29tcG9uZW50cy9mbG93L0V4cHJlc3Npb24nDQppbXBvcnQgeyBsaXN0QWxsRm9ybSB9IGZyb20gJ0AvYXBpL2Zsb3dhYmxlL2Zvcm0nDQoNCmV4cG9ydCBkZWZhdWx0IHsNCiAgY29tcG9uZW50czogew0KICAgIGV4ZWN1dGlvbkxpc3RlbmVyRGlhbG9nLA0KICAgIHRhc2tMaXN0ZW5lckRpYWxvZywNCiAgICBtdWx0aUluc3RhbmNlRGlhbG9nLA0KICAgIEZsb3dVc2VyLA0KICAgIEZsb3dSb2xlLA0KICAgIEZsb3dFeHAsDQogIH0sDQogIG1peGluczogW21peGluUGFuZWxdLA0KICBwcm9wczogew0KICAgIHVzZXJzOiB7DQogICAgICB0eXBlOiBBcnJheSwNCiAgICAgIHJlcXVpcmVkOiB0cnVlDQogICAgfSwNCiAgICBncm91cHM6IHsNCiAgICAgIHR5cGU6IEFycmF5LA0KICAgICAgcmVxdWlyZWQ6IHRydWUNCiAgICB9LA0KICAgIGV4cHM6IHsNCiAgICAgIHR5cGU6IEFycmF5LA0KICAgICAgcmVxdWlyZWQ6IHRydWUNCiAgICB9DQogIH0sDQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIHVzZXJUeXBlT3B0aW9uOiBbDQogICAgICAgIHsgbGFiZWw6ICfmjIflrprkurrlkZgnLCB2YWx1ZTogJ2Fzc2lnbmVlJyB9LA0KICAgICAgICB7IGxhYmVsOiAn5YCZ6YCJ5Lq65ZGYJywgdmFsdWU6ICdjYW5kaWRhdGVVc2VycycgfSwNCiAgICAgICAgeyBsYWJlbDogJ+WAmemAieinkuiJsicsIHZhbHVlOiAnY2FuZGlkYXRlR3JvdXBzJyB9DQogICAgICBdLA0KICAgICAgZGlhbG9nTmFtZTogJycsDQogICAgICBleGVjdXRpb25MaXN0ZW5lckxlbmd0aDogMCwNCiAgICAgIHRhc2tMaXN0ZW5lckxlbmd0aDogMCwNCiAgICAgIGhhc011bHRpSW5zdGFuY2U6IGZhbHNlLA0KICAgICAgdXNlclZpc2libGU6IGZhbHNlLA0KICAgICAgcm9sZVZpc2libGU6IGZhbHNlLA0KICAgICAgZXhwVmlzaWJsZTogZmFsc2UsDQogICAgICBmb3JtRGF0YToge30sDQogICAgICBhc3NpZ25lZTogbnVsbCwNCiAgICAgIGNhbmRpZGF0ZVVzZXJzOiBudWxsLA0KICAgICAgY2FuZGlkYXRlR3JvdXBzOiBudWxsLA0KICAgICAgLy8g6YCJ57G75Z6LDQogICAgICBjaGVja1R5cGU6ICdzaW5nbGUnLA0KICAgICAgLy8g6YCJ5Lit55qE5YC8DQogICAgICBjaGVja1ZhbHVlczogbnVsbCwNCiAgICAgIC8vIOaVsOaNruWbnuaYvg0KICAgICAgc2VsZWN0VmFsdWVzOiBudWxsLA0KICAgICAgLy8g55So5oi35YiX6KGoDQogICAgICB1c2VyTGlzdDogdGhpcy51c2VycywNCiAgICAgIC8vIOinkuiJsuWIl+ihqA0KICAgICAgZ3JvdXBMaXN0OiB0aGlzLmdyb3VwcywNCiAgICAgIC8vIOihqOi+vuW8j+WIl+ihqA0KICAgICAgZXhwTGlzdDogdGhpcy5leHBzLA0KICAgICAgLy8g6KGo6L6+5byP57G75Z6LDQogICAgICBleHBUeXBlOiBudWxsLA0KICAgICAgLy8g6KGo5Y2V5YiX6KGoDQogICAgICBmb3JtTGlzdDogW10sDQogICAgfQ0KICB9LA0KICBjb21wdXRlZDogew0KICAgIGZvcm1Db25maWcoKSB7DQogICAgICBjb25zdCBfdGhpcyA9IHRoaXMNCiAgICAgIHJldHVybiB7DQogICAgICAgIGlubGluZTogZmFsc2UsDQogICAgICAgIGl0ZW06IFsNCiAgICAgICAgICB7DQogICAgICAgICAgICB4VHlwZTogJ2lucHV0JywNCiAgICAgICAgICAgIG5hbWU6ICdpZCcsDQogICAgICAgICAgICBsYWJlbDogJ+iKgueCuSBpZCcsDQogICAgICAgICAgICBydWxlczogW3sgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICdJZCDkuI3og73kuLrnqbonIH1dDQogICAgICAgICAgfSwNCiAgICAgICAgICB7DQogICAgICAgICAgICB4VHlwZTogJ2lucHV0JywNCiAgICAgICAgICAgIG5hbWU6ICduYW1lJywNCiAgICAgICAgICAgIGxhYmVsOiAn6IqC54K55ZCN56ewJywNCiAgICAgICAgICAgIHJ1bGVzOiBbeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+iKgueCueWQjeensOS4jeiDveS4uuepuicgfV0NCiAgICAgICAgICB9LA0KICAgICAgICAgIHsNCiAgICAgICAgICAgIHhUeXBlOiAnaW5wdXQnLA0KICAgICAgICAgICAgbmFtZTogJ2RvY3VtZW50YXRpb24nLA0KICAgICAgICAgICAgbGFiZWw6ICfoioLngrnmj4/ov7AnDQogICAgICAgICAgfSwNCiAgICAgICAgICB7DQogICAgICAgICAgICB4VHlwZTogJ3Nsb3QnLA0KICAgICAgICAgICAgbmFtZTogJ2V4ZWN1dGlvbkxpc3RlbmVyJywNCiAgICAgICAgICAgIGxhYmVsOiAn5omn6KGM55uR5ZCs5ZmoJw0KICAgICAgICAgIH0sDQogICAgICAgICAgew0KICAgICAgICAgICAgeFR5cGU6ICdzbG90JywNCiAgICAgICAgICAgIG5hbWU6ICd0YXNrTGlzdGVuZXInLA0KICAgICAgICAgICAgbGFiZWw6ICfku7vliqHnm5HlkKzlmagnLA0KICAgICAgICAgICAgc2hvdzogISFfdGhpcy5zaG93Q29uZmlnLnRhc2tMaXN0ZW5lcg0KICAgICAgICAgIH0sDQogICAgICAgICAgew0KICAgICAgICAgICAgeFR5cGU6ICdzZWxlY3QnLA0KICAgICAgICAgICAgbmFtZTogJ3VzZXJUeXBlJywNCiAgICAgICAgICAgIGxhYmVsOiAn55So5oi357G75Z6LJywNCiAgICAgICAgICAgIC8vIGNsZWFyYWJsZTogdHJ1ZSwNCiAgICAgICAgICAgIGRpYzogX3RoaXMudXNlclR5cGVPcHRpb24sDQogICAgICAgICAgICAvLyBydWxlczogW3sgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfnlKjmiLfnsbvlnovkuI3og73kuLrnqbonIH1dLA0KICAgICAgICAgICAgc2hvdzogISFfdGhpcy5zaG93Q29uZmlnLnVzZXJUeXBlDQogICAgICAgICAgfSwNCiAgICAgICAgICB7DQogICAgICAgICAgICB4VHlwZTogJ3Nsb3QnLA0KICAgICAgICAgICAgbmFtZTogJ2NoZWNrU2luZ2xlVXNlcicsDQogICAgICAgICAgICBsYWJlbDogJ+aMh+WumuS6uuWRmCcsDQogICAgICAgICAgICAvLyBydWxlczogW3sgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfmjIflrprkurrlkZjkuI3og73kuLrnqbonIH1dLA0KICAgICAgICAgICAgc2hvdzogISFfdGhpcy5zaG93Q29uZmlnLmFzc2lnbmVlICYmIF90aGlzLmZvcm1EYXRhLnVzZXJUeXBlID09PSAnYXNzaWduZWUnDQogICAgICAgICAgfSwNCiAgICAgICAgICB7DQogICAgICAgICAgICB4VHlwZTogJ3Nsb3QnLA0KICAgICAgICAgICAgbmFtZTogJ2NoZWNrTXVsdGlwbGVVc2VyJywNCiAgICAgICAgICAgIGxhYmVsOiAn5YCZ6YCJ5Lq65ZGYJywNCiAgICAgICAgICAgIC8vIHJ1bGVzOiBbeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+WAmemAieS6uuWRmOS4jeiDveS4uuepuicgfV0sDQogICAgICAgICAgICBzaG93OiAhIV90aGlzLnNob3dDb25maWcuY2FuZGlkYXRlVXNlcnMgJiYgX3RoaXMuZm9ybURhdGEudXNlclR5cGUgPT09ICdjYW5kaWRhdGVVc2VycycNCiAgICAgICAgICB9LA0KICAgICAgICAgIHsNCiAgICAgICAgICAgIHhUeXBlOiAnc2xvdCcsDQogICAgICAgICAgICBuYW1lOiAnY2hlY2tSb2xlJywNCiAgICAgICAgICAgIGxhYmVsOiAn5YCZ6YCJ6KeS6ImyJywNCiAgICAgICAgICAgIC8vIHJ1bGVzOiBbeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+WAmemAieinkuiJsuS4jeiDveS4uuepuicgfV0sDQogICAgICAgICAgICBzaG93OiAhIV90aGlzLnNob3dDb25maWcuY2FuZGlkYXRlR3JvdXBzICYmIF90aGlzLmZvcm1EYXRhLnVzZXJUeXBlID09PSAnY2FuZGlkYXRlR3JvdXBzJw0KICAgICAgICAgIH0sDQogICAgICAgICAgew0KICAgICAgICAgICAgeFR5cGU6ICdzbG90JywNCiAgICAgICAgICAgIG5hbWU6ICdtdWx0aUluc3RhbmNlJywNCiAgICAgICAgICAgIGxhYmVsOiAn5aSa5a6e5L6LJw0KICAgICAgICAgIH0sDQogICAgICAgICAgew0KICAgICAgICAgICAgeFR5cGU6ICdzd2l0Y2gnLA0KICAgICAgICAgICAgbmFtZTogJ2FzeW5jJywNCiAgICAgICAgICAgIGxhYmVsOiAn5byC5q2lJywNCiAgICAgICAgICAgIGFjdGl2ZVRleHQ6ICfmmK8nLA0KICAgICAgICAgICAgaW5hY3RpdmVUZXh0OiAn5ZCmJywNCiAgICAgICAgICAgIHNob3c6ICEhX3RoaXMuc2hvd0NvbmZpZy5hc3luYw0KICAgICAgICAgIH0sDQogICAgICAgICAgew0KICAgICAgICAgICAgeFR5cGU6ICdpbnB1dCcsDQogICAgICAgICAgICBuYW1lOiAncHJpb3JpdHknLA0KICAgICAgICAgICAgbGFiZWw6ICfkvJjlhYjnuqcnLA0KICAgICAgICAgICAgc2hvdzogISFfdGhpcy5zaG93Q29uZmlnLnByaW9yaXR5DQogICAgICAgICAgfSwNCiAgICAgICAgICAvLyB7DQogICAgICAgICAgLy8gICB4VHlwZTogJ2lucHV0JywNCiAgICAgICAgICAvLyAgIG5hbWU6ICdmb3JtS2V5JywNCiAgICAgICAgICAvLyAgIGxhYmVsOiAn6KGo5Y2V5qCH6K+Ga2V5JywNCiAgICAgICAgICAvLyAgIHNob3c6ICEhX3RoaXMuc2hvd0NvbmZpZy5mb3JtS2V5DQogICAgICAgICAgLy8gfSwNCiAgICAgICAgICB7DQogICAgICAgICAgICB4VHlwZTogJ3NlbGVjdCcsDQogICAgICAgICAgICBuYW1lOiAnZm9ybUtleScsDQogICAgICAgICAgICBsYWJlbDogJ+ihqOWNleagh+ivhmtleScsDQogICAgICAgICAgICBjbGVhcmFibGU6IHRydWUsDQogICAgICAgICAgICBkaWM6IHsgZGF0YTogX3RoaXMuZm9ybUxpc3QsIGxhYmVsOiAnZm9ybU5hbWUnLCB2YWx1ZTogJ2Zvcm1JZCcgfSwNCiAgICAgICAgICAgIHNob3c6ICEhX3RoaXMuc2hvd0NvbmZpZy5mb3JtS2V5DQogICAgICAgICAgfSwNCiAgICAgICAgICB7DQogICAgICAgICAgICB4VHlwZTogJ2lucHV0JywNCiAgICAgICAgICAgIG5hbWU6ICdza2lwRXhwcmVzc2lvbicsDQogICAgICAgICAgICBsYWJlbDogJ+i3s+i/h+ihqOi+vuW8jycsDQogICAgICAgICAgICBzaG93OiAhIV90aGlzLnNob3dDb25maWcuc2tpcEV4cHJlc3Npb24NCiAgICAgICAgICB9LA0KICAgICAgICAgIHsNCiAgICAgICAgICAgIHhUeXBlOiAnc3dpdGNoJywNCiAgICAgICAgICAgIG5hbWU6ICdpc0ZvckNvbXBlbnNhdGlvbicsDQogICAgICAgICAgICBsYWJlbDogJ+aYr+WQpuS4uuihpeWBvycsDQogICAgICAgICAgICBhY3RpdmVUZXh0OiAn5pivJywNCiAgICAgICAgICAgIGluYWN0aXZlVGV4dDogJ+WQpicsDQogICAgICAgICAgICBzaG93OiAhIV90aGlzLnNob3dDb25maWcuaXNGb3JDb21wZW5zYXRpb24NCiAgICAgICAgICB9LA0KICAgICAgICAgIHsNCiAgICAgICAgICAgIHhUeXBlOiAnc3dpdGNoJywNCiAgICAgICAgICAgIG5hbWU6ICd0cmlnZ2VyYWJsZScsDQogICAgICAgICAgICBsYWJlbDogJ+acjeWKoeS7u+WKoeWPr+inpuWPkScsDQogICAgICAgICAgICBhY3RpdmVUZXh0OiAn5pivJywNCiAgICAgICAgICAgIGluYWN0aXZlVGV4dDogJ+WQpicsDQogICAgICAgICAgICBzaG93OiAhIV90aGlzLnNob3dDb25maWcudHJpZ2dlcmFibGUNCiAgICAgICAgICB9LA0KICAgICAgICAgIHsNCiAgICAgICAgICAgIHhUeXBlOiAnc3dpdGNoJywNCiAgICAgICAgICAgIG5hbWU6ICdhdXRvU3RvcmVWYXJpYWJsZXMnLA0KICAgICAgICAgICAgbGFiZWw6ICfoh6rliqjlrZjlgqjlj5jph48nLA0KICAgICAgICAgICAgYWN0aXZlVGV4dDogJ+aYrycsDQogICAgICAgICAgICBpbmFjdGl2ZVRleHQ6ICflkKYnLA0KICAgICAgICAgICAgc2hvdzogISFfdGhpcy5zaG93Q29uZmlnLmF1dG9TdG9yZVZhcmlhYmxlcw0KICAgICAgICAgIH0sDQogICAgICAgICAgew0KICAgICAgICAgICAgeFR5cGU6ICdpbnB1dCcsDQogICAgICAgICAgICBuYW1lOiAncnVsZVZhcmlhYmxlc0lucHV0JywNCiAgICAgICAgICAgIGxhYmVsOiAn6L6T5YWl5Y+Y6YePJywNCiAgICAgICAgICAgIHNob3c6ICEhX3RoaXMuc2hvd0NvbmZpZy5ydWxlVmFyaWFibGVzSW5wdXQNCiAgICAgICAgICB9LA0KICAgICAgICAgIHsNCiAgICAgICAgICAgIHhUeXBlOiAnaW5wdXQnLA0KICAgICAgICAgICAgbmFtZTogJ3J1bGVzJywNCiAgICAgICAgICAgIGxhYmVsOiAn6KeE5YiZJywNCiAgICAgICAgICAgIHNob3c6ICEhX3RoaXMuc2hvd0NvbmZpZy5ydWxlcw0KICAgICAgICAgIH0sDQogICAgICAgICAgew0KICAgICAgICAgICAgeFR5cGU6ICdpbnB1dCcsDQogICAgICAgICAgICBuYW1lOiAncmVzdWx0VmFyaWFibGUnLA0KICAgICAgICAgICAgbGFiZWw6ICfnu5Pmnpzlj5jph48nLA0KICAgICAgICAgICAgc2hvdzogISFfdGhpcy5zaG93Q29uZmlnLnJlc3VsdFZhcmlhYmxlDQogICAgICAgICAgfSwNCiAgICAgICAgICB7DQogICAgICAgICAgICB4VHlwZTogJ3N3aXRjaCcsDQogICAgICAgICAgICBuYW1lOiAnZXhjbHVkZScsDQogICAgICAgICAgICBsYWJlbDogJ+aOkumZpCcsDQogICAgICAgICAgICBhY3RpdmVUZXh0OiAn5pivJywNCiAgICAgICAgICAgIGluYWN0aXZlVGV4dDogJ+WQpicsDQogICAgICAgICAgICBzaG93OiAhIV90aGlzLnNob3dDb25maWcuZXhjbHVkZQ0KICAgICAgICAgIH0sDQogICAgICAgICAgew0KICAgICAgICAgICAgeFR5cGU6ICdpbnB1dCcsDQogICAgICAgICAgICBuYW1lOiAnY2xhc3MnLA0KICAgICAgICAgICAgbGFiZWw6ICfnsbsnLA0KICAgICAgICAgICAgc2hvdzogISFfdGhpcy5zaG93Q29uZmlnLmNsYXNzDQogICAgICAgICAgfSwNCiAgICAgICAgICB7DQogICAgICAgICAgICB4VHlwZTogJ2RhdGVQaWNrZXInLA0KICAgICAgICAgICAgdHlwZTogJ2RhdGV0aW1lJywNCiAgICAgICAgICAgIHZhbHVlRm9ybWF0OiAneXl5eS1NTS1kZFRISDptbTpzcycsDQogICAgICAgICAgICBuYW1lOiAnZHVlRGF0ZScsDQogICAgICAgICAgICBsYWJlbDogJ+WIsOacn+aXtumXtCcsDQogICAgICAgICAgICBzaG93OiAhIV90aGlzLnNob3dDb25maWcuZHVlRGF0ZQ0KICAgICAgICAgIH0NCiAgICAgICAgXQ0KICAgICAgfQ0KICAgIH0NCiAgfSwNCiAgd2F0Y2g6IHsNCiAgICAnZm9ybURhdGEudXNlclR5cGUnOiBmdW5jdGlvbih2YWwsIG9sZFZhbCkgew0KICAgICAgaWYgKFN0clV0aWwuaXNOb3RCbGFuayhvbGRWYWwpKSB7DQogICAgICAgICAgZGVsZXRlIHRoaXMuZWxlbWVudC5idXNpbmVzc09iamVjdC4kYXR0cnNbYGZsb3dhYmxlOiR7b2xkVmFsfWBdDQogICAgICAgICAgZGVsZXRlIHRoaXMuZm9ybURhdGFbb2xkVmFsXQ0KICAgICAgICAgIC8vIOa4hemZpOW3sumAieS6uuWRmOaVsOaNrg0KICAgICAgICAgIHRoaXMuY2hlY2tWYWx1ZXMgPSAnJzsNCiAgICAgICAgICB0aGlzLnNlbGVjdFZhbHVlcyA9IG51bGw7DQogICAgICAgICAgLy8g5Yig6ZmkeG1s5Lit5bey6YCJ5oup5pWw5o2u57G75Z6L6IqC54K5DQogICAgICAgICAgZGVsZXRlIHRoaXMuZWxlbWVudC5idXNpbmVzc09iamVjdC4kYXR0cnNbYGZsb3dhYmxlOmRhdGFUeXBlYF0NCiAgICAgIH0NCiAgICAgIC8vIOWGmeWFpXVzZXJUeXBl6IqC54K55L+h5oGv5YiweG1sDQogICAgICB0aGlzLnVwZGF0ZVByb3BlcnRpZXMoeydmbG93YWJsZTp1c2VyVHlwZSc6IHZhbH0pDQogICAgfSwNCiAgICAnZm9ybURhdGEuYXN5bmMnOiBmdW5jdGlvbih2YWwpIHsNCiAgICAgIGlmIChTdHJVdGlsLmlzTm90QmxhbmsodmFsKSkgew0KICAgICAgICB0aGlzLnVwZGF0ZVByb3BlcnRpZXMoeydmbG93YWJsZTphc3luYyc6IHZhbH0pDQogICAgICB9DQogICAgfSwNCiAgICAnZm9ybURhdGEuZHVlRGF0ZSc6IGZ1bmN0aW9uKHZhbCkgew0KICAgICAgaWYgKFN0clV0aWwuaXNOb3RCbGFuayh2YWwpKSB7DQogICAgICAgIHRoaXMudXBkYXRlUHJvcGVydGllcyh7J2Zsb3dhYmxlOmR1ZURhdGUnOiB2YWx9KQ0KICAgICAgfQ0KICAgIH0sDQogICAgJ2Zvcm1EYXRhLmZvcm1LZXknOiBmdW5jdGlvbih2YWwpIHsNCiAgICAgIGlmIChTdHJVdGlsLmlzTm90QmxhbmsodmFsKSkgew0KICAgICAgICB0aGlzLnVwZGF0ZVByb3BlcnRpZXMoeydmbG93YWJsZTpmb3JtS2V5JzogdmFsfSkNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIC8vIOWIoOmZpHhtbOS4reW3sumAieaLqeihqOWNleS/oeaBrw0KICAgICAgICBkZWxldGUgdGhpcy5lbGVtZW50LmJ1c2luZXNzT2JqZWN0W2Bmb3JtS2V5YF0NCiAgICAgIH0NCiAgICB9LA0KICAgICdmb3JtRGF0YS5wcmlvcml0eSc6IGZ1bmN0aW9uKHZhbCkgew0KICAgICAgaWYgKFN0clV0aWwuaXNOb3RCbGFuayh2YWwpKSB7DQogICAgICAgIHRoaXMudXBkYXRlUHJvcGVydGllcyh7J2Zsb3dhYmxlOnByaW9yaXR5JzogdmFsfSkNCiAgICAgIH0NCiAgICB9LA0KICAgICdmb3JtRGF0YS5za2lwRXhwcmVzc2lvbic6IGZ1bmN0aW9uKHZhbCkgew0KICAgICAgaWYgKFN0clV0aWwuaXNOb3RCbGFuayh2YWwpKSB7DQogICAgICAgIHRoaXMudXBkYXRlUHJvcGVydGllcyh7J2Zsb3dhYmxlOnNraXBFeHByZXNzaW9uJzogdmFsfSkNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIGRlbGV0ZSB0aGlzLmVsZW1lbnQuYnVzaW5lc3NPYmplY3QuJGF0dHJzW2BmbG93YWJsZTpza2lwRXhwcmVzc2lvbmBdDQogICAgICB9DQogICAgfSwNCiAgICAnZm9ybURhdGEuaXNGb3JDb21wZW5zYXRpb24nOiBmdW5jdGlvbih2YWwpIHsNCiAgICAgIGlmIChTdHJVdGlsLmlzTm90QmxhbmsodmFsKSkgew0KICAgICAgICB0aGlzLnVwZGF0ZVByb3BlcnRpZXMoeydpc0ZvckNvbXBlbnNhdGlvbic6IHZhbH0pDQogICAgICB9DQogICAgfSwNCiAgICAnZm9ybURhdGEudHJpZ2dlcmFibGUnOiBmdW5jdGlvbih2YWwpIHsNCiAgICAgIGlmIChTdHJVdGlsLmlzTm90QmxhbmsodmFsKSkgew0KICAgICAgICB0aGlzLnVwZGF0ZVByb3BlcnRpZXMoeydmbG93YWJsZTp0cmlnZ2VyYWJsZSc6IHZhbH0pDQogICAgICB9DQogICAgfSwNCiAgICAnZm9ybURhdGEuY2xhc3MnOiBmdW5jdGlvbih2YWwpIHsNCiAgICAgIGlmIChTdHJVdGlsLmlzTm90QmxhbmsodmFsKSkgew0KICAgICAgICB0aGlzLnVwZGF0ZVByb3BlcnRpZXMoeydmbG93YWJsZTpjbGFzcyc6IHZhbH0pDQogICAgICB9DQogICAgfSwNCiAgICAnZm9ybURhdGEuYXV0b1N0b3JlVmFyaWFibGVzJzogZnVuY3Rpb24odmFsKSB7DQogICAgICBpZiAoU3RyVXRpbC5pc05vdEJsYW5rKHZhbCkpIHsNCiAgICAgICAgdGhpcy51cGRhdGVQcm9wZXJ0aWVzKHsnZmxvd2FibGU6YXV0b1N0b3JlVmFyaWFibGVzJzogdmFsfSkNCiAgICAgIH0NCiAgICB9LA0KICAgICdmb3JtRGF0YS5leGNsdWRlJzogZnVuY3Rpb24odmFsKSB7DQogICAgICBpZiAoU3RyVXRpbC5pc05vdEJsYW5rKHZhbCkpIHsNCiAgICAgICAgdGhpcy51cGRhdGVQcm9wZXJ0aWVzKHsnZmxvd2FibGU6ZXhjbHVkZSc6IHZhbH0pDQogICAgICB9DQogICAgfSwNCiAgICAnZm9ybURhdGEucnVsZVZhcmlhYmxlc0lucHV0JzogZnVuY3Rpb24odmFsKSB7DQogICAgICBpZiAoU3RyVXRpbC5pc05vdEJsYW5rKHZhbCkpIHsNCiAgICAgICAgdGhpcy51cGRhdGVQcm9wZXJ0aWVzKHsnZmxvd2FibGU6cnVsZVZhcmlhYmxlc0lucHV0JzogdmFsfSkNCiAgICAgIH0NCiAgICB9LA0KICAgICdmb3JtRGF0YS5ydWxlcyc6IGZ1bmN0aW9uKHZhbCkgew0KICAgICAgaWYgKFN0clV0aWwuaXNOb3RCbGFuayh2YWwpKSB7DQogICAgICAgIHRoaXMudXBkYXRlUHJvcGVydGllcyh7J2Zsb3dhYmxlOnJ1bGVzJzogdmFsfSkNCiAgICAgIH0NCiAgICB9LA0KICAgICdmb3JtRGF0YS5yZXN1bHRWYXJpYWJsZSc6IGZ1bmN0aW9uKHZhbCkgew0KICAgICAgaWYgKFN0clV0aWwuaXNOb3RCbGFuayh2YWwpKSB7DQogICAgICAgIHRoaXMudXBkYXRlUHJvcGVydGllcyh7J2Zsb3dhYmxlOnJlc3VsdFZhcmlhYmxlJzogdmFsfSkNCiAgICAgIH0NCiAgICB9DQogIH0sDQogIGNyZWF0ZWQoKSB7DQogICAgbGV0IGNhY2hlID0gY29tbW9uUGFyc2UodGhpcy5lbGVtZW50KQ0KICAgIGNhY2hlID0gdXNlclRhc2tQYXJzZShjYWNoZSkNCiAgICB0aGlzLmZvcm1EYXRhID0gY2FjaGUNCiAgICB0aGlzLmNvbXB1dGVkRXhlY3V0aW9uTGlzdGVuZXJMZW5ndGgoKQ0KICAgIHRoaXMuY29tcHV0ZWRUYXNrTGlzdGVuZXJMZW5ndGgoKQ0KICAgIHRoaXMuY29tcHV0ZWRIYXNNdWx0aUluc3RhbmNlKCkNCiAgICAvLyDkurrlkZjkv6Hmga/lm57mmL4NCiAgICB0aGlzLmNoZWNrVmFsdWVzRWNobygpOw0KICAgIC8vIOWKoOi9veihqOWNleWIl+ihqA0KICAgIHRoaXMuZ2V0TGlzdEZvcm0oKTsNCiAgfSwNCiAgbWV0aG9kczogew0KICAgIGNvbXB1dGVkRXhlY3V0aW9uTGlzdGVuZXJMZW5ndGgoKSB7DQogICAgICB0aGlzLmV4ZWN1dGlvbkxpc3RlbmVyTGVuZ3RoID0gdGhpcy5lbGVtZW50LmJ1c2luZXNzT2JqZWN0LmV4dGVuc2lvbkVsZW1lbnRzPy52YWx1ZXMNCiAgICAgICAgPy5maWx0ZXIoaXRlbSA9PiBpdGVtLiR0eXBlID09PSAnZmxvd2FibGU6RXhlY3V0aW9uTGlzdGVuZXInKS5sZW5ndGggPz8gMA0KICAgIH0sDQogICAgY29tcHV0ZWRUYXNrTGlzdGVuZXJMZW5ndGgoKSB7DQogICAgICB0aGlzLnRhc2tMaXN0ZW5lckxlbmd0aCA9IHRoaXMuZWxlbWVudC5idXNpbmVzc09iamVjdC5leHRlbnNpb25FbGVtZW50cz8udmFsdWVzDQogICAgICAgID8uZmlsdGVyKGl0ZW0gPT4gaXRlbS4kdHlwZSA9PT0gJ2Zsb3dhYmxlOlRhc2tMaXN0ZW5lcicpLmxlbmd0aCA/PyAwDQogICAgfSwNCiAgICBjb21wdXRlZEhhc011bHRpSW5zdGFuY2UoKSB7DQogICAgICBpZiAodGhpcy5lbGVtZW50LmJ1c2luZXNzT2JqZWN0Lmxvb3BDaGFyYWN0ZXJpc3RpY3MpIHsNCiAgICAgICAgdGhpcy5oYXNNdWx0aUluc3RhbmNlID0gdHJ1ZQ0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgdGhpcy5oYXNNdWx0aUluc3RhbmNlID0gZmFsc2UNCiAgICAgIH0NCiAgICB9LA0KICAgIC8vIOiOt+WPluihqOWNleS/oeaBrw0KICAgIGdldExpc3RGb3JtKCl7DQogICAgICBsaXN0QWxsRm9ybSgpLnRoZW4ocmVzID0+ew0KICAgICAgICByZXMuZGF0YS5mb3JFYWNoKGl0ZW0gPT57DQogICAgICAgICAgaXRlbS5mb3JtSWQgPSBpdGVtLmZvcm1JZC50b1N0cmluZygpOw0KICAgICAgICB9KQ0KICAgICAgICB0aGlzLmZvcm1MaXN0ID0gcmVzLmRhdGE7DQogICAgICB9KQ0KICAgIH0sDQogICAgLy8g6K6+6K6h5Zmo5Y+z5L6n6KGo5Y2V5pWw5o2u5Zue5pi+DQogICAgY2hlY2tWYWx1ZXNFY2hvKCl7DQogICAgICBjb25zdCB0aGF0ID0gdGhpczsNCiAgICAgIGNvbnN0IGF0dHJzID0gdGhhdC5lbGVtZW50LmJ1c2luZXNzT2JqZWN0LiRhdHRyczsNCiAgICAgIGNvbnN0IGJ1c2luZXNzT2JqZWN0ID0gdGhhdC5lbGVtZW50LmJ1c2luZXNzT2JqZWN0Ow0KICAgICAgY29uc29sZS5sb2codGhhdC5lbGVtZW50LmJ1c2luZXNzT2JqZWN0LCJ0aGlzLmVsZW1lbnQuYnVzaW5lc3NPYmplY3QiKQ0KICAgICAgLy8g5oyH5a6a55So5oi3DQogICAgICBpZiAoYXR0cnMuaGFzT3duUHJvcGVydHkoImZsb3dhYmxlOmFzc2lnbmVlIikpIHsNCiAgICAgICAgY29uc3QgdmFsID0gYXR0cnNbImZsb3dhYmxlOmFzc2lnbmVlIl07DQogICAgICAgIC8vIOafpeaJvuaYr+WQpuWKqOaAgeaMh+WumuS6uuWRmCjpgInkuK3mtYHnqIvooajovr7lvI8pDQogICAgICAgIGlmIChhdHRyc1siZmxvd2FibGU6ZGF0YVR5cGUiXSA9PT0gImR5bmFtaWMiKSB7DQogICAgICAgICAgdGhpcy5jaGVja1ZhbHVlcyA9IHRoYXQuZXhwTGlzdC5maW5kKGl0ZW0gPT4gaXRlbS5leHByZXNzaW9uID09IHZhbCkubmFtZTsNCiAgICAgICAgICB0aGlzLnNlbGVjdFZhbHVlcyA9IHRoYXQuZXhwTGlzdC5maW5kKGl0ZW0gPT4gaXRlbS5leHByZXNzaW9uID09IHZhbCkuaWQ7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgdGhpcy5jaGVja1ZhbHVlcyA9IHRoYXQudXNlckxpc3QuZmluZChpdGVtID0+IGl0ZW0udXNlcklkID09IHZhbCkubmlja05hbWU7DQogICAgICAgICAgdGhpcy5zZWxlY3RWYWx1ZXMgPSB0aGF0LnVzZXJMaXN0LmZpbmQoaXRlbSA9PiBpdGVtLnVzZXJJZCA9PSB2YWwpLnVzZXJJZDsNCiAgICAgICAgfQ0KICAgICAgICAvLyDlgJnpgInnlKjmiLcNCiAgICAgIH0gZWxzZSBpZiAoYXR0cnMuaGFzT3duUHJvcGVydHkoImZsb3dhYmxlOmNhbmRpZGF0ZVVzZXJzIikpIHsNCiAgICAgICAgY29uc3QgdmFsID0gYXR0cnNbImZsb3dhYmxlOmNhbmRpZGF0ZVVzZXJzIl07DQogICAgICAgIGlmIChhdHRyc1siZmxvd2FibGU6ZGF0YVR5cGUiXSA9PT0gImR5bmFtaWMiKSB7DQogICAgICAgICAgdGhpcy5jaGVja1ZhbHVlcyA9IHRoYXQuZXhwTGlzdC5maW5kKGl0ZW0gPT4gaXRlbS5leHByZXNzaW9uID09IHZhbCkubmFtZTsNCiAgICAgICAgICB0aGlzLnNlbGVjdFZhbHVlcyA9IHRoYXQuZXhwTGlzdC5maW5kKGl0ZW0gPT4gaXRlbS5leHByZXNzaW9uID09IHZhbCkuaWQ7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgY29uc3QgbmV3QXJyID0gdGhhdC51c2VyTGlzdC5maWx0ZXIoaSA9PiB2YWwuc3BsaXQoJywnKS5pbmNsdWRlcyhpLnVzZXJJZCkpDQogICAgICAgICAgdGhpcy5jaGVja1ZhbHVlcyA9ICBuZXdBcnIubWFwKGl0ZW0gPT4gaXRlbS5uaWNrTmFtZSkuam9pbignLCcpOw0KICAgICAgICAgIHRoaXMuc2VsZWN0VmFsdWVzID0gbmV3QXJyLm1hcChpdGVtID0+IGl0ZW0udXNlcklkKS5qb2luKCcsJyk7DQogICAgICAgIH0NCiAgICAgIH0gZWxzZSBpZiAoYnVzaW5lc3NPYmplY3QuaGFzT3duUHJvcGVydHkoImNhbmRpZGF0ZUdyb3VwcyIpIHx8IGF0dHJzLmhhc093blByb3BlcnR5KCJmbG93YWJsZTpjYW5kaWRhdGVHcm91cHMiKSApIHsNCiAgICAgICAgLy8g5YCZ6YCJ6KeS6Imy5L+h5oGvDQogICAgICAgIGNvbnN0IHZhbCA9IGJ1c2luZXNzT2JqZWN0WyJjYW5kaWRhdGVHcm91cHMiXSB8fCBhdHRyc1siZmxvd2FibGU6Y2FuZGlkYXRlR3JvdXBzIl07DQogICAgICAgIGlmIChhdHRyc1siZmxvd2FibGU6ZGF0YVR5cGUiXSA9PT0gImR5bmFtaWMiKSB7DQogICAgICAgICAgdGhpcy5jaGVja1ZhbHVlcyA9IHRoYXQuZXhwTGlzdC5maW5kKGl0ZW0gPT4gaXRlbS5leHByZXNzaW9uID09IHZhbCkubmFtZTsNCiAgICAgICAgICB0aGlzLnNlbGVjdFZhbHVlcyA9IHRoYXQuZXhwTGlzdC5maW5kKGl0ZW0gPT4gaXRlbS5leHByZXNzaW9uID09IHZhbCkuaWQ7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgY29uc3QgbmV3QXJyID0gdGhhdC5ncm91cExpc3QuZmlsdGVyKGkgPT4gdmFsLnNwbGl0KCcsJykuaW5jbHVkZXMoaS5yb2xlSWQpKQ0KICAgICAgICAgIHRoaXMuY2hlY2tWYWx1ZXMgPSAgbmV3QXJyLm1hcChpdGVtID0+IGl0ZW0ucm9sZU5hbWUpLmpvaW4oJywnKTsNCiAgICAgICAgICB0aGlzLnNlbGVjdFZhbHVlcyA9IG5ld0Fyci5tYXAoaXRlbSA9PiBpdGVtLnJvbGVJZCkuam9pbignLCcpOw0KICAgICAgICB9DQogICAgICB9DQogICAgfSwNCiAgICBmaW5pc2hFeGVjdXRpb25MaXN0ZW5lcigpIHsNCiAgICAgIGlmICh0aGlzLmRpYWxvZ05hbWUgPT09ICdleGVjdXRpb25MaXN0ZW5lckRpYWxvZycpIHsNCiAgICAgICAgdGhpcy5jb21wdXRlZEV4ZWN1dGlvbkxpc3RlbmVyTGVuZ3RoKCkNCiAgICAgIH0NCiAgICAgIHRoaXMuZGlhbG9nTmFtZSA9ICcnDQogICAgfSwNCiAgICBmaW5pc2hUYXNrTGlzdGVuZXIoKSB7DQogICAgICBpZiAodGhpcy5kaWFsb2dOYW1lID09PSAndGFza0xpc3RlbmVyRGlhbG9nJykgew0KICAgICAgICB0aGlzLmNvbXB1dGVkVGFza0xpc3RlbmVyTGVuZ3RoKCkNCiAgICAgIH0NCiAgICAgIHRoaXMuZGlhbG9nTmFtZSA9ICcnDQogICAgfSwNCiAgICBmaW5pc2hNdWx0aUluc3RhbmNlKCkgew0KICAgICAgaWYgKHRoaXMuZGlhbG9nTmFtZSA9PT0gJ211bHRpSW5zdGFuY2VEaWFsb2cnKSB7DQogICAgICAgIHRoaXMuY29tcHV0ZWRIYXNNdWx0aUluc3RhbmNlKCkNCiAgICAgIH0NCiAgICAgIHRoaXMuZGlhbG9nTmFtZSA9ICcnDQogICAgfSwNCiAgICAvKuWNlemAieS6uuWRmCovDQogICAgc2luZ2xlVXNlckNoZWNrKCl7DQogICAgICB0aGlzLnVzZXJWaXNpYmxlID0gdHJ1ZTsNCiAgICAgIHRoaXMuY2hlY2tUeXBlID0gInNpbmdsZSI7DQogICAgfSwNCiAgICAvKuWkmumAieS6uuWRmCovDQogICAgbXVsdGlwbGVVc2VyQ2hlY2soKXsNCiAgICAgIHRoaXMudXNlclZpc2libGUgPSB0cnVlOw0KICAgICAgdGhpcy5jaGVja1R5cGUgPSAibXVsdGlwbGUiOw0KICAgIH0sDQogICAgLyrljZXpgInop5LoibIqLw0KICAgIHNpbmdsZVJvbGVDaGVjaygpew0KICAgICAgdGhpcy5yb2xlVmlzaWJsZSA9IHRydWU7DQogICAgICB0aGlzLmNoZWNrVHlwZSA9ICJzaW5nbGUiOw0KICAgIH0sDQogICAgLyrlpJrpgInop5LoibIqLw0KICAgIG11bHRpcGxlUm9sZUNoZWNrKCl7DQogICAgICB0aGlzLnJvbGVWaXNpYmxlID0gdHJ1ZTsNCiAgICAgIHRoaXMuY2hlY2tUeXBlID0gIm11bHRpcGxlIjsNCiAgICB9LA0KICAgIC8q5Y2V6YCJ6KGo6L6+5byPKi8NCiAgICBzaW5nbGVFeHBDaGVjayhleHBUeXBlKXsNCiAgICAgIHRoaXMuZXhwVmlzaWJsZSA9IHRydWU7DQogICAgICB0aGlzLmV4cFR5cGUgPSBleHBUeXBlOw0KICAgIH0sDQogICAgLy8g6YCJ5Lit6KGo6L6+5byPDQogICAgaGFuZGxlU2luZ2xlRXhwU2VsZWN0KHNlbGVjdGlvbikgew0KICAgICAgdGhpcy5kZWxldGVGbG93QXR0YXIoKTsNCiAgICAgIHRoaXMudXBkYXRlUHJvcGVydGllcyh7J2Zsb3dhYmxlOmRhdGFUeXBlJzogJ2R5bmFtaWMnfSkNCiAgICAgIGlmICgiYXNzaWduZWUiID09PSB0aGlzLmV4cFR5cGUpIHsNCiAgICAgICAgdGhpcy51cGRhdGVQcm9wZXJ0aWVzKHsnZmxvd2FibGU6YXNzaWduZWUnOiBzZWxlY3Rpb24uZXhwcmVzc2lvbn0pOw0KICAgICAgfSBlbHNlIGlmICgiY2FuZGlkYXRlVXNlcnMiID09PSB0aGlzLmV4cFR5cGUpIHsNCiAgICAgICAgdGhpcy51cGRhdGVQcm9wZXJ0aWVzKHsnZmxvd2FibGU6Y2FuZGlkYXRlVXNlcnMnOiBzZWxlY3Rpb24uZXhwcmVzc2lvbn0pOw0KICAgICAgfSBlbHNlIGlmICgiY2FuZGlkYXRlR3JvdXBzIiA9PT0gdGhpcy5leHBUeXBlKSB7DQogICAgICAgIHRoaXMudXBkYXRlUHJvcGVydGllcyh7J2Zsb3dhYmxlOmNhbmRpZGF0ZUdyb3Vwcyc6IHNlbGVjdGlvbi5leHByZXNzaW9ufSk7DQogICAgICB9DQogICAgICB0aGlzLmNoZWNrVmFsdWVzID0gc2VsZWN0aW9uLm5hbWU7DQogICAgICB0aGlzLmV4cFR5cGUgPSBudWxsOw0KICAgIH0sDQogICAgLy8g55So5oi36YCJ5Lit5pWw5o2uDQogICAgaGFuZGxlVXNlclNlbGVjdChzZWxlY3Rpb24pIHsNCiAgICAgIGNvbnN0IHRoYXQgPSB0aGlzOw0KICAgICAgaWYgKHNlbGVjdGlvbikgew0KICAgICAgICB0aGF0LmRlbGV0ZUZsb3dBdHRhcigpOw0KICAgICAgICB0aGF0LnVwZGF0ZVByb3BlcnRpZXMoeydmbG93YWJsZTpkYXRhVHlwZSc6ICdmaXhlZCd9KQ0KICAgICAgICBpZiAoc2VsZWN0aW9uIGluc3RhbmNlb2YgQXJyYXkpIHsNCiAgICAgICAgICBjb25zdCB1c2VySWRzID0gc2VsZWN0aW9uLm1hcChpdGVtID0+IGl0ZW0udXNlcklkKTsNCiAgICAgICAgICBjb25zdCBuaWNrTmFtZSA9IHNlbGVjdGlvbi5tYXAoaXRlbSA9PiBpdGVtLm5pY2tOYW1lKTsNCiAgICAgICAgICB0aGF0LnVwZGF0ZVByb3BlcnRpZXMoeydmbG93YWJsZTpjYW5kaWRhdGVVc2Vycyc6IHVzZXJJZHMuam9pbignLCcpfSkNCiAgICAgICAgICB0aGF0LmNoZWNrVmFsdWVzID0gbmlja05hbWUuam9pbignLCcpOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIHRoYXQudXBkYXRlUHJvcGVydGllcyh7J2Zsb3dhYmxlOmFzc2lnbmVlJzogc2VsZWN0aW9uLnVzZXJJZH0pDQogICAgICAgICAgdGhhdC5jaGVja1ZhbHVlcyA9IHNlbGVjdGlvbi5uaWNrTmFtZTsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0sDQogICAgLy8g6KeS6Imy6YCJ5Lit5pWw5o2uDQogICAgaGFuZGxlUm9sZVNlbGVjdChzZWxlY3Rpb24sIG5hbWUpIHsNCiAgICAgIGNvbnN0IHRoYXQgPSB0aGlzOw0KICAgICAgaWYgKHNlbGVjdGlvbiAmJiBuYW1lKSB7DQogICAgICAgIHRoYXQuZGVsZXRlRmxvd0F0dGFyKCk7DQogICAgICAgIHRoYXQudXBkYXRlUHJvcGVydGllcyh7J2Zsb3dhYmxlOmRhdGFUeXBlJzogJ2ZpeGVkJ30pDQogICAgICAgIHRoYXQudXBkYXRlUHJvcGVydGllcyh7J2Zsb3dhYmxlOmNhbmRpZGF0ZUdyb3Vwcyc6IHNlbGVjdGlvbn0pOw0KICAgICAgICB0aGF0LmNoZWNrVmFsdWVzID0gbmFtZTsNCiAgICAgIH0NCiAgICB9LA0KICAgIC8q55So5oi36YCJ5Lit6LWL5YC8Ki8NCiAgICBjaGVja1VzZXJDb21wbGV0ZSgpew0KICAgICAgdGhpcy51c2VyVmlzaWJsZSA9IGZhbHNlOw0KICAgICAgdGhpcy5jaGVja1R5cGUgPSAiIjsNCiAgICB9LA0KICAgIC8q5YCZ6YCJ6KeS6Imy6YCJ5Lit6LWL5YC8Ki8NCiAgICBjaGVja1JvbGVDb21wbGV0ZSgpew0KICAgICAgdGhpcy5yb2xlVmlzaWJsZSA9IGZhbHNlOw0KICAgICAgdGhpcy5jaGVja1R5cGUgPSAiIjsNCiAgICAgIH0sDQogICAgLyrooajovr7lvI/pgInkuK3otYvlgLwqLw0KICAgIGNoZWNrRXhwQ29tcGxldGUoKXsNCiAgICAgIHRoaXMuZXhwVmlzaWJsZSA9IGZhbHNlOw0KICAgIH0sDQogICAgLy8g5Yig6Zmk6IqC54K5DQogICAgZGVsZXRlRmxvd0F0dGFyKCl7DQogICAgICBkZWxldGUgdGhpcy5lbGVtZW50LmJ1c2luZXNzT2JqZWN0LiRhdHRyc1tgZmxvd2FibGU6ZGF0YVR5cGVgXQ0KICAgICAgZGVsZXRlIHRoaXMuZWxlbWVudC5idXNpbmVzc09iamVjdC4kYXR0cnNbYGZsb3dhYmxlOmFzc2lnbmVlYF0NCiAgICAgIGRlbGV0ZSB0aGlzLmVsZW1lbnQuYnVzaW5lc3NPYmplY3QuJGF0dHJzW2BmbG93YWJsZTpjYW5kaWRhdGVVc2Vyc2BdDQogICAgICBkZWxldGUgdGhpcy5lbGVtZW50LmJ1c2luZXNzT2JqZWN0LiRhdHRyc1tgZmxvd2FibGU6Y2FuZGlkYXRlR3JvdXBzYF0NCiAgICB9DQogIH0NCn0NCg=="},{"version":3,"sources":["task.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"task.vue","sourceRoot":"src/components/Process/components/nodePanel","sourcesContent":["<template>\r\n  <div>\r\n    <x-form ref=\"xForm\" v-model=\"formData\" :config=\"formConfig\">\r\n      <template #executionListener>\r\n        <el-badge :value=\"executionListenerLength\">\r\n          <el-button size=\"small\" @click=\"dialogName = 'executionListenerDialog'\">编辑</el-button>\r\n        </el-badge>\r\n      </template>\r\n      <template #taskListener>\r\n        <el-badge :value=\"taskListenerLength\">\r\n          <el-button size=\"small\" @click=\"dialogName = 'taskListenerDialog'\">编辑</el-button>\r\n        </el-badge>\r\n      </template>\r\n      <template #multiInstance>\r\n        <el-badge :is-dot=\"hasMultiInstance\">\r\n          <el-button size=\"small\" @click=\"dialogName = 'multiInstanceDialog'\">编辑</el-button>\r\n        </el-badge>\r\n      </template>\r\n      <template #checkSingleUser>\r\n          <el-input placeholder=\"请选择人员\" class=\"input-with-select\" v-model=\"checkValues\">\r\n              <template slot=\"append\">\r\n                <!--指定用户-->\r\n                <el-button style=\"padding-left: 7px\" icon=\"el-icon-user\" @click=\"singleUserCheck\"/>\r\n                <el-divider direction=\"vertical\"></el-divider>\r\n                <!--选择表达式-->\r\n                <el-button style=\"padding-right: 7px\" icon=\"el-icon-postcard\" @click=\"singleExpCheck('assignee')\"/>\r\n              </template>\r\n          </el-input>\r\n      </template>\r\n      <template #checkMultipleUser>\r\n          <el-input placeholder=\"请选择候选用户\" class=\"input-with-select\" v-model=\"checkValues\">\r\n            <template slot=\"append\">\r\n              <!--候选用户-->\r\n              <el-button style=\"padding-left: 7px\" icon=\"el-icon-user\" @click=\"multipleUserCheck\"/>\r\n              <el-divider direction=\"vertical\"></el-divider>\r\n              <!--选择表达式-->\r\n              <el-button style=\"padding-right: 7px\" icon=\"el-icon-postcard\" @click=\"singleExpCheck('candidateUsers')\"/>\r\n            </template>\r\n          </el-input>\r\n      </template>\r\n      <template #checkRole>\r\n        <el-input placeholder=\"请选择候选角色\" class=\"input-with-select\" v-model=\"checkValues\">\r\n          <template slot=\"append\">\r\n          <!--候选角色-->\r\n            <el-button style=\"padding-left: 7px\" icon=\"el-icon-user\" @click=\"multipleRoleCheck\"/>\r\n            <el-divider direction=\"vertical\"></el-divider>\r\n              <!--选择表达式-->\r\n            <el-button style=\"padding-right: 7px\" icon=\"el-icon-postcard\" @click=\"singleExpCheck('candidateGroups')\"/>\r\n          </template>\r\n        </el-input>\r\n      </template>\r\n    </x-form>\r\n    <executionListenerDialog\r\n      v-if=\"dialogName === 'executionListenerDialog'\"\r\n      :element=\"element\"\r\n      :modeler=\"modeler\"\r\n      @close=\"finishExecutionListener\"\r\n    />\r\n    <taskListenerDialog\r\n      v-if=\"dialogName === 'taskListenerDialog'\"\r\n      :element=\"element\"\r\n      :modeler=\"modeler\"\r\n      @close=\"finishTaskListener\"\r\n    />\r\n    <multiInstanceDialog\r\n      v-if=\"dialogName === 'multiInstanceDialog'\"\r\n      :element=\"element\"\r\n      :modeler=\"modeler\"\r\n      @close=\"finishMultiInstance\"\r\n    />\r\n    <!--选择人员-->\r\n    <el-dialog\r\n      title=\"选择人员\"\r\n      :visible.sync=\"userVisible\"\r\n      width=\"60%\"\r\n      :close-on-press-escape=\"false\"\r\n      :show-close=\"false\"\r\n    >\r\n    <flow-user :checkType=\"checkType\" :selectValues=\"selectValues\" @handleUserSelect=\"handleUserSelect\"></flow-user>\r\n    <span slot=\"footer\" class=\"dialog-footer\">\r\n      <el-button @click=\"userVisible = false\">取 消</el-button>\r\n      <el-button type=\"primary\" @click=\"checkUserComplete\">确 定</el-button>\r\n    </span>\r\n    </el-dialog>\r\n    <!--选择表达式-->\r\n    <el-dialog\r\n      title=\"选择表达式\"\r\n      :visible.sync=\"expVisible\"\r\n      width=\"60%\"\r\n      :close-on-press-escape=\"false\"\r\n      :show-close=\"false\"\r\n    >\r\n      <flow-exp :selectValues=\"selectValues\" @handleSingleExpSelect=\"handleSingleExpSelect\"></flow-exp>\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n      <el-button @click=\"expVisible = false\">取 消</el-button>\r\n      <el-button type=\"primary\" @click=\"checkExpComplete\">确 定</el-button>\r\n    </span>\r\n    </el-dialog>\r\n    <!--选择角色-->\r\n    <el-dialog\r\n      title=\"选择候选角色\"\r\n      :visible.sync=\"roleVisible\"\r\n      width=\"60%\"\r\n      :close-on-press-escape=\"false\"\r\n      :show-close=\"false\"\r\n    >\r\n      <flow-role :checkType=\"checkType\" :selectValues=\"selectValues\" @handleRoleSelect=\"handleRoleSelect\"></flow-role>\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n      <el-button @click=\"roleVisible = false\">取 消</el-button>\r\n      <el-button type=\"primary\" @click=\"checkRoleComplete\">确 定</el-button>\r\n    </span>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport mixinPanel from '../../common/mixinPanel'\r\nimport executionListenerDialog from './property/executionListener'\r\nimport taskListenerDialog from './property/taskListener'\r\nimport multiInstanceDialog from './property/multiInstance'\r\nimport { commonParse, userTaskParse } from '../../common/parseElement'\r\nimport {StrUtil} from '@/utils/StrUtil'\r\nimport FlowUser from '@/components/flow/User'\r\nimport FlowRole from '@/components/flow/Role'\r\nimport FlowExp from '@/components/flow/Expression'\r\nimport { listAllForm } from '@/api/flowable/form'\r\n\r\nexport default {\r\n  components: {\r\n    executionListenerDialog,\r\n    taskListenerDialog,\r\n    multiInstanceDialog,\r\n    FlowUser,\r\n    FlowRole,\r\n    FlowExp,\r\n  },\r\n  mixins: [mixinPanel],\r\n  props: {\r\n    users: {\r\n      type: Array,\r\n      required: true\r\n    },\r\n    groups: {\r\n      type: Array,\r\n      required: true\r\n    },\r\n    exps: {\r\n      type: Array,\r\n      required: true\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      userTypeOption: [\r\n        { label: '指定人员', value: 'assignee' },\r\n        { label: '候选人员', value: 'candidateUsers' },\r\n        { label: '候选角色', value: 'candidateGroups' }\r\n      ],\r\n      dialogName: '',\r\n      executionListenerLength: 0,\r\n      taskListenerLength: 0,\r\n      hasMultiInstance: false,\r\n      userVisible: false,\r\n      roleVisible: false,\r\n      expVisible: false,\r\n      formData: {},\r\n      assignee: null,\r\n      candidateUsers: null,\r\n      candidateGroups: null,\r\n      // 选类型\r\n      checkType: 'single',\r\n      // 选中的值\r\n      checkValues: null,\r\n      // 数据回显\r\n      selectValues: null,\r\n      // 用户列表\r\n      userList: this.users,\r\n      // 角色列表\r\n      groupList: this.groups,\r\n      // 表达式列表\r\n      expList: this.exps,\r\n      // 表达式类型\r\n      expType: null,\r\n      // 表单列表\r\n      formList: [],\r\n    }\r\n  },\r\n  computed: {\r\n    formConfig() {\r\n      const _this = this\r\n      return {\r\n        inline: false,\r\n        item: [\r\n          {\r\n            xType: 'input',\r\n            name: 'id',\r\n            label: '节点 id',\r\n            rules: [{ required: true, message: 'Id 不能为空' }]\r\n          },\r\n          {\r\n            xType: 'input',\r\n            name: 'name',\r\n            label: '节点名称',\r\n            rules: [{ required: true, message: '节点名称不能为空' }]\r\n          },\r\n          {\r\n            xType: 'input',\r\n            name: 'documentation',\r\n            label: '节点描述'\r\n          },\r\n          {\r\n            xType: 'slot',\r\n            name: 'executionListener',\r\n            label: '执行监听器'\r\n          },\r\n          {\r\n            xType: 'slot',\r\n            name: 'taskListener',\r\n            label: '任务监听器',\r\n            show: !!_this.showConfig.taskListener\r\n          },\r\n          {\r\n            xType: 'select',\r\n            name: 'userType',\r\n            label: '用户类型',\r\n            // clearable: true,\r\n            dic: _this.userTypeOption,\r\n            // rules: [{ required: true, message: '用户类型不能为空' }],\r\n            show: !!_this.showConfig.userType\r\n          },\r\n          {\r\n            xType: 'slot',\r\n            name: 'checkSingleUser',\r\n            label: '指定人员',\r\n            // rules: [{ required: true, message: '指定人员不能为空' }],\r\n            show: !!_this.showConfig.assignee && _this.formData.userType === 'assignee'\r\n          },\r\n          {\r\n            xType: 'slot',\r\n            name: 'checkMultipleUser',\r\n            label: '候选人员',\r\n            // rules: [{ required: true, message: '候选人员不能为空' }],\r\n            show: !!_this.showConfig.candidateUsers && _this.formData.userType === 'candidateUsers'\r\n          },\r\n          {\r\n            xType: 'slot',\r\n            name: 'checkRole',\r\n            label: '候选角色',\r\n            // rules: [{ required: true, message: '候选角色不能为空' }],\r\n            show: !!_this.showConfig.candidateGroups && _this.formData.userType === 'candidateGroups'\r\n          },\r\n          {\r\n            xType: 'slot',\r\n            name: 'multiInstance',\r\n            label: '多实例'\r\n          },\r\n          {\r\n            xType: 'switch',\r\n            name: 'async',\r\n            label: '异步',\r\n            activeText: '是',\r\n            inactiveText: '否',\r\n            show: !!_this.showConfig.async\r\n          },\r\n          {\r\n            xType: 'input',\r\n            name: 'priority',\r\n            label: '优先级',\r\n            show: !!_this.showConfig.priority\r\n          },\r\n          // {\r\n          //   xType: 'input',\r\n          //   name: 'formKey',\r\n          //   label: '表单标识key',\r\n          //   show: !!_this.showConfig.formKey\r\n          // },\r\n          {\r\n            xType: 'select',\r\n            name: 'formKey',\r\n            label: '表单标识key',\r\n            clearable: true,\r\n            dic: { data: _this.formList, label: 'formName', value: 'formId' },\r\n            show: !!_this.showConfig.formKey\r\n          },\r\n          {\r\n            xType: 'input',\r\n            name: 'skipExpression',\r\n            label: '跳过表达式',\r\n            show: !!_this.showConfig.skipExpression\r\n          },\r\n          {\r\n            xType: 'switch',\r\n            name: 'isForCompensation',\r\n            label: '是否为补偿',\r\n            activeText: '是',\r\n            inactiveText: '否',\r\n            show: !!_this.showConfig.isForCompensation\r\n          },\r\n          {\r\n            xType: 'switch',\r\n            name: 'triggerable',\r\n            label: '服务任务可触发',\r\n            activeText: '是',\r\n            inactiveText: '否',\r\n            show: !!_this.showConfig.triggerable\r\n          },\r\n          {\r\n            xType: 'switch',\r\n            name: 'autoStoreVariables',\r\n            label: '自动存储变量',\r\n            activeText: '是',\r\n            inactiveText: '否',\r\n            show: !!_this.showConfig.autoStoreVariables\r\n          },\r\n          {\r\n            xType: 'input',\r\n            name: 'ruleVariablesInput',\r\n            label: '输入变量',\r\n            show: !!_this.showConfig.ruleVariablesInput\r\n          },\r\n          {\r\n            xType: 'input',\r\n            name: 'rules',\r\n            label: '规则',\r\n            show: !!_this.showConfig.rules\r\n          },\r\n          {\r\n            xType: 'input',\r\n            name: 'resultVariable',\r\n            label: '结果变量',\r\n            show: !!_this.showConfig.resultVariable\r\n          },\r\n          {\r\n            xType: 'switch',\r\n            name: 'exclude',\r\n            label: '排除',\r\n            activeText: '是',\r\n            inactiveText: '否',\r\n            show: !!_this.showConfig.exclude\r\n          },\r\n          {\r\n            xType: 'input',\r\n            name: 'class',\r\n            label: '类',\r\n            show: !!_this.showConfig.class\r\n          },\r\n          {\r\n            xType: 'datePicker',\r\n            type: 'datetime',\r\n            valueFormat: 'yyyy-MM-ddTHH:mm:ss',\r\n            name: 'dueDate',\r\n            label: '到期时间',\r\n            show: !!_this.showConfig.dueDate\r\n          }\r\n        ]\r\n      }\r\n    }\r\n  },\r\n  watch: {\r\n    'formData.userType': function(val, oldVal) {\r\n      if (StrUtil.isNotBlank(oldVal)) {\r\n          delete this.element.businessObject.$attrs[`flowable:${oldVal}`]\r\n          delete this.formData[oldVal]\r\n          // 清除已选人员数据\r\n          this.checkValues = '';\r\n          this.selectValues = null;\r\n          // 删除xml中已选择数据类型节点\r\n          delete this.element.businessObject.$attrs[`flowable:dataType`]\r\n      }\r\n      // 写入userType节点信息到xml\r\n      this.updateProperties({'flowable:userType': val})\r\n    },\r\n    'formData.async': function(val) {\r\n      if (StrUtil.isNotBlank(val)) {\r\n        this.updateProperties({'flowable:async': val})\r\n      }\r\n    },\r\n    'formData.dueDate': function(val) {\r\n      if (StrUtil.isNotBlank(val)) {\r\n        this.updateProperties({'flowable:dueDate': val})\r\n      }\r\n    },\r\n    'formData.formKey': function(val) {\r\n      if (StrUtil.isNotBlank(val)) {\r\n        this.updateProperties({'flowable:formKey': val})\r\n      } else {\r\n        // 删除xml中已选择表单信息\r\n        delete this.element.businessObject[`formKey`]\r\n      }\r\n    },\r\n    'formData.priority': function(val) {\r\n      if (StrUtil.isNotBlank(val)) {\r\n        this.updateProperties({'flowable:priority': val})\r\n      }\r\n    },\r\n    'formData.skipExpression': function(val) {\r\n      if (StrUtil.isNotBlank(val)) {\r\n        this.updateProperties({'flowable:skipExpression': val})\r\n      } else {\r\n        delete this.element.businessObject.$attrs[`flowable:skipExpression`]\r\n      }\r\n    },\r\n    'formData.isForCompensation': function(val) {\r\n      if (StrUtil.isNotBlank(val)) {\r\n        this.updateProperties({'isForCompensation': val})\r\n      }\r\n    },\r\n    'formData.triggerable': function(val) {\r\n      if (StrUtil.isNotBlank(val)) {\r\n        this.updateProperties({'flowable:triggerable': val})\r\n      }\r\n    },\r\n    'formData.class': function(val) {\r\n      if (StrUtil.isNotBlank(val)) {\r\n        this.updateProperties({'flowable:class': val})\r\n      }\r\n    },\r\n    'formData.autoStoreVariables': function(val) {\r\n      if (StrUtil.isNotBlank(val)) {\r\n        this.updateProperties({'flowable:autoStoreVariables': val})\r\n      }\r\n    },\r\n    'formData.exclude': function(val) {\r\n      if (StrUtil.isNotBlank(val)) {\r\n        this.updateProperties({'flowable:exclude': val})\r\n      }\r\n    },\r\n    'formData.ruleVariablesInput': function(val) {\r\n      if (StrUtil.isNotBlank(val)) {\r\n        this.updateProperties({'flowable:ruleVariablesInput': val})\r\n      }\r\n    },\r\n    'formData.rules': function(val) {\r\n      if (StrUtil.isNotBlank(val)) {\r\n        this.updateProperties({'flowable:rules': val})\r\n      }\r\n    },\r\n    'formData.resultVariable': function(val) {\r\n      if (StrUtil.isNotBlank(val)) {\r\n        this.updateProperties({'flowable:resultVariable': val})\r\n      }\r\n    }\r\n  },\r\n  created() {\r\n    let cache = commonParse(this.element)\r\n    cache = userTaskParse(cache)\r\n    this.formData = cache\r\n    this.computedExecutionListenerLength()\r\n    this.computedTaskListenerLength()\r\n    this.computedHasMultiInstance()\r\n    // 人员信息回显\r\n    this.checkValuesEcho();\r\n    // 加载表单列表\r\n    this.getListForm();\r\n  },\r\n  methods: {\r\n    computedExecutionListenerLength() {\r\n      this.executionListenerLength = this.element.businessObject.extensionElements?.values\r\n        ?.filter(item => item.$type === 'flowable:ExecutionListener').length ?? 0\r\n    },\r\n    computedTaskListenerLength() {\r\n      this.taskListenerLength = this.element.businessObject.extensionElements?.values\r\n        ?.filter(item => item.$type === 'flowable:TaskListener').length ?? 0\r\n    },\r\n    computedHasMultiInstance() {\r\n      if (this.element.businessObject.loopCharacteristics) {\r\n        this.hasMultiInstance = true\r\n      } else {\r\n        this.hasMultiInstance = false\r\n      }\r\n    },\r\n    // 获取表单信息\r\n    getListForm(){\r\n      listAllForm().then(res =>{\r\n        res.data.forEach(item =>{\r\n          item.formId = item.formId.toString();\r\n        })\r\n        this.formList = res.data;\r\n      })\r\n    },\r\n    // 设计器右侧表单数据回显\r\n    checkValuesEcho(){\r\n      const that = this;\r\n      const attrs = that.element.businessObject.$attrs;\r\n      const businessObject = that.element.businessObject;\r\n      console.log(that.element.businessObject,\"this.element.businessObject\")\r\n      // 指定用户\r\n      if (attrs.hasOwnProperty(\"flowable:assignee\")) {\r\n        const val = attrs[\"flowable:assignee\"];\r\n        // 查找是否动态指定人员(选中流程表达式)\r\n        if (attrs[\"flowable:dataType\"] === \"dynamic\") {\r\n          this.checkValues = that.expList.find(item => item.expression == val).name;\r\n          this.selectValues = that.expList.find(item => item.expression == val).id;\r\n        } else {\r\n          this.checkValues = that.userList.find(item => item.userId == val).nickName;\r\n          this.selectValues = that.userList.find(item => item.userId == val).userId;\r\n        }\r\n        // 候选用户\r\n      } else if (attrs.hasOwnProperty(\"flowable:candidateUsers\")) {\r\n        const val = attrs[\"flowable:candidateUsers\"];\r\n        if (attrs[\"flowable:dataType\"] === \"dynamic\") {\r\n          this.checkValues = that.expList.find(item => item.expression == val).name;\r\n          this.selectValues = that.expList.find(item => item.expression == val).id;\r\n        } else {\r\n          const newArr = that.userList.filter(i => val.split(',').includes(i.userId))\r\n          this.checkValues =  newArr.map(item => item.nickName).join(',');\r\n          this.selectValues = newArr.map(item => item.userId).join(',');\r\n        }\r\n      } else if (businessObject.hasOwnProperty(\"candidateGroups\") || attrs.hasOwnProperty(\"flowable:candidateGroups\") ) {\r\n        // 候选角色信息\r\n        const val = businessObject[\"candidateGroups\"] || attrs[\"flowable:candidateGroups\"];\r\n        if (attrs[\"flowable:dataType\"] === \"dynamic\") {\r\n          this.checkValues = that.expList.find(item => item.expression == val).name;\r\n          this.selectValues = that.expList.find(item => item.expression == val).id;\r\n        } else {\r\n          const newArr = that.groupList.filter(i => val.split(',').includes(i.roleId))\r\n          this.checkValues =  newArr.map(item => item.roleName).join(',');\r\n          this.selectValues = newArr.map(item => item.roleId).join(',');\r\n        }\r\n      }\r\n    },\r\n    finishExecutionListener() {\r\n      if (this.dialogName === 'executionListenerDialog') {\r\n        this.computedExecutionListenerLength()\r\n      }\r\n      this.dialogName = ''\r\n    },\r\n    finishTaskListener() {\r\n      if (this.dialogName === 'taskListenerDialog') {\r\n        this.computedTaskListenerLength()\r\n      }\r\n      this.dialogName = ''\r\n    },\r\n    finishMultiInstance() {\r\n      if (this.dialogName === 'multiInstanceDialog') {\r\n        this.computedHasMultiInstance()\r\n      }\r\n      this.dialogName = ''\r\n    },\r\n    /*单选人员*/\r\n    singleUserCheck(){\r\n      this.userVisible = true;\r\n      this.checkType = \"single\";\r\n    },\r\n    /*多选人员*/\r\n    multipleUserCheck(){\r\n      this.userVisible = true;\r\n      this.checkType = \"multiple\";\r\n    },\r\n    /*单选角色*/\r\n    singleRoleCheck(){\r\n      this.roleVisible = true;\r\n      this.checkType = \"single\";\r\n    },\r\n    /*多选角色*/\r\n    multipleRoleCheck(){\r\n      this.roleVisible = true;\r\n      this.checkType = \"multiple\";\r\n    },\r\n    /*单选表达式*/\r\n    singleExpCheck(expType){\r\n      this.expVisible = true;\r\n      this.expType = expType;\r\n    },\r\n    // 选中表达式\r\n    handleSingleExpSelect(selection) {\r\n      this.deleteFlowAttar();\r\n      this.updateProperties({'flowable:dataType': 'dynamic'})\r\n      if (\"assignee\" === this.expType) {\r\n        this.updateProperties({'flowable:assignee': selection.expression});\r\n      } else if (\"candidateUsers\" === this.expType) {\r\n        this.updateProperties({'flowable:candidateUsers': selection.expression});\r\n      } else if (\"candidateGroups\" === this.expType) {\r\n        this.updateProperties({'flowable:candidateGroups': selection.expression});\r\n      }\r\n      this.checkValues = selection.name;\r\n      this.expType = null;\r\n    },\r\n    // 用户选中数据\r\n    handleUserSelect(selection) {\r\n      const that = this;\r\n      if (selection) {\r\n        that.deleteFlowAttar();\r\n        that.updateProperties({'flowable:dataType': 'fixed'})\r\n        if (selection instanceof Array) {\r\n          const userIds = selection.map(item => item.userId);\r\n          const nickName = selection.map(item => item.nickName);\r\n          that.updateProperties({'flowable:candidateUsers': userIds.join(',')})\r\n          that.checkValues = nickName.join(',');\r\n        } else {\r\n          that.updateProperties({'flowable:assignee': selection.userId})\r\n          that.checkValues = selection.nickName;\r\n        }\r\n      }\r\n    },\r\n    // 角色选中数据\r\n    handleRoleSelect(selection, name) {\r\n      const that = this;\r\n      if (selection && name) {\r\n        that.deleteFlowAttar();\r\n        that.updateProperties({'flowable:dataType': 'fixed'})\r\n        that.updateProperties({'flowable:candidateGroups': selection});\r\n        that.checkValues = name;\r\n      }\r\n    },\r\n    /*用户选中赋值*/\r\n    checkUserComplete(){\r\n      this.userVisible = false;\r\n      this.checkType = \"\";\r\n    },\r\n    /*候选角色选中赋值*/\r\n    checkRoleComplete(){\r\n      this.roleVisible = false;\r\n      this.checkType = \"\";\r\n      },\r\n    /*表达式选中赋值*/\r\n    checkExpComplete(){\r\n      this.expVisible = false;\r\n    },\r\n    // 删除节点\r\n    deleteFlowAttar(){\r\n      delete this.element.businessObject.$attrs[`flowable:dataType`]\r\n      delete this.element.businessObject.$attrs[`flowable:assignee`]\r\n      delete this.element.businessObject.$attrs[`flowable:candidateUsers`]\r\n      delete this.element.businessObject.$attrs[`flowable:candidateGroups`]\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style></style>\r\n"]}]}