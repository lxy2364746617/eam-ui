{"remainingRequest":"E:\\visual_code_work_space\\ruoyi-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\visual_code_work_space\\ruoyi-ui\\src\\components\\Process\\components\\nodePanel\\sequenceFlow.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\visual_code_work_space\\ruoyi-ui\\src\\components\\Process\\components\\nodePanel\\sequenceFlow.vue","mtime":1693557459615},{"path":"E:\\visual_code_work_space\\ruoyi-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\visual_code_work_space\\ruoyi-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"E:\\visual_code_work_space\\ruoyi-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\visual_code_work_space\\ruoyi-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgbWl4aW5QYW5lbCBmcm9tICcuLi8uLi9jb21tb24vbWl4aW5QYW5lbCcNCmltcG9ydCB7U3RyVXRpbH0gZnJvbSAnQC91dGlscy9TdHJVdGlsJw0KaW1wb3J0IG1peGluRXhlY3V0aW9uTGlzdGVuZXIgZnJvbSAnLi4vLi4vY29tbW9uL21peGluRXhlY3V0aW9uTGlzdGVuZXInDQppbXBvcnQgeyBjb21tb25QYXJzZSwgY29uZGl0aW9uRXhwcmVzc2lvblBhcnNlIH0gZnJvbSAnLi4vLi4vY29tbW9uL3BhcnNlRWxlbWVudCcNCmV4cG9ydCBkZWZhdWx0IHsNCiAgbWl4aW5zOiBbbWl4aW5QYW5lbCwgbWl4aW5FeGVjdXRpb25MaXN0ZW5lcl0sDQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIGZvcm1EYXRhOiB7fSwNCiAgICAgIGV4ZWN1dGlvbkxpc3RlbmVyTGVuZ3RoOiAwDQogICAgfQ0KICB9LA0KICBjb21wdXRlZDogew0KICAgIGZvcm1Db25maWcoKSB7DQogICAgICByZXR1cm4gew0KICAgICAgICBpbmxpbmU6IGZhbHNlLA0KICAgICAgICBpdGVtOiBbDQogICAgICAgICAgew0KICAgICAgICAgICAgeFR5cGU6ICdpbnB1dCcsDQogICAgICAgICAgICBuYW1lOiAnaWQnLA0KICAgICAgICAgICAgbGFiZWw6ICfoioLngrkgaWQnLA0KICAgICAgICAgICAgcnVsZXM6IFt7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAnSWQg5LiN6IO95Li656m6JyB9XQ0KICAgICAgICAgIH0sDQogICAgICAgICAgew0KICAgICAgICAgICAgeFR5cGU6ICdpbnB1dCcsDQogICAgICAgICAgICBuYW1lOiAnbmFtZScsDQogICAgICAgICAgICBsYWJlbDogJ+iKgueCueWQjeensCcNCiAgICAgICAgICB9LA0KICAgICAgICAgIHsNCiAgICAgICAgICAgIHhUeXBlOiAnaW5wdXQnLA0KICAgICAgICAgICAgbmFtZTogJ2RvY3VtZW50YXRpb24nLA0KICAgICAgICAgICAgbGFiZWw6ICfoioLngrnmj4/ov7AnDQogICAgICAgICAgfSwNCiAgICAgICAgICB7DQogICAgICAgICAgICB4VHlwZTogJ3Nsb3QnLA0KICAgICAgICAgICAgbmFtZTogJ2V4ZWN1dGlvbkxpc3RlbmVyJywNCiAgICAgICAgICAgIGxhYmVsOiAn5omn6KGM55uR5ZCs5ZmoJw0KICAgICAgICAgIH0sDQogICAgICAgICAgew0KICAgICAgICAgICAgeFR5cGU6ICdpbnB1dCcsDQogICAgICAgICAgICBuYW1lOiAnY29uZGl0aW9uRXhwcmVzc2lvbicsDQogICAgICAgICAgICBsYWJlbDogJ+i3s+i9rOadoeS7ticNCiAgICAgICAgICB9LA0KICAgICAgICAgIHsNCiAgICAgICAgICAgIHhUeXBlOiAnaW5wdXQnLA0KICAgICAgICAgICAgbmFtZTogJ3NraXBFeHByZXNzaW9uJywNCiAgICAgICAgICAgIGxhYmVsOiAn6Lez6L+H6KGo6L6+5byPJw0KICAgICAgICAgIH0NCiAgICAgICAgXQ0KICAgICAgfQ0KICAgIH0NCiAgfSwNCiAgd2F0Y2g6IHsNCiAgICAnZm9ybURhdGEuY29uZGl0aW9uRXhwcmVzc2lvbic6IGZ1bmN0aW9uKHZhbCkgew0KICAgICAgaWYgKFN0clV0aWwuaXNOb3RCbGFuayh2YWwpKSB7DQogICAgICAgIGNvbnN0IG5ld0NvbmRpdGlvbiA9IHRoaXMubW9kZWxlci5nZXQoJ21vZGRsZScpLmNyZWF0ZSgnYnBtbjpGb3JtYWxFeHByZXNzaW9uJywgeyBib2R5OiB2YWwgfSkNCiAgICAgICAgdGhpcy51cGRhdGVQcm9wZXJ0aWVzKHsgY29uZGl0aW9uRXhwcmVzc2lvbjogbmV3Q29uZGl0aW9uIH0pDQogICAgICB9DQogICAgICAvLyBlbHNlIHsNCiAgICAgIC8vICAgdGhpcy51cGRhdGVQcm9wZXJ0aWVzKHsgY29uZGl0aW9uRXhwcmVzc2lvbjogbnVsbCB9KQ0KICAgICAgLy8gfQ0KICAgIH0sDQogICAgJ2Zvcm1EYXRhLnNraXBFeHByZXNzaW9uJzogZnVuY3Rpb24odmFsKSB7DQogICAgICBpZiAoU3RyVXRpbC5pc05vdEJsYW5rKHZhbCkpIHsNCiAgICAgICAgdGhpcy51cGRhdGVQcm9wZXJ0aWVzKHsnZmxvd2FibGU6c2tpcEV4cHJlc3Npb24nOiB2YWx9KQ0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgZGVsZXRlIHRoaXMuZWxlbWVudC5idXNpbmVzc09iamVjdC4kYXR0cnNbYGZsb3dhYmxlOnNraXBFeHByZXNzaW9uYF0NCiAgICAgIH0NCiAgICB9DQogIH0sDQogIGNyZWF0ZWQoKSB7DQogICAgbGV0IGNhY2hlID0gY29tbW9uUGFyc2UodGhpcy5lbGVtZW50KQ0KICAgIGNhY2hlID0gY29uZGl0aW9uRXhwcmVzc2lvblBhcnNlKGNhY2hlKQ0KICAgIHRoaXMuZm9ybURhdGEgPSBjYWNoZTsNCiAgICB0aGlzLmNvbXB1dGVkRXhlY3V0aW9uTGlzdGVuZXJMZW5ndGgoKTsNCiAgfSwNCiAgbWV0aG9kczp7DQogICAgY29tcHV0ZWRFeGVjdXRpb25MaXN0ZW5lckxlbmd0aCgpIHsNCiAgICAgIHRoaXMuZXhlY3V0aW9uTGlzdGVuZXJMZW5ndGggPSB0aGlzLmVsZW1lbnQuYnVzaW5lc3NPYmplY3QuZXh0ZW5zaW9uRWxlbWVudHM/LnZhbHVlcw0KICAgICAgICA/LmZpbHRlcihpdGVtID0+IGl0ZW0uJHR5cGUgPT09ICdmbG93YWJsZTpFeGVjdXRpb25MaXN0ZW5lcicpLmxlbmd0aCA/PyAwDQogICAgfSwNCiAgfQ0KfQ0K"},{"version":3,"sources":["sequenceFlow.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;AAmBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"sequenceFlow.vue","sourceRoot":"src/components/Process/components/nodePanel","sourcesContent":["<template>\r\n  <div>\r\n    <x-form ref=\"xForm\" v-model=\"formData\" :config=\"formConfig\">\r\n      <template #executionListener>\r\n        <el-badge :value=\"executionListenerLength\">\r\n          <el-button size=\"small\" @click=\"dialogName = 'executionListenerDialog'\">编辑</el-button>\r\n        </el-badge>\r\n      </template>\r\n    </x-form>\r\n    <executionListenerDialog\r\n      v-if=\"dialogName === 'executionListenerDialog'\"\r\n      :element=\"element\"\r\n      :modeler=\"modeler\"\r\n      @close=\"finishExecutionListener\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport mixinPanel from '../../common/mixinPanel'\r\nimport {StrUtil} from '@/utils/StrUtil'\r\nimport mixinExecutionListener from '../../common/mixinExecutionListener'\r\nimport { commonParse, conditionExpressionParse } from '../../common/parseElement'\r\nexport default {\r\n  mixins: [mixinPanel, mixinExecutionListener],\r\n  data() {\r\n    return {\r\n      formData: {},\r\n      executionListenerLength: 0\r\n    }\r\n  },\r\n  computed: {\r\n    formConfig() {\r\n      return {\r\n        inline: false,\r\n        item: [\r\n          {\r\n            xType: 'input',\r\n            name: 'id',\r\n            label: '节点 id',\r\n            rules: [{ required: true, message: 'Id 不能为空' }]\r\n          },\r\n          {\r\n            xType: 'input',\r\n            name: 'name',\r\n            label: '节点名称'\r\n          },\r\n          {\r\n            xType: 'input',\r\n            name: 'documentation',\r\n            label: '节点描述'\r\n          },\r\n          {\r\n            xType: 'slot',\r\n            name: 'executionListener',\r\n            label: '执行监听器'\r\n          },\r\n          {\r\n            xType: 'input',\r\n            name: 'conditionExpression',\r\n            label: '跳转条件'\r\n          },\r\n          {\r\n            xType: 'input',\r\n            name: 'skipExpression',\r\n            label: '跳过表达式'\r\n          }\r\n        ]\r\n      }\r\n    }\r\n  },\r\n  watch: {\r\n    'formData.conditionExpression': function(val) {\r\n      if (StrUtil.isNotBlank(val)) {\r\n        const newCondition = this.modeler.get('moddle').create('bpmn:FormalExpression', { body: val })\r\n        this.updateProperties({ conditionExpression: newCondition })\r\n      }\r\n      // else {\r\n      //   this.updateProperties({ conditionExpression: null })\r\n      // }\r\n    },\r\n    'formData.skipExpression': function(val) {\r\n      if (StrUtil.isNotBlank(val)) {\r\n        this.updateProperties({'flowable:skipExpression': val})\r\n      } else {\r\n        delete this.element.businessObject.$attrs[`flowable:skipExpression`]\r\n      }\r\n    }\r\n  },\r\n  created() {\r\n    let cache = commonParse(this.element)\r\n    cache = conditionExpressionParse(cache)\r\n    this.formData = cache;\r\n    this.computedExecutionListenerLength();\r\n  },\r\n  methods:{\r\n    computedExecutionListenerLength() {\r\n      this.executionListenerLength = this.element.businessObject.extensionElements?.values\r\n        ?.filter(item => item.$type === 'flowable:ExecutionListener').length ?? 0\r\n    },\r\n  }\r\n}\r\n</script>\r\n\r\n<style></style>\r\n"]}]}