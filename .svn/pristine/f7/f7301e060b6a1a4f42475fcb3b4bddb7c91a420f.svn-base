{"remainingRequest":"E:\\visual_code_work_space\\cms-eam-ui\\node_modules\\babel-loader\\lib\\index.js!E:\\visual_code_work_space\\cms-eam-ui\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\visual_code_work_space\\cms-eam-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\visual_code_work_space\\cms-eam-ui\\src\\views\\flowable\\task\\record\\flowview.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\visual_code_work_space\\cms-eam-ui\\src\\views\\flowable\\task\\record\\flowview.vue","mtime":1693557459676},{"path":"E:\\visual_code_work_space\\cms-eam-ui\\babel.config.js","mtime":1693557459543},{"path":"E:\\visual_code_work_space\\cms-eam-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\visual_code_work_space\\cms-eam-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"E:\\visual_code_work_space\\cms-eam-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\visual_code_work_space\\cms-eam-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKdmFyIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQgPSByZXF1aXJlKCJFOi92aXN1YWxfY29kZV93b3JrX3NwYWNlL2Ntcy1lYW0tdWkvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvaW50ZXJvcFJlcXVpcmVEZWZhdWx0LmpzIikuZGVmYXVsdDsKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmRlZmF1bHQgPSB2b2lkIDA7CnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIik7CnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIik7CnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maW5kLmpzIik7CnZhciBfcmVnZW5lcmF0b3JSdW50aW1lMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiRTovdmlzdWFsX2NvZGVfd29ya19zcGFjZS9jbXMtZWFtLXVpL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL3JlZ2VuZXJhdG9yUnVudGltZS5qcyIpKTsKdmFyIF9hc3luY1RvR2VuZXJhdG9yMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiRTovdmlzdWFsX2NvZGVfd29ya19zcGFjZS9jbXMtZWFtLXVpL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2FzeW5jVG9HZW5lcmF0b3IuanMiKSk7CnZhciBfY3VzdG9tQnBtbiA9IHJlcXVpcmUoIkAvY29tcG9uZW50cy9jdXN0b21CcG1uIik7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCnZhciBfZGVmYXVsdDIgPSB7CiAgbmFtZTogIkZsb3dWaWV3IiwKICBwcm9wczogewogICAgeG1sRGF0YTogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICcnCiAgICB9LAogICAgdGFza0xpc3Q6IHsKICAgICAgdHlwZTogQXJyYXksCiAgICAgIGRlZmF1bHQ6IGZ1bmN0aW9uIF9kZWZhdWx0KCkgewogICAgICAgIHJldHVybiBbXTsKICAgICAgfQogICAgfQogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGJwbW5WaWV3ZXI6IG51bGwKICAgIH07CiAgfSwKICB3YXRjaDogewogICAgeG1sRGF0YTogZnVuY3Rpb24geG1sRGF0YSh2YWwpIHsKICAgICAgaWYgKHZhbCkgewogICAgICAgIHRoaXMuZ2V0SW1nKHZhbCk7CiAgICAgIH0KICAgIH0KICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICAvLyDnlJ/miJDlrp7kvosKICAgIHRoaXMuYnBtblZpZXdlciAmJiB0aGlzLmJwbW5WaWV3ZXIuZGVzdHJveSgpOwogICAgdGhpcy5icG1uVmlld2VyID0gbmV3IF9jdXN0b21CcG1uLkN1c3RvbVZpZXdlcih7CiAgICAgIGNvbnRhaW5lcjogdGhpcy4kcmVmcy5mbG93Q2FudmFzLAogICAgICBoZWlnaHQ6ICdjYWxjKDEwMHZoIC0gMjAwcHgpJwogICAgfSk7CiAgICAvLyB0aGlzLmdldEltZyh0aGlzLnhtbERhdGEpCiAgfSwKCiAgbWV0aG9kczogewogICAgLy8g6I635Y+W5rWB56iL5Zu+54mHCiAgICBnZXRJbWc6IGZ1bmN0aW9uIGdldEltZyh4bWxVcmwpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgcmV0dXJuICgwLCBfYXN5bmNUb0dlbmVyYXRvcjIuZGVmYXVsdCkoIC8qI19fUFVSRV9fKi8oMCwgX3JlZ2VuZXJhdG9yUnVudGltZTIuZGVmYXVsdCkoKS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgdmFyIHNlbGY7CiAgICAgICAgcmV0dXJuICgwLCBfcmVnZW5lcmF0b3JSdW50aW1lMi5kZWZhdWx0KSgpLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBzZWxmID0gX3RoaXM7CiAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDE7CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDQ7CiAgICAgICAgICAgICAgcmV0dXJuIHNlbGYuYnBtblZpZXdlci5pbXBvcnRYTUwoeG1sVXJsKTsKICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgIHNlbGYuZml0Vmlld3BvcnQoKTsKICAgICAgICAgICAgICBpZiAoc2VsZi50YXNrTGlzdCAhPT0gdW5kZWZpbmVkICYmIHNlbGYudGFza0xpc3QubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgc2VsZi5maWxsQ29sb3IoKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDExOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDg7CiAgICAgICAgICAgICAgX2NvbnRleHQudDAgPSBfY29udGV4dFsiY2F0Y2giXSgxKTsKICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKF9jb250ZXh0LnQwLm1lc3NhZ2UsIF9jb250ZXh0LnQwLndhcm5pbmdzKTsKICAgICAgICAgICAgY2FzZSAxMToKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUsIG51bGwsIFtbMSwgOF1dKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgLy8g6K6+572u6auY5Lqu6aKc6Imy55qEY2xhc3MKICAgIHNldE5vZGVDb2xvcjogZnVuY3Rpb24gc2V0Tm9kZUNvbG9yKG5vZGVDb2RlcywgY29sb3JDbGFzcywgY2FudmFzKSB7CiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbm9kZUNvZGVzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgY2FudmFzLmFkZE1hcmtlcihub2RlQ29kZXNbaV0sIGNvbG9yQ2xhc3MpOwogICAgICB9CiAgICB9LAogICAgLy8g6K6p5Zu+6IO96Ieq6YCC5bqU5bGP5bmVCiAgICBmaXRWaWV3cG9ydDogZnVuY3Rpb24gZml0Vmlld3BvcnQoKSB7CiAgICAgIHRoaXMuem9vbSA9IHRoaXMuYnBtblZpZXdlci5nZXQoJ2NhbnZhcycpLnpvb20oImZpdC12aWV3cG9ydCIsICJhdXRvIik7CiAgICB9LAogICAgLy8g5pS+5aSn57yp5bCPCiAgICB6b29tVmlld3BvcnQ6IGZ1bmN0aW9uIHpvb21WaWV3cG9ydCgpIHsKICAgICAgdmFyIHpvb21JbiA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogdHJ1ZTsKICAgICAgdGhpcy56b29tID0gdGhpcy5icG1uVmlld2VyLmdldCgnY2FudmFzJykuem9vbSgpOwogICAgICB0aGlzLnpvb20gKz0gem9vbUluID8gMC4xIDogLTAuMTsKICAgICAgaWYgKHRoaXMuem9vbSA+PSAwLjIpIHRoaXMuYnBtblZpZXdlci5nZXQoJ2NhbnZhcycpLnpvb20odGhpcy56b29tKTsKICAgIH0sCiAgICAvLyDorr7nva7pq5jkuq7popzoibLnmoQKICAgIGZpbGxDb2xvcjogZnVuY3Rpb24gZmlsbENvbG9yKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKICAgICAgdmFyIGNhbnZhcyA9IHRoaXMuYnBtblZpZXdlci5nZXQoJ2NhbnZhcycpOwogICAgICB0aGlzLmJwbW5WaWV3ZXIuZ2V0RGVmaW5pdGlvbnMoKS5yb290RWxlbWVudHNbMF0uZmxvd0VsZW1lbnRzLmZvckVhY2goZnVuY3Rpb24gKG4pIHsKICAgICAgICB2YXIgY29tcGxldGVUYXNrID0gX3RoaXMyLnRhc2tMaXN0LmZpbmQoZnVuY3Rpb24gKG0pIHsKICAgICAgICAgIHJldHVybiBtLmtleSA9PT0gbi5pZDsKICAgICAgICB9KTsKICAgICAgICB2YXIgdG9kb1Rhc2sgPSBfdGhpczIudGFza0xpc3QuZmluZChmdW5jdGlvbiAobSkgewogICAgICAgICAgcmV0dXJuICFtLmNvbXBsZXRlZDsKICAgICAgICB9KTsKICAgICAgICB2YXIgZW5kVGFzayA9IF90aGlzMi50YXNrTGlzdFtfdGhpczIudGFza0xpc3QubGVuZ3RoIC0gMV07CiAgICAgICAgaWYgKG4uJHR5cGUgPT09ICdicG1uOlVzZXJUYXNrJykgewogICAgICAgICAgaWYgKGNvbXBsZXRlVGFzaykgewogICAgICAgICAgICB2YXIgX24kb3V0Z29pbmc7CiAgICAgICAgICAgIGNhbnZhcy5hZGRNYXJrZXIobi5pZCwgY29tcGxldGVUYXNrLmNvbXBsZXRlZCA/ICdoaWdobGlnaHQnIDogJ2hpZ2hsaWdodC10b2RvJyk7CiAgICAgICAgICAgIChfbiRvdXRnb2luZyA9IG4ub3V0Z29pbmcpID09PSBudWxsIHx8IF9uJG91dGdvaW5nID09PSB2b2lkIDAgfHwgX24kb3V0Z29pbmcuZm9yRWFjaChmdW5jdGlvbiAobm4pIHsKICAgICAgICAgICAgICB2YXIgdGFyZ2V0VGFzayA9IF90aGlzMi50YXNrTGlzdC5maW5kKGZ1bmN0aW9uIChtKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gbS5rZXkgPT09IG5uLnRhcmdldFJlZi5pZDsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICBpZiAodGFyZ2V0VGFzaykgewogICAgICAgICAgICAgICAgaWYgKHRvZG9UYXNrICYmIGNvbXBsZXRlVGFzay5rZXkgPT09IHRvZG9UYXNrLmtleSAmJiAhdG9kb1Rhc2suY29tcGxldGVkKSB7CiAgICAgICAgICAgICAgICAgIGNhbnZhcy5hZGRNYXJrZXIobm4uaWQsIHRvZG9UYXNrLmNvbXBsZXRlZCA/ICdoaWdobGlnaHQnIDogJ2hpZ2hsaWdodC10b2RvJyk7CiAgICAgICAgICAgICAgICAgIGNhbnZhcy5hZGRNYXJrZXIobm4udGFyZ2V0UmVmLmlkLCB0b2RvVGFzay5jb21wbGV0ZWQgPyAnaGlnaGxpZ2h0JyA6ICdoaWdobGlnaHQtdG9kbycpOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgY2FudmFzLmFkZE1hcmtlcihubi5pZCwgdGFyZ2V0VGFzay5jb21wbGV0ZWQgPyAnaGlnaGxpZ2h0JyA6ICdoaWdobGlnaHQtdG9kbycpOwogICAgICAgICAgICAgICAgICBjYW52YXMuYWRkTWFya2VyKG5uLnRhcmdldFJlZi5pZCwgdGFyZ2V0VGFzay5jb21wbGV0ZWQgPyAnaGlnaGxpZ2h0JyA6ICdoaWdobGlnaHQtdG9kbycpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIC8vIOaOkuS7lue9keWFswogICAgICAgIGVsc2UgaWYgKG4uJHR5cGUgPT09ICdicG1uOkV4Y2x1c2l2ZUdhdGV3YXknKSB7CiAgICAgICAgICBpZiAoY29tcGxldGVUYXNrKSB7CiAgICAgICAgICAgIHZhciBfbiRvdXRnb2luZzI7CiAgICAgICAgICAgIGNhbnZhcy5hZGRNYXJrZXIobi5pZCwgY29tcGxldGVUYXNrLmNvbXBsZXRlZCA/ICdoaWdobGlnaHQnIDogJ2hpZ2hsaWdodC10b2RvJyk7CiAgICAgICAgICAgIChfbiRvdXRnb2luZzIgPSBuLm91dGdvaW5nKSA9PT0gbnVsbCB8fCBfbiRvdXRnb2luZzIgPT09IHZvaWQgMCB8fCBfbiRvdXRnb2luZzIuZm9yRWFjaChmdW5jdGlvbiAobm4pIHsKICAgICAgICAgICAgICB2YXIgdGFyZ2V0VGFzayA9IF90aGlzMi50YXNrTGlzdC5maW5kKGZ1bmN0aW9uIChtKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gbS5rZXkgPT09IG5uLnRhcmdldFJlZi5pZDsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICBpZiAodGFyZ2V0VGFzaykgewogICAgICAgICAgICAgICAgY2FudmFzLmFkZE1hcmtlcihubi5pZCwgdGFyZ2V0VGFzay5jb21wbGV0ZWQgPyAnaGlnaGxpZ2h0JyA6ICdoaWdobGlnaHQtdG9kbycpOwogICAgICAgICAgICAgICAgY2FudmFzLmFkZE1hcmtlcihubi50YXJnZXRSZWYuaWQsIHRhcmdldFRhc2suY29tcGxldGVkID8gJ2hpZ2hsaWdodCcgOiAnaGlnaGxpZ2h0LXRvZG8nKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICAvLyDlubbooYznvZHlhbMKICAgICAgICBlbHNlIGlmIChuLiR0eXBlID09PSAnYnBtbjpQYXJhbGxlbEdhdGV3YXknKSB7CiAgICAgICAgICBpZiAoY29tcGxldGVUYXNrKSB7CiAgICAgICAgICAgIHZhciBfbiRvdXRnb2luZzM7CiAgICAgICAgICAgIGNhbnZhcy5hZGRNYXJrZXIobi5pZCwgY29tcGxldGVUYXNrLmNvbXBsZXRlZCA/ICdoaWdobGlnaHQnIDogJ2hpZ2hsaWdodC10b2RvJyk7CiAgICAgICAgICAgIChfbiRvdXRnb2luZzMgPSBuLm91dGdvaW5nKSA9PT0gbnVsbCB8fCBfbiRvdXRnb2luZzMgPT09IHZvaWQgMCB8fCBfbiRvdXRnb2luZzMuZm9yRWFjaChmdW5jdGlvbiAobm4pIHsKICAgICAgICAgICAgICB2YXIgdGFyZ2V0VGFzayA9IF90aGlzMi50YXNrTGlzdC5maW5kKGZ1bmN0aW9uIChtKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gbS5rZXkgPT09IG5uLnRhcmdldFJlZi5pZDsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICBpZiAodGFyZ2V0VGFzaykgewogICAgICAgICAgICAgICAgY2FudmFzLmFkZE1hcmtlcihubi5pZCwgdGFyZ2V0VGFzay5jb21wbGV0ZWQgPyAnaGlnaGxpZ2h0JyA6ICdoaWdobGlnaHQtdG9kbycpOwogICAgICAgICAgICAgICAgY2FudmFzLmFkZE1hcmtlcihubi50YXJnZXRSZWYuaWQsIHRhcmdldFRhc2suY29tcGxldGVkID8gJ2hpZ2hsaWdodCcgOiAnaGlnaGxpZ2h0LXRvZG8nKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSBpZiAobi4kdHlwZSA9PT0gJ2JwbW46U3RhcnRFdmVudCcpIHsKICAgICAgICAgIG4ub3V0Z29pbmcuZm9yRWFjaChmdW5jdGlvbiAobm4pIHsKICAgICAgICAgICAgdmFyIGNvbXBsZXRlVGFzayA9IF90aGlzMi50YXNrTGlzdC5maW5kKGZ1bmN0aW9uIChtKSB7CiAgICAgICAgICAgICAgcmV0dXJuIG0ua2V5ID09PSBubi50YXJnZXRSZWYuaWQ7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBpZiAoY29tcGxldGVUYXNrKSB7CiAgICAgICAgICAgICAgY2FudmFzLmFkZE1hcmtlcihubi5pZCwgJ2hpZ2hsaWdodCcpOwogICAgICAgICAgICAgIGNhbnZhcy5hZGRNYXJrZXIobi5pZCwgJ2hpZ2hsaWdodCcpOwogICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIGlmIChuLiR0eXBlID09PSAnYnBtbjpFbmRFdmVudCcpIHsKICAgICAgICAgIGlmIChlbmRUYXNrLmtleSA9PT0gbi5pZCAmJiBlbmRUYXNrLmNvbXBsZXRlZCkgewogICAgICAgICAgICBjYW52YXMuYWRkTWFya2VyKG4uaWQsICdoaWdobGlnaHQnKTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgfQp9OwpleHBvcnRzLmRlZmF1bHQgPSBfZGVmYXVsdDI7"},{"version":3,"names":["_customBpmn","require","name","props","xmlData","type","String","default","taskList","Array","_default","data","bpmnViewer","watch","val","getImg","mounted","destroy","BpmnViewer","container","$refs","flowCanvas","height","methods","xmlUrl","_this","_asyncToGenerator2","_regeneratorRuntime2","mark","_callee","self","wrap","_callee$","_context","prev","next","importXML","fitViewport","undefined","length","fillColor","t0","console","error","message","warnings","stop","setNodeColor","nodeCodes","colorClass","canvas","i","addMarker","zoom","get","zoomViewport","zoomIn","arguments","_this2","getDefinitions","rootElements","flowElements","forEach","n","completeTask","find","m","key","id","todoTask","completed","endTask","$type","_n$outgoing","outgoing","nn","targetTask","targetRef","_n$outgoing2","_n$outgoing3","exports","_default2"],"sources":["src/views/flowable/task/record/flowview.vue"],"sourcesContent":["<template>\r\n  <div class=\"containers main-box\">\r\n    <el-button type=\"success\"\r\n               size=\"small\"\r\n               icon=\"el-icon-zoom-in\"\r\n               @click=\"zoomViewport(true)\">放大</el-button>\r\n    <el-button type=\"warning\"\r\n               size=\"small\"\r\n               icon=\"el-icon-zoom-out\"\r\n               @click=\"zoomViewport(false)\">缩小</el-button>\r\n    <el-button type=\"info\"\r\n               size=\"small\"\r\n               icon=\"el-icon-rank\"\r\n               @click=\"fitViewport\">适中</el-button>\r\n    <div class=\"canvas\" ref=\"flowCanvas\"></div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { CustomViewer as BpmnViewer } from \"@/components/customBpmn\";\r\n\r\nexport default {\r\n  name: \"FlowView\",\r\n  props: {\r\n    xmlData: {\r\n      type: String,\r\n      default: ''\r\n    },\r\n    taskList: {\r\n      type: Array,\r\n      default: () => []\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      bpmnViewer: null\r\n    };\r\n  },\r\n  watch: {\r\n    xmlData: function(val) {\r\n      if (val) {\r\n        this.getImg(val)\r\n      }\r\n    }\r\n  },\r\n  mounted() {\r\n    // 生成实例\r\n    this.bpmnViewer && this.bpmnViewer.destroy();\r\n    this.bpmnViewer = new BpmnViewer({\r\n      container: this.$refs.flowCanvas,\r\n      height: 'calc(100vh - 200px)',\r\n    });\r\n    // this.getImg(this.xmlData)\r\n  },\r\n  methods: {\r\n    // 获取流程图片\r\n    async getImg(xmlUrl) {\r\n      const self = this\r\n      try {\r\n        await self.bpmnViewer.importXML(xmlUrl);\r\n        self.fitViewport()\r\n        if (self.taskList !==undefined && self.taskList.length > 0 ) {\r\n          self.fillColor()\r\n        }\r\n      } catch (err) {\r\n        console.error(err.message, err.warnings)\r\n      }\r\n    },\r\n    // 设置高亮颜色的class\r\n    setNodeColor(nodeCodes, colorClass, canvas) {\r\n      for (let i = 0; i < nodeCodes.length; i++) {\r\n        canvas.addMarker(nodeCodes[i], colorClass);\r\n      }\r\n    },\r\n    // 让图能自适应屏幕\r\n    fitViewport() {\r\n      this.zoom = this.bpmnViewer.get('canvas').zoom(\"fit-viewport\", \"auto\")\r\n    },\r\n    // 放大缩小\r\n    zoomViewport(zoomIn = true) {\r\n      this.zoom = this.bpmnViewer.get('canvas').zoom()\r\n      this.zoom += (zoomIn ? 0.1 : -0.1)\r\n      if(this.zoom >= 0.2) this.bpmnViewer.get('canvas').zoom(this.zoom)\r\n    },\r\n\r\n    // 设置高亮颜色的\r\n    fillColor() {\r\n      const canvas = this.bpmnViewer.get('canvas')\r\n      this.bpmnViewer.getDefinitions().rootElements[0].flowElements.forEach(n => {\r\n        const completeTask = this.taskList.find(m => m.key === n.id)\r\n        const todoTask = this.taskList.find(m => !m.completed)\r\n        const endTask = this.taskList[this.taskList.length - 1]\r\n        if (n.$type === 'bpmn:UserTask') {\r\n          if (completeTask) {\r\n            canvas.addMarker(n.id, completeTask.completed ? 'highlight' : 'highlight-todo')\r\n            n.outgoing?.forEach(nn => {\r\n              const targetTask = this.taskList.find(m => m.key === nn.targetRef.id)\r\n              if (targetTask) {\r\n                if (todoTask && completeTask.key === todoTask.key && !todoTask.completed){\r\n                  canvas.addMarker(nn.id, todoTask.completed ? 'highlight' : 'highlight-todo')\r\n                  canvas.addMarker(nn.targetRef.id, todoTask.completed ? 'highlight' : 'highlight-todo')\r\n                }else {\r\n                  canvas.addMarker(nn.id, targetTask.completed ? 'highlight' : 'highlight-todo')\r\n                  canvas.addMarker(nn.targetRef.id, targetTask.completed ? 'highlight' : 'highlight-todo')\r\n                }\r\n              }\r\n            })\r\n          }\r\n        }\r\n        // 排他网关\r\n        else if (n.$type === 'bpmn:ExclusiveGateway') {\r\n          if (completeTask) {\r\n            canvas.addMarker(n.id, completeTask.completed ? 'highlight' : 'highlight-todo')\r\n            n.outgoing?.forEach(nn => {\r\n              const targetTask = this.taskList.find(m => m.key === nn.targetRef.id)\r\n              if (targetTask) {\r\n\r\n                canvas.addMarker(nn.id, targetTask.completed ? 'highlight' : 'highlight-todo')\r\n                canvas.addMarker(nn.targetRef.id, targetTask.completed ? 'highlight' : 'highlight-todo')\r\n              }\r\n\r\n            })\r\n          }\r\n\r\n        }\r\n        // 并行网关\r\n        else if (n.$type === 'bpmn:ParallelGateway') {\r\n          if (completeTask) {\r\n            canvas.addMarker(n.id, completeTask.completed ? 'highlight' : 'highlight-todo')\r\n            n.outgoing?.forEach(nn => {\r\n              const targetTask = this.taskList.find(m => m.key === nn.targetRef.id)\r\n              if (targetTask) {\r\n                canvas.addMarker(nn.id, targetTask.completed ? 'highlight' : 'highlight-todo')\r\n                canvas.addMarker(nn.targetRef.id, targetTask.completed ? 'highlight' : 'highlight-todo')\r\n              }\r\n            })\r\n          }\r\n        }\r\n        else if (n.$type === 'bpmn:StartEvent') {\r\n          n.outgoing.forEach(nn => {\r\n            const completeTask = this.taskList.find(m => m.key === nn.targetRef.id)\r\n            if (completeTask) {\r\n              canvas.addMarker(nn.id, 'highlight')\r\n              canvas.addMarker(n.id, 'highlight')\r\n              return\r\n            }\r\n          })\r\n        }\r\n        else if (n.$type === 'bpmn:EndEvent') {\r\n          if (endTask.key === n.id && endTask.completed) {\r\n            canvas.addMarker(n.id, 'highlight')\r\n            return\r\n          }\r\n        }\r\n      })\r\n    },\r\n  }\r\n};\r\n</script>\r\n<style lang=\"scss\">\r\n  .bjs-powered-by {\r\n    display: none;\r\n  }\r\n  .view-mode {\r\n    .el-header, .el-aside, .djs-palette, .bjs-powered-by {\r\n      display: none;\r\n    }\r\n    .el-loading-mask {\r\n      background-color: initial;\r\n    }\r\n    .el-loading-spinner {\r\n      display: none;\r\n    }\r\n  }\r\n  .containers {\r\n    // background-color: #ffffff;\r\n    width: 100%;\r\n    height: 100%;\r\n    .canvas {\r\n      width: 100%;\r\n      height: 100%;\r\n    }\r\n    .panel {\r\n      position: absolute;\r\n      right: 0;\r\n      top: 50px;\r\n      width: 300px;\r\n    }\r\n    .load {\r\n      margin-right: 10px;\r\n    }\r\n    .el-form-item__label{\r\n      font-size: 13px;\r\n    }\r\n\r\n    .djs-palette{\r\n      left: 0px!important;\r\n      top: 0px;\r\n      border-top: none;\r\n    }\r\n\r\n    .djs-container svg {\r\n      min-height: 650px;\r\n    }\r\n\r\n    .highlight.djs-shape .djs-visual > :nth-child(1) {\r\n      fill: green !important;\r\n      stroke: green !important;\r\n      fill-opacity: 0.2 !important;\r\n    }\r\n    .highlight.djs-shape .djs-visual > :nth-child(2) {\r\n      fill: green !important;\r\n    }\r\n    .highlight.djs-shape .djs-visual > path {\r\n      fill: green !important;\r\n      fill-opacity: 0.2 !important;\r\n      stroke: green !important;\r\n    }\r\n    .highlight.djs-connection > .djs-visual > path {\r\n      stroke: green !important;\r\n    }\r\n    .highlight-todo.djs-connection > .djs-visual > path {\r\n      stroke: orange !important;\r\n      stroke-dasharray: 4px !important;\r\n      fill-opacity: 0.2 !important;\r\n    }\r\n    .highlight-todo.djs-shape .djs-visual > :nth-child(1) {\r\n      fill: orange !important;\r\n      stroke: orange !important;\r\n      stroke-dasharray: 4px !important;\r\n      fill-opacity: 0.2 !important;\r\n    }\r\n    .overlays-div {\r\n      font-size: 10px;\r\n      color: red;\r\n      width: 100px;\r\n      top: -20px !important;\r\n    }\r\n  }\r\n</style>\r\n"],"mappings":"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"}]}