{"remainingRequest":"E:\\qrhpro\\cms-eam-ui\\node_modules\\babel-loader\\lib\\index.js!E:\\qrhpro\\cms-eam-ui\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\qrhpro\\cms-eam-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\qrhpro\\cms-eam-ui\\src\\components\\Process\\PropertyPanel.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\qrhpro\\cms-eam-ui\\src\\components\\Process\\PropertyPanel.vue","mtime":1693791858967},{"path":"E:\\qrhpro\\cms-eam-ui\\babel.config.js","mtime":1693791556521},{"path":"E:\\qrhpro\\cms-eam-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1693791616229},{"path":"E:\\qrhpro\\cms-eam-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":1693791596985},{"path":"E:\\qrhpro\\cms-eam-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1693791616229},{"path":"E:\\qrhpro\\cms-eam-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":1693791844037}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKdmFyIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQgPSByZXF1aXJlKCJFOi9xcmhwcm8vY21zLWVhbS11aS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9pbnRlcm9wUmVxdWlyZURlZmF1bHQuanMiKS5kZWZhdWx0OwpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7CmV4cG9ydHMuZGVmYXVsdCA9IHZvaWQgMDsKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmluY2x1ZGVzLmpzIik7CnZhciBfdGFzayA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiLi9jb21wb25lbnRzL25vZGVQYW5lbC90YXNrIikpOwp2YXIgX3N0YXJ0RW5kID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCIuL2NvbXBvbmVudHMvbm9kZVBhbmVsL3N0YXJ0RW5kIikpOwp2YXIgX3Byb2Nlc3MgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoIi4vY29tcG9uZW50cy9ub2RlUGFuZWwvcHJvY2VzcyIpKTsKdmFyIF9zZXF1ZW5jZUZsb3cgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoIi4vY29tcG9uZW50cy9ub2RlUGFuZWwvc2VxdWVuY2VGbG93IikpOwp2YXIgX2dhdGV3YXkgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoIi4vY29tcG9uZW50cy9ub2RlUGFuZWwvZ2F0ZXdheSIpKTsKdmFyIF96aCA9IHJlcXVpcmUoIi4vbGFuZy96aCIpOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwp2YXIgX2RlZmF1bHQyID0gewogIG5hbWU6ICdQcm9wZXJ0eVBhbmVsJywKICBjb21wb25lbnRzOiB7CiAgICBwcm9jZXNzUGFuZWw6IF9wcm9jZXNzLmRlZmF1bHQsCiAgICB0YXNrUGFuZWw6IF90YXNrLmRlZmF1bHQsCiAgICBzdGFydEVuZFBhbmVsOiBfc3RhcnRFbmQuZGVmYXVsdCwKICAgIHNlcXVlbmNlRmxvd1BhbmVsOiBfc2VxdWVuY2VGbG93LmRlZmF1bHQsCiAgICBnYXRld2F5UGFuZWw6IF9nYXRld2F5LmRlZmF1bHQKICB9LAogIHByb3BzOiB7CiAgICB1c2VyczogewogICAgICB0eXBlOiBBcnJheSwKICAgICAgcmVxdWlyZWQ6IHRydWUKICAgIH0sCiAgICBncm91cHM6IHsKICAgICAgdHlwZTogQXJyYXksCiAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICB9LAogICAgY2F0ZWdvcnlzOiB7CiAgICAgIHR5cGU6IEFycmF5LAogICAgICByZXF1aXJlZDogdHJ1ZQogICAgfSwKICAgIGV4cHM6IHsKICAgICAgdHlwZTogQXJyYXksCiAgICAgIGRlZmF1bHQ6IGZ1bmN0aW9uIF9kZWZhdWx0KCkgewogICAgICAgIHJldHVybiBbXTsKICAgICAgfQogICAgfSwKICAgIG1vZGVsZXI6IHsKICAgICAgdHlwZTogT2JqZWN0LAogICAgICByZXF1aXJlZDogdHJ1ZQogICAgfQogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGVsZW1lbnQ6IG51bGwsCiAgICAgIGZvcm06IHsKICAgICAgICBpZDogJycsCiAgICAgICAgbmFtZTogJycsCiAgICAgICAgY29sb3I6IG51bGwKICAgICAgfQogICAgfTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICBnZXRDb21wb25lbnQ6IGZ1bmN0aW9uIGdldENvbXBvbmVudCgpIHsKICAgICAgdmFyIF90aGlzJGVsZW1lbnQ7CiAgICAgIHZhciB0eXBlID0gKF90aGlzJGVsZW1lbnQgPSB0aGlzLmVsZW1lbnQpID09PSBudWxsIHx8IF90aGlzJGVsZW1lbnQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJGVsZW1lbnQudHlwZTsKICAgICAgaWYgKFsnYnBtbjpJbnRlcm1lZGlhdGVUaHJvd0V2ZW50JywgJ2JwbW46U3RhcnRFdmVudCcsICdicG1uOkVuZEV2ZW50J10uaW5jbHVkZXModHlwZSkpIHsKICAgICAgICByZXR1cm4gJ3N0YXJ0RW5kUGFuZWwnOwogICAgICB9CiAgICAgIGlmIChbJ2JwbW46VXNlclRhc2snLCAnYnBtbjpUYXNrJywgJ2JwbW46U2VuZFRhc2snLCAnYnBtbjpSZWNlaXZlVGFzaycsICdicG1uOk1hbnVhbFRhc2snLCAnYnBtbjpCdXNpbmVzc1J1bGVUYXNrJywgJ2JwbW46U2VydmljZVRhc2snLCAnYnBtbjpTY3JpcHRUYXNrJwogICAgICAvLyAnYnBtbjpDYWxsQWN0aXZpdHknLAogICAgICAvLyAnYnBtbjpTdWJQcm9jZXNzJwogICAgICBdLmluY2x1ZGVzKHR5cGUpKSB7CiAgICAgICAgcmV0dXJuICd0YXNrUGFuZWwnOwogICAgICB9CiAgICAgIGlmICh0eXBlID09PSAnYnBtbjpTZXF1ZW5jZUZsb3cnKSB7CiAgICAgICAgcmV0dXJuICdzZXF1ZW5jZUZsb3dQYW5lbCc7CiAgICAgIH0KICAgICAgaWYgKFsnYnBtbjpJbmNsdXNpdmVHYXRld2F5JywgJ2JwbW46RXhjbHVzaXZlR2F0ZXdheScsICdicG1uOlBhcmFsbGVsR2F0ZXdheScsICdicG1uOkV2ZW50QmFzZWRHYXRld2F5J10uaW5jbHVkZXModHlwZSkpIHsKICAgICAgICByZXR1cm4gJ2dhdGV3YXlQYW5lbCc7CiAgICAgIH0KICAgICAgaWYgKHR5cGUgPT09ICdicG1uOlByb2Nlc3MnKSB7CiAgICAgICAgcmV0dXJuICdwcm9jZXNzUGFuZWwnOwogICAgICB9CiAgICAgIHJldHVybiBudWxsOwogICAgfSwKICAgIG5vZGVOYW1lOiBmdW5jdGlvbiBub2RlTmFtZSgpIHsKICAgICAgaWYgKHRoaXMuZWxlbWVudCkgewogICAgICAgIHZhciBiaXpPYmogPSB0aGlzLmVsZW1lbnQuYnVzaW5lc3NPYmplY3Q7CiAgICAgICAgdmFyIHR5cGUgPSBiaXpPYmogIT09IG51bGwgJiYgYml6T2JqICE9PSB2b2lkIDAgJiYgYml6T2JqLmV2ZW50RGVmaW5pdGlvbnMgPyBiaXpPYmouZXZlbnREZWZpbml0aW9uc1swXS4kdHlwZSA6IGJpek9iai4kdHlwZTsKICAgICAgICByZXR1cm4gX3poLk5vZGVOYW1lW3R5cGVdIHx8IHR5cGU7CiAgICAgIH0KICAgICAgcmV0dXJuICcnOwogICAgfQogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHRoaXMuaGFuZGxlTW9kZWxlcigpOwogIH0sCiAgbWV0aG9kczogewogICAgaGFuZGxlTW9kZWxlcjogZnVuY3Rpb24gaGFuZGxlTW9kZWxlcigpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgdGhpcy5tb2RlbGVyLm9uKCdyb290LmFkZGVkJywgZnVuY3Rpb24gKGUpIHsKICAgICAgICBpZiAoZS5lbGVtZW50LnR5cGUgPT09ICdicG1uOlByb2Nlc3MnKSB7CiAgICAgICAgICBfdGhpcy5lbGVtZW50ID0gbnVsbDsKICAgICAgICAgIF90aGlzLiRuZXh0VGljaygpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgICBfdGhpcy5lbGVtZW50ID0gZS5lbGVtZW50OwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgdGhpcy5tb2RlbGVyLm9uKCdlbGVtZW50LmNsaWNrJywgZnVuY3Rpb24gKGUpIHsKICAgICAgICB2YXIgZWxlbWVudCA9IGUuZWxlbWVudDsKICAgICAgICBpZiAoZWxlbWVudC50eXBlID09PSAnYnBtbjpQcm9jZXNzJyB8fCBlbGVtZW50LnR5cGUgPT09ICdicG1uOlNlcXVlbmNlRmxvdycgfHwgZWxlbWVudC50eXBlID09PSAnYnBtbjpFbmRFdmVudCcpIHsKICAgICAgICAgIF90aGlzLmVsZW1lbnQgPSBlbGVtZW50OwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIHRoaXMubW9kZWxlci5vbignc2VsZWN0aW9uLmNoYW5nZWQnLCBmdW5jdGlvbiAoZSkgewogICAgICAgIC8vIGhhY2sg5ZCM57G75Z6L6Z2i5p2/5LiN5Yi35pawCiAgICAgICAgX3RoaXMuZWxlbWVudCA9IG51bGw7CiAgICAgICAgdmFyIGVsZW1lbnQgPSBlLm5ld1NlbGVjdGlvblswXTsKICAgICAgICBpZiAoZWxlbWVudCkgewogICAgICAgICAgX3RoaXMuJG5leHRUaWNrKCkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIF90aGlzLmVsZW1lbnQgPSBlbGVtZW50OwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICB9Cn07CmV4cG9ydHMuZGVmYXVsdCA9IF9kZWZhdWx0Mjs="},{"version":3,"names":["_task","_interopRequireDefault","require","_startEnd","_process","_sequenceFlow","_gateway","_zh","name","components","processPanel","taskPanel","startEndPanel","sequenceFlowPanel","gatewayPanel","props","users","type","Array","required","groups","categorys","exps","default","_default","modeler","Object","data","element","form","id","color","computed","getComponent","_this$element","includes","nodeName","bizObj","businessObject","eventDefinitions","$type","NodeName","mounted","handleModeler","methods","_this","on","e","$nextTick","then","newSelection","exports","_default2"],"sources":["src/components/Process/PropertyPanel.vue"],"sourcesContent":["<template>\r\n  <div ref=\"propertyPanel\" class=\"property-panel\">\r\n    <div v-if=\"nodeName\" class=\"node-name\">{{ nodeName }}</div>\r\n    <component\r\n      :is=\"getComponent\"\r\n      v-if=\"element\"\r\n      :element=\"element\"\r\n      :modeler=\"modeler\"\r\n      :users=\"users\"\r\n      :groups=\"groups\"\r\n      :exps=\"exps\"\r\n      :categorys=\"categorys\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport taskPanel from './components/nodePanel/task'\r\nimport startEndPanel from './components/nodePanel/startEnd'\r\nimport processPanel from './components/nodePanel/process'\r\nimport sequenceFlowPanel from './components/nodePanel/sequenceFlow'\r\nimport gatewayPanel from './components/nodePanel/gateway'\r\nimport { NodeName } from './lang/zh'\r\n\r\nexport default {\r\n  name: 'PropertyPanel',\r\n  components: { processPanel, taskPanel, startEndPanel, sequenceFlowPanel, gatewayPanel },\r\n  props: {\r\n    users: {\r\n      type: Array,\r\n      required: true\r\n    },\r\n    groups: {\r\n      type: Array,\r\n      required: true\r\n    },\r\n    categorys: {\r\n      type: Array,\r\n      required: true\r\n    },\r\n    exps: {\r\n      type: Array,\r\n      default: () => []\r\n    },\r\n    modeler: {\r\n      type: Object,\r\n      required: true\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      element: null,\r\n      form: {\r\n        id: '',\r\n        name: '',\r\n        color: null\r\n      },\r\n    }\r\n  },\r\n  computed: {\r\n    getComponent() {\r\n      const type = this.element?.type\r\n      if (['bpmn:IntermediateThrowEvent', 'bpmn:StartEvent', 'bpmn:EndEvent'].includes(type)) {\r\n        return 'startEndPanel'\r\n      }\r\n      if ([\r\n        'bpmn:UserTask',\r\n        'bpmn:Task',\r\n        'bpmn:SendTask',\r\n        'bpmn:ReceiveTask',\r\n        'bpmn:ManualTask',\r\n        'bpmn:BusinessRuleTask',\r\n        'bpmn:ServiceTask',\r\n        'bpmn:ScriptTask'\r\n        // 'bpmn:CallActivity',\r\n        // 'bpmn:SubProcess'\r\n      ].includes(type)) {\r\n        return 'taskPanel'\r\n      }\r\n      if (type === 'bpmn:SequenceFlow') {\r\n        return 'sequenceFlowPanel'\r\n      }\r\n      if ([\r\n        'bpmn:InclusiveGateway',\r\n        'bpmn:ExclusiveGateway',\r\n        'bpmn:ParallelGateway',\r\n        'bpmn:EventBasedGateway'\r\n      ].includes(type)) {\r\n        return 'gatewayPanel'\r\n      }\r\n      if (type === 'bpmn:Process') {\r\n        return 'processPanel'\r\n      }\r\n      return null\r\n    },\r\n    nodeName() {\r\n      if (this.element) {\r\n        const bizObj = this.element.businessObject\r\n        const type = bizObj?.eventDefinitions\r\n          ? bizObj.eventDefinitions[0].$type\r\n          : bizObj.$type\r\n        return NodeName[type] || type\r\n      }\r\n      return ''\r\n    }\r\n  },\r\n  mounted() {\r\n    this.handleModeler()\r\n  },\r\n  methods: {\r\n    handleModeler() {\r\n      this.modeler.on('root.added', e => {\r\n        if (e.element.type === 'bpmn:Process') {\r\n          this.element = null\r\n          this.$nextTick().then(() => {\r\n            this.element = e.element\r\n          })\r\n        }\r\n      })\r\n      this.modeler.on('element.click', e => {\r\n        const { element } = e\r\n        if (element.type === 'bpmn:Process'\r\n          || element.type === 'bpmn:SequenceFlow'\r\n          || element.type === 'bpmn:EndEvent' ) {\r\n          this.element = element\r\n        }\r\n      })\r\n      this.modeler.on('selection.changed', e => {\r\n        // hack 同类型面板不刷新\r\n        this.element = null\r\n        const element = e.newSelection[0]\r\n        if (element) {\r\n          this.$nextTick().then(() => {\r\n            this.element = element\r\n          })\r\n        }\r\n      })\r\n    },\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n.property-panel {\r\n  padding: 20px 20px;\r\n  // reset element css\r\n  .el-form--label-top .el-form-item__label {\r\n    padding: 0;\r\n  }\r\n  // 设置设计器右侧表单高度\r\n  .el-form-item {\r\n    margin-bottom: 6px;\r\n  }\r\n  .tab-table .el-form-item {\r\n    margin-bottom: 16px;\r\n  }\r\n  .node-name{\r\n    border-bottom: 1px solid #ccc;\r\n    padding: 0 0 10px 20px;\r\n    margin-bottom: 10px;\r\n    font-size: 16px;\r\n    font-weight: bold;\r\n    color: #444;\r\n  }\r\n}\r\n</style>\r\n"],"mappings":"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"}]}