{"remainingRequest":"E:\\qrhpro\\cms-eam-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\qrhpro\\cms-eam-ui\\src\\components\\flow\\Role\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\qrhpro\\cms-eam-ui\\src\\components\\flow\\Role\\index.vue","mtime":1693791859388},{"path":"E:\\qrhpro\\cms-eam-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1693791616229},{"path":"E:\\qrhpro\\cms-eam-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":1693791596985},{"path":"E:\\qrhpro\\cms-eam-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1693791616229},{"path":"E:\\qrhpro\\cms-eam-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":1693791844037}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBsaXN0Um9sZSwgZ2V0Um9sZSwgZGVsUm9sZSwgYWRkUm9sZSwgdXBkYXRlUm9sZSwgZGF0YVNjb3BlLCBjaGFuZ2VSb2xlU3RhdHVzLCBkZXB0VHJlZVNlbGVjdCB9IGZyb20gIkAvYXBpL3N5c3RlbS9yb2xlIjsNCmltcG9ydCB7IHRyZWVzZWxlY3QgYXMgbWVudVRyZWVzZWxlY3QsIHJvbGVNZW51VHJlZXNlbGVjdCB9IGZyb20gIkAvYXBpL3N5c3RlbS9tZW51IjsNCmltcG9ydCB7U3RyVXRpbH0gZnJvbSAiQC91dGlscy9TdHJVdGlsIjsNCg0KZXhwb3J0IGRlZmF1bHQgew0KICBuYW1lOiAiRmxvd1JvbGUiLA0KICBkaWN0czogWydzeXNfbm9ybWFsX2Rpc2FibGUnXSwNCiAgLy8g5o6l5Y+X54i257uE5Lu255qE5YC8DQogIHByb3BzOiB7DQogICAgLy8g5Zue5pi+5pWw5o2u5Lyg5YC8DQogICAgc2VsZWN0VmFsdWVzOiB7DQogICAgICB0eXBlOiBOdW1iZXIgfCBTdHJpbmcgfCBBcnJheSwNCiAgICAgIGRlZmF1bHQ6IG51bGwsDQogICAgICByZXF1aXJlZDogZmFsc2UNCiAgICB9LA0KICAgIGNoZWNrVHlwZTogew0KICAgICAgdHlwZTogU3RyaW5nLA0KICAgICAgZGVmYXVsdDogJ211bHRpcGxlJywNCiAgICAgIHJlcXVpcmVkOiBmYWxzZQ0KICAgIH0sDQogIH0sDQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIC8vIOmBrue9qeWxgg0KICAgICAgbG9hZGluZzogdHJ1ZSwNCiAgICAgIC8vIOmAieS4reaVsOe7hA0KICAgICAgaWRzOiBbXSwNCiAgICAgIC8vIOmdnuWNleS4quemgeeUqA0KICAgICAgc2luZ2xlOiB0cnVlLA0KICAgICAgLy8g6Z2e5aSa5Liq56aB55SoDQogICAgICBtdWx0aXBsZTogdHJ1ZSwNCiAgICAgIC8vIOaYvuekuuaQnOe0ouadoeS7tg0KICAgICAgc2hvd1NlYXJjaDogdHJ1ZSwNCiAgICAgIC8vIOaAu+adoeaVsA0KICAgICAgdG90YWw6IDAsDQogICAgICAvLyDop5LoibLooajmoLzmlbDmja4NCiAgICAgIHJvbGVMaXN0OiBbXSwNCiAgICAgIC8vIOW8ueWHuuWxguagh+mimA0KICAgICAgdGl0bGU6ICIiLA0KICAgICAgLy8g5piv5ZCm5pi+56S65by55Ye65bGCDQogICAgICBvcGVuOiBmYWxzZSwNCiAgICAgIC8vIOafpeivouWPguaVsA0KICAgICAgcXVlcnlQYXJhbXM6IHsNCiAgICAgICAgcGFnZU51bTogMSwNCiAgICAgICAgcGFnZVNpemU6IDUsDQogICAgICAgIHJvbGVOYW1lOiB1bmRlZmluZWQsDQogICAgICAgIHJvbGVLZXk6IHVuZGVmaW5lZCwNCiAgICAgICAgc3RhdHVzOiB1bmRlZmluZWQNCiAgICAgIH0sDQogICAgICAvLyDooajljZXlj4LmlbANCiAgICAgIGZvcm06IHt9LA0KICAgICAgcmFkaW9TZWxlY3RlZDogbnVsbCwgLy8g5Y2V6YCJ5qGG5Lyg5YC8DQogICAgICBzZWxlY3RSb2xlTGlzdDogW10gLy8g5Zue5pi+5pWw5o2u5Lyg5YC8DQogICAgfTsNCiAgfSwNCiAgd2F0Y2g6IHsNCiAgICBzZWxlY3RWYWx1ZXM6IHsNCiAgICAgIGhhbmRsZXIobmV3VmFsKSB7DQogICAgICAgIGlmIChTdHJVdGlsLmlzTm90QmxhbmsobmV3VmFsKSkgew0KICAgICAgICAgIGlmIChuZXdWYWwgaW5zdGFuY2VvZiBOdW1iZXIgfHwgbmV3VmFsIGluc3RhbmNlb2YgU3RyaW5nKSB7DQogICAgICAgICAgICB0aGlzLnJhZGlvU2VsZWN0ZWQgPSBuZXdWYWwNCiAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgdGhpcy5zZWxlY3RSb2xlTGlzdCA9IG5ld1ZhbDsNCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgIH0sDQogICAgICBpbW1lZGlhdGU6IHRydWUNCiAgICB9LA0KICAgIHJvbGVMaXN0OiB7DQogICAgICBoYW5kbGVyKG5ld1ZhbCkgew0KICAgICAgICBpZiAoU3RyVXRpbC5pc05vdEJsYW5rKG5ld1ZhbCkgJiYgdGhpcy5zZWxlY3RSb2xlTGlzdC5sZW5ndGggPiAwKSB7DQogICAgICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gew0KICAgICAgICAgICAgdGhpcy4kcmVmcy5kYXRhVGFibGUuY2xlYXJTZWxlY3Rpb24oKTsNCiAgICAgICAgICAgIHRoaXMuc2VsZWN0Um9sZUxpc3Q/LnNwbGl0KCcsJykuZm9yRWFjaChrZXkgPT4gew0KICAgICAgICAgICAgICB0aGlzLiRyZWZzLmRhdGFUYWJsZS50b2dnbGVSb3dTZWxlY3Rpb24obmV3VmFsLmZpbmQoDQogICAgICAgICAgICAgICAgaXRlbSA9PiBrZXkgPT0gaXRlbS5yb2xlSWQNCiAgICAgICAgICAgICAgKSwgdHJ1ZSkNCiAgICAgICAgICAgIH0pOw0KICAgICAgICAgIH0pOw0KICAgICAgICB9DQogICAgICB9LA0KICAgICAgaW1tZWRpYXRlOiB0cnVlLCAvLyDnq4vljbPnlJ/mlYgNCiAgICAgIGRlZXA6IHRydWUgIC8v55uR5ZCs5a+56LGh5oiW5pWw57uE55qE5pe25YCZ77yM6KaB55So5Yiw5rex5bqm55uR5ZCsDQogICAgfQ0KICB9LA0KICBjcmVhdGVkKCkgew0KICAgIHRoaXMuZ2V0TGlzdCgpOw0KICB9LA0KICBtZXRob2RzOiB7DQogICAgLyoqIOafpeivouinkuiJsuWIl+ihqCAqLw0KICAgIGdldExpc3QoKSB7DQogICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlOw0KICAgICAgbGlzdFJvbGUodGhpcy5xdWVyeVBhcmFtcykudGhlbihyZXNwb25zZSA9PiB7DQogICAgICAgICAgdGhpcy5yb2xlTGlzdCA9IHJlc3BvbnNlLnJvd3M7DQogICAgICAgICAgdGhpcy50b3RhbCA9IHJlc3BvbnNlLnRvdGFsOw0KICAgICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOw0KICAgICAgICB9DQogICAgICApOw0KICAgIH0sDQogICAgLy8g5aSa6YCJ5qGG6YCJ5Lit5pWw5o2uDQogICAgaGFuZGxlTXVsdGlwbGVSb2xlU2VsZWN0KHNlbGVjdGlvbikgew0KICAgICAgY29uc3QgaWRMaXN0ID0gc2VsZWN0aW9uLm1hcChpdGVtID0+IGl0ZW0ucm9sZUlkKTsNCiAgICAgIGNvbnN0IG5hbWVMaXN0ID0gc2VsZWN0aW9uLm1hcChpdGVtID0+IGl0ZW0ucm9sZU5hbWUpOw0KICAgICAgdGhpcy4kZW1pdCgnaGFuZGxlUm9sZVNlbGVjdCcsIGlkTGlzdC5qb2luKCcsJyksIG5hbWVMaXN0LmpvaW4oJywnKSk7DQogICAgfSwNCiAgICAvLyDljZXpgInmoYbpgInkuK3mlbDmja4NCiAgICBoYW5kbGVTaW5nbGVSb2xlU2VsZWN0KHNlbGVjdGlvbikgew0KICAgICAgdGhpcy5yYWRpb1NlbGVjdGVkID0gc2VsZWN0aW9uLnJvbGVJZDsNCiAgICAgIGNvbnN0IHJvbGVOYW1lID0gc2VsZWN0aW9uLnJvbGVOYW1lOw0KICAgICAgdGhpcy4kZW1pdCgnaGFuZGxlUm9sZVNlbGVjdCcsIHRoaXMucmFkaW9TZWxlY3RlZC50b1N0cmluZygpLCByb2xlTmFtZSk7DQogICAgfSwNCiAgICAvKiog5pCc57Si5oyJ6ZKu5pON5L2cICovDQogICAgaGFuZGxlUXVlcnkoKSB7DQogICAgICB0aGlzLnF1ZXJ5UGFyYW1zLnBhZ2VOdW0gPSAxOw0KICAgICAgdGhpcy5nZXRMaXN0KCk7DQogICAgfSwNCiAgICAvKiog6YeN572u5oyJ6ZKu5pON5L2cICovDQogICAgcmVzZXRRdWVyeSgpIHsNCiAgICAgIHRoaXMuaGFuZGxlUXVlcnkoKTsNCiAgICB9LA0KICB9DQp9Ow0K"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4DA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/components/flow/Role","sourcesContent":["<template>\r\n  <div class=\"app-container\">\r\n    <el-form :model=\"queryParams\" ref=\"queryForm\" size=\"small\" :inline=\"true\" v-show=\"showSearch\">\r\n      <el-form-item label=\"角色名称\" prop=\"roleName\">\r\n        <el-input\r\n          v-model=\"queryParams.roleName\"\r\n          placeholder=\"请输入角色名称\"\r\n          clearable\r\n          style=\"width: 240px\"\r\n          @keyup.enter.native=\"handleQuery\"\r\n        />\r\n      </el-form-item>\r\n      <el-form-item>\r\n        <el-button type=\"primary\" icon=\"el-icon-search\" size=\"mini\" @click=\"handleQuery\">搜索</el-button>\r\n        <el-button icon=\"el-icon-refresh\" size=\"mini\" @click=\"resetQuery\">重置</el-button>\r\n      </el-form-item>\r\n    </el-form>\r\n\r\n    <el-table v-show=\"checkType === 'multiple'\" ref=\"dataTable\"  v-loading=\"loading\" :data=\"roleList\" @selection-change=\"handleMultipleRoleSelect\">\r\n      <el-table-column type=\"selection\" width=\"50\" align=\"center\" />\r\n      <el-table-column label=\"角色编号\" prop=\"roleId\" width=\"120\" />\r\n      <el-table-column label=\"角色名称\" prop=\"roleName\" :show-overflow-tooltip=\"true\" width=\"150\" />\r\n      <el-table-column label=\"权限字符\" prop=\"roleKey\" :show-overflow-tooltip=\"true\" width=\"150\" />\r\n      <el-table-column label=\"显示顺序\" prop=\"roleSort\" width=\"100\" />\r\n      <el-table-column label=\"创建时间\" align=\"center\" prop=\"createTime\" width=\"180\">\r\n        <template slot-scope=\"scope\">\r\n          <span>{{ parseTime(scope.row.createTime) }}</span>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n    <el-table v-show=\"checkType === 'single'\" v-loading=\"loading\" :data=\"roleList\" @current-change=\"handleSingleRoleSelect\">\r\n      <el-table-column  width=\"55\" align=\"center\" >\r\n        <template slot-scope=\"scope\">\r\n          <!-- 可以手动的修改label的值，从而控制选择哪一项 -->\r\n          <el-radio v-model=\"radioSelected\" :label=\"scope.row.roleId\">{{''}}</el-radio>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"角色编号\" prop=\"roleId\" width=\"120\" />\r\n      <el-table-column label=\"角色名称\" prop=\"roleName\" :show-overflow-tooltip=\"true\" width=\"150\" />\r\n      <el-table-column label=\"权限字符\" prop=\"roleKey\" :show-overflow-tooltip=\"true\" width=\"150\" />\r\n      <el-table-column label=\"显示顺序\" prop=\"roleSort\" width=\"100\" />\r\n      <el-table-column label=\"创建时间\" align=\"center\" prop=\"createTime\" width=\"180\">\r\n        <template slot-scope=\"scope\">\r\n          <span>{{ parseTime(scope.row.createTime) }}</span>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n\r\n    <pagination\r\n      v-show=\"total>0\"\r\n      :total=\"total\"\r\n      :page-sizes=\"[5,10]\"\r\n      :page.sync=\"queryParams.pageNum\"\r\n      :limit.sync=\"queryParams.pageSize\"\r\n      @pagination=\"getList\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { listRole, getRole, delRole, addRole, updateRole, dataScope, changeRoleStatus, deptTreeSelect } from \"@/api/system/role\";\r\nimport { treeselect as menuTreeselect, roleMenuTreeselect } from \"@/api/system/menu\";\r\nimport {StrUtil} from \"@/utils/StrUtil\";\r\n\r\nexport default {\r\n  name: \"FlowRole\",\r\n  dicts: ['sys_normal_disable'],\r\n  // 接受父组件的值\r\n  props: {\r\n    // 回显数据传值\r\n    selectValues: {\r\n      type: Number | String | Array,\r\n      default: null,\r\n      required: false\r\n    },\r\n    checkType: {\r\n      type: String,\r\n      default: 'multiple',\r\n      required: false\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      // 遮罩层\r\n      loading: true,\r\n      // 选中数组\r\n      ids: [],\r\n      // 非单个禁用\r\n      single: true,\r\n      // 非多个禁用\r\n      multiple: true,\r\n      // 显示搜索条件\r\n      showSearch: true,\r\n      // 总条数\r\n      total: 0,\r\n      // 角色表格数据\r\n      roleList: [],\r\n      // 弹出层标题\r\n      title: \"\",\r\n      // 是否显示弹出层\r\n      open: false,\r\n      // 查询参数\r\n      queryParams: {\r\n        pageNum: 1,\r\n        pageSize: 5,\r\n        roleName: undefined,\r\n        roleKey: undefined,\r\n        status: undefined\r\n      },\r\n      // 表单参数\r\n      form: {},\r\n      radioSelected: null, // 单选框传值\r\n      selectRoleList: [] // 回显数据传值\r\n    };\r\n  },\r\n  watch: {\r\n    selectValues: {\r\n      handler(newVal) {\r\n        if (StrUtil.isNotBlank(newVal)) {\r\n          if (newVal instanceof Number || newVal instanceof String) {\r\n            this.radioSelected = newVal\r\n          } else {\r\n            this.selectRoleList = newVal;\r\n          }\r\n        }\r\n      },\r\n      immediate: true\r\n    },\r\n    roleList: {\r\n      handler(newVal) {\r\n        if (StrUtil.isNotBlank(newVal) && this.selectRoleList.length > 0) {\r\n          this.$nextTick(() => {\r\n            this.$refs.dataTable.clearSelection();\r\n            this.selectRoleList?.split(',').forEach(key => {\r\n              this.$refs.dataTable.toggleRowSelection(newVal.find(\r\n                item => key == item.roleId\r\n              ), true)\r\n            });\r\n          });\r\n        }\r\n      },\r\n      immediate: true, // 立即生效\r\n      deep: true  //监听对象或数组的时候，要用到深度监听\r\n    }\r\n  },\r\n  created() {\r\n    this.getList();\r\n  },\r\n  methods: {\r\n    /** 查询角色列表 */\r\n    getList() {\r\n      this.loading = true;\r\n      listRole(this.queryParams).then(response => {\r\n          this.roleList = response.rows;\r\n          this.total = response.total;\r\n          this.loading = false;\r\n        }\r\n      );\r\n    },\r\n    // 多选框选中数据\r\n    handleMultipleRoleSelect(selection) {\r\n      const idList = selection.map(item => item.roleId);\r\n      const nameList = selection.map(item => item.roleName);\r\n      this.$emit('handleRoleSelect', idList.join(','), nameList.join(','));\r\n    },\r\n    // 单选框选中数据\r\n    handleSingleRoleSelect(selection) {\r\n      this.radioSelected = selection.roleId;\r\n      const roleName = selection.roleName;\r\n      this.$emit('handleRoleSelect', this.radioSelected.toString(), roleName);\r\n    },\r\n    /** 搜索按钮操作 */\r\n    handleQuery() {\r\n      this.queryParams.pageNum = 1;\r\n      this.getList();\r\n    },\r\n    /** 重置按钮操作 */\r\n    resetQuery() {\r\n      this.handleQuery();\r\n    },\r\n  }\r\n};\r\n</script>\r\n<style>\r\n/*隐藏radio展示的label及本身自带的样式*/\r\n/*.el-radio__label{*/\r\n/*  display:none;*/\r\n/*}*/\r\n</style>\r\n"]}]}